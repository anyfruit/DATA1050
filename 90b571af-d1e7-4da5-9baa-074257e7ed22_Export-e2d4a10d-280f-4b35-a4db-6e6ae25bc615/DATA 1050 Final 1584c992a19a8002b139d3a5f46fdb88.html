<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>DATA 1050 Final</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="1584c992-a19a-8002-b139-d3a5f46fdb88" class="page sans"><header><h1 class="page-title">DATA 1050 Final</h1><p class="page-description"></p></header><div class="page-body"><h2 id="1584c992-a19a-80ab-9a56-ec72727d307e" class="">SQL</h2><h3 id="1584c992-a19a-8098-8e20-fa56d173a1ed" class="">Meta Data</h3><ul id="1584c992-a19a-8093-9bd1-c06d6a39cc32" class="bulleted-list"><li style="list-style-type:disc">Meta-data is data about data. It provides some information about the data. Some examples:<ul id="1584c992-a19a-8087-b392-db7bcf49f73a" class="bulleted-list"><li style="list-style-type:circle">E.g., the column names and the data types of a column in a relational database table</li></ul><ul id="1584c992-a19a-809a-99ff-e1b98995e976" class="bulleted-list"><li style="list-style-type:circle">The number of rows in a table</li></ul><ul id="1584c992-a19a-8029-8cea-fa5b5366005a" class="bulleted-list"><li style="list-style-type:circle">Information about when and where a sound/video was recorded</li></ul></li></ul><ul id="1584c992-a19a-806c-9471-e6822ea5f319" class="bulleted-list"><li style="list-style-type:disc">Meta-data is also data (sometimes stored in the same format as data, as in data dictionaries)</li></ul><h3 id="1584c992-a19a-80b5-8ad5-d14a012b83d7" class="">Types of Data</h3><ul id="1584c992-a19a-808a-b8ca-eecebf9c7750" class="bulleted-list"><li style="list-style-type:disc">nominal</li></ul><ul id="1584c992-a19a-8098-be40-dabf988e237c" class="bulleted-list"><li style="list-style-type:disc">ordinal</li></ul><ul id="1584c992-a19a-80fb-8aac-e579b646c2f2" class="bulleted-list"><li style="list-style-type:disc">discrete</li></ul><ul id="1584c992-a19a-8045-b4f9-d50e0e0edeed" class="bulleted-list"><li style="list-style-type:disc">continuous</li></ul><h3 id="1584c992-a19a-804b-bfe7-c3403a169a25" class="">Structured and Unstructured Data</h3><ul id="1584c992-a19a-80af-a954-c642351a808a" class="bulleted-list"><li style="list-style-type:disc">Unstructured Data<ul id="1584c992-a19a-80da-9432-f128e5f39897" class="bulleted-list"><li style="list-style-type:circle">Examples: Documents, videos, images, soundtracks, etc.</li></ul><ul id="1584c992-a19a-8097-b919-f9748d99a463" class="bulleted-list"><li style="list-style-type:circle">The meta-data associated with unstructured data provides almost no information about the content of the data or its components (e.g., occurrences of the persons, locations, organizations, events, etc. in the document).</li></ul><ul id="1584c992-a19a-805d-9147-e5f30a23f9c8" class="bulleted-list"><li style="list-style-type:circle">Separate processes are required to extract and tag the components of interest in unstructured data.<ul id="1584c992-a19a-8067-b83e-e83d0f19ade3" class="bulleted-list"><li style="list-style-type:square">The tags are meta-data</li></ul></li></ul></li></ul><ul id="1584c992-a19a-803c-8549-eef9acaeae00" class="bulleted-list"><li style="list-style-type:disc">Semi-structured Data<ul id="1584c992-a19a-8073-8ea9-eaff1d1d90ba" class="bulleted-list"><li style="list-style-type:circle">E.g., emails, XML documents</li></ul><ul id="1584c992-a19a-8008-aabb-d8173f83b56e" class="bulleted-list"><li style="list-style-type:circle">Meta-data associated with semi-structured data provides<ul id="1584c992-a19a-8071-891a-ebbab77bd39a" class="bulleted-list"><li style="list-style-type:square">‘sufficient’ information about only some of the components of the data/document (e.g., emails) AND/OR</li></ul><ul id="1584c992-a19a-808b-8289-dcda10030c09" class="bulleted-list"><li style="list-style-type:square">provides ‘insufficient’ information about some of the components of the data/document (e.g., XML documents)</li></ul></li></ul><ul id="1584c992-a19a-80e7-91a4-c822471a72c4" class="bulleted-list"><li style="list-style-type:circle">Emails contain meta-data which tags the sender, receiver, time, etc. fields but do not provide any meta-data about the components of the body of the email.</li></ul></li></ul><ul id="1584c992-a19a-80f0-a6ae-d590ed6f1219" class="bulleted-list"><li style="list-style-type:disc">Structured Data<ul id="1584c992-a19a-802b-8ff7-d4a5cb261b9d" class="bulleted-list"><li style="list-style-type:circle">E.g., rows in a relational database tables, information entered in a typical web form, JSON objects, etc.</li></ul><ul id="1584c992-a19a-80e2-8587-ed891efa1f04" class="bulleted-list"><li style="list-style-type:circle">The meta-data associated with structured data gives ‘sufficient’ information about the components of the data.<ul id="1584c992-a19a-80f1-9227-cfb44c8523e9" class="bulleted-list"><li style="list-style-type:square">Whether the meta-data provides ‘sufficient’ information depends on one’s needs.</li></ul><ul id="1584c992-a19a-801a-9bfb-c0b5ede17baf" class="bulleted-list"><li style="list-style-type:square">If the address field in a database table contains city and street names and if you need to extract that information, you may not regard the ‘address’ tag as sufficient information</li></ul></li></ul></li></ul><ul id="1584c992-a19a-80de-97b8-e79df513b8ff" class="bulleted-list"><li style="list-style-type:disc">Big Data<ul id="1584c992-a19a-8074-a132-ce822b8f4685" class="bulleted-list"><li style="list-style-type:circle">Volume, Velocity, Variety</li></ul></li></ul><h3 id="1584c992-a19a-80d6-bd54-fb2fe080d554" class="">Data Models</h3><ul id="1584c992-a19a-80df-93a2-c8d5f9230297" class="bulleted-list"><li style="list-style-type:disc">Data model consists of:<ol type="1" id="1584c992-a19a-801c-b480-dc069f907d2b" class="numbered-list" start="1"><li>Data representation (tuples vs. objects vs. graphs, etc.)</li></ol><ol type="1" id="1584c992-a19a-808d-92dc-db88095e6a47" class="numbered-list" start="2"><li>Query language (e.g., SQL )</li></ol><ol type="1" id="1584c992-a19a-80a3-9fb6-efd96358a238" class="numbered-list" start="3"><li>Constraints that provide semantics for data (e.g., integrity constraints)</li></ol></li></ul><ul id="1584c992-a19a-8003-a3a8-edb2d34459b6" class="bulleted-list"><li style="list-style-type:disc">Data formats (16 bytes, 32 bytes, etc.)</li></ul><ul id="1584c992-a19a-8060-8662-cb4fa3d77b3f" class="bulleted-list"><li style="list-style-type:disc">Data types (integer, string, etc.)</li></ul><h3 id="1594c992-a19a-8069-9469-c78e0009be3d" class="">Types of data storage</h3><ul id="1594c992-a19a-80c1-b7ef-d2b44da2ee1e" class="bulleted-list"><li style="list-style-type:disc">Persistent vs. volatile</li></ul><ul id="1594c992-a19a-80b4-a51d-d6be9b634dca" class="bulleted-list"><li style="list-style-type:disc">Types of persistent storage<ul id="1594c992-a19a-8072-a119-eddd425ead8f" class="bulleted-list"><li style="list-style-type:circle">Files</li></ul><ul id="1594c992-a19a-80fe-a82b-c460b31a3839" class="bulleted-list"><li style="list-style-type:circle">Databases</li></ul><ul id="1594c992-a19a-8032-9929-e284f6331fc0" class="bulleted-list"><li style="list-style-type:circle">Spreadsheets</li></ul></li></ul><ul id="1594c992-a19a-8003-8118-fa93562028b2" class="bulleted-list"><li style="list-style-type:disc">Types of volatile storage<ul id="1594c992-a19a-8060-97cb-cc44351dc9c5" class="bulleted-list"><li style="list-style-type:circle">Data structures (trees, graphs, etc.)</li></ul></li></ul><ul id="1594c992-a19a-8006-989d-c5522a5151ea" class="bulleted-list"><li style="list-style-type:disc">Volatile to persistent (eg. pickling)</li></ul><ul id="1594c992-a19a-809d-a965-ec199006811a" class="bulleted-list"><li style="list-style-type:disc">Persistent to volatile</li></ul><h3 id="1584c992-a19a-8030-bbab-e54450127cbd" class="">Streaming Data</h3><ul id="1594c992-a19a-801b-8a6e-e3652dcb4a50" class="bulleted-list"><li style="list-style-type:disc">As opposed to that is streaming data, which is made available to an application by another application<ul id="1594c992-a19a-8014-8685-f3fab65d2ff1" class="bulleted-list"><li style="list-style-type:circle">Data comes in large volumes in short intervals, possibly in unpredictable bursts</li></ul><ul id="1594c992-a19a-80a9-84de-f79faa7fd9a8" class="bulleted-list"><li style="list-style-type:circle">Data has to be processed in real-time and provided to a consumer</li></ul><ul id="1594c992-a19a-8049-8ae3-f74baac89bac" class="bulleted-list"><li style="list-style-type:circle">Examples: data from nuclear reactors, airplanes, internet applications, IOT devices, etc.</li></ul><ul id="1594c992-a19a-80fc-98e6-dbdad2bef179" class="bulleted-list"><li style="list-style-type:circle">Producer and consumer may be the same or different systems<figure id="1594c992-a19a-80ee-b2cf-e1930bed10aa" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/76cb16f8-e42f-4554-a5c8-fc571e273e57.png"><img style="width:497px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/76cb16f8-e42f-4554-a5c8-fc571e273e57.png"/></a></figure><figure id="1594c992-a19a-8076-ab56-e6cd7988759c" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-10_%25E4%25B8%258B%25E5%258D%25887.09.52.png"><img style="width:440.9765625px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-10_%25E4%25B8%258B%25E5%258D%25887.09.52.png"/></a></figure></li></ul></li></ul><h3 id="1594c992-a19a-802a-924e-f19ad6647086" class="">Terminology</h3><ul id="1594c992-a19a-808a-a900-c410428a588c" class="bulleted-list"><li style="list-style-type:disc">A relation is a <strong>set </strong>of <strong>tuples</strong></li></ul><ul id="1594c992-a19a-80a3-92cc-df3357579aca" class="bulleted-list"><li style="list-style-type:disc"><strong>Database</strong>: set of named relations</li></ul><ul id="1594c992-a19a-8026-8ef7-d7c503ea6f32" class="bulleted-list"><li style="list-style-type:disc"><strong>Relation</strong>: has two components<ul id="1594c992-a19a-80ae-be34-ef00af9af2ab" class="bulleted-list"><li style="list-style-type:circle">Schema (metadata)</li></ul><ul id="1594c992-a19a-8008-942c-e71aef6b9e8a" class="bulleted-list"><li style="list-style-type:circle">Instance (data)</li></ul></li></ul><ul id="1594c992-a19a-8042-857d-db74342a2f48" class="bulleted-list"><li style="list-style-type:disc"><strong>Attribute</strong>:<ul id="1594c992-a19a-80b6-905d-f0ec396415a4" class="bulleted-list"><li style="list-style-type:circle">unique columns of the data</li></ul></li></ul><ul id="1594c992-a19a-807a-9587-e0633d55be3c" class="bulleted-list"><li style="list-style-type:disc"><strong>Tuple</strong>:<ul id="1594c992-a19a-8031-9135-c3f630aed3af" class="bulleted-list"><li style="list-style-type:circle">row of the data</li></ul></li></ul><h3 id="1594c992-a19a-807a-9f18-e7282422cd14" class="">Attributes and Domains</h3><ul id="1594c992-a19a-80c5-a552-cf043341fafd" class="bulleted-list"><li style="list-style-type:disc">The set of allowed values for each attribute (field, column) is called the domain of the attribute<ul id="1594c992-a19a-8001-b113-f102632ac2db" class="bulleted-list"><li style="list-style-type:circle">The set of allowed values for each attribute (field, column) is called the domain of the attributeFor example, if the type of an attribute is strings of a certain maximum length, then the domain of that attribute is the set of all strings with <strong>at most</strong> that that length</li></ul></li></ul><ul id="1594c992-a19a-80f3-8e18-cc65069ba191" class="bulleted-list"><li style="list-style-type:disc">The special value <strong>null</strong> (meaning, unknown or undefined) is in the domain of every attribute</li></ul><h3 id="1594c992-a19a-8054-80b7-c8a25e484bfe" class="">Keys</h3><ul id="1594c992-a19a-803a-8b49-e36bd97c3774" class="bulleted-list"><li style="list-style-type:disc">Let K ⊆ R, where R is the set of attributes of a relation schema</li></ul><ul id="1594c992-a19a-80c0-9f85-f0938a64307b" class="bulleted-list"><li style="list-style-type:disc">K is a <strong>superkey</strong> of R if values for K are sufficient to identify a unique tuple of each possible relation r(R)<ul id="1594c992-a19a-80b7-b7f4-c86a6cc469a6" class="bulleted-list"><li style="list-style-type:circle">Example: {ID} and {ID,name} are both superkeys of instructor</li></ul><ul id="1594c992-a19a-8036-99c2-cc361a2426ff" class="bulleted-list"><li style="list-style-type:circle">So, no two tuples with the same values for ID (given that a RDB table is a set)</li></ul></li></ul><ul id="1594c992-a19a-8051-99d5-d8d5ea77dadc" class="bulleted-list"><li style="list-style-type:disc">Superkey K is a <strong>candidate</strong> key if no <strong>proper </strong>subset of K is a superkey<ul id="1594c992-a19a-80cf-8342-faac07748bb7" class="bulleted-list"><li style="list-style-type:circle">Example: {ID} is a candidate key for Instructor</li></ul></li></ul><ul id="1594c992-a19a-80bf-8853-e613b69052d9" class="bulleted-list"><li style="list-style-type:disc">One (and only one) of the candidate keys is selected to be the primary key</li></ul><h3 id="1594c992-a19a-80c7-a312-f4245e82454a" class="">RDBMS</h3><ul id="1594c992-a19a-8006-a12d-cafd26e0be44" class="bulleted-list"><li style="list-style-type:disc">A relational database consists of a set of relational tables<ul id="1594c992-a19a-800e-9d82-e3dc03de5df6" class="bulleted-list"><li style="list-style-type:circle">Plus, possibly, some foreign key constraints</li></ul></li></ul><ul id="1594c992-a19a-80ec-a03f-fd1d53f83567" class="bulleted-list"><li style="list-style-type:disc">A Relational Database Management System is a set of programs for managing and facilitating all the operations on a database while maintaining the integrity and security of the data<ul id="1594c992-a19a-80ac-bebc-c439bb9a5135" class="bulleted-list"><li style="list-style-type:circle">We will be using the MySQL RDBMS in this class</li></ul></li></ul><ul id="1594c992-a19a-805d-80bc-c9bbf7afb102" class="bulleted-list"><li style="list-style-type:disc"><strong>Benefits</strong>: Flexibility, ACID compliance, Ease of use, Collaboration, Built-in security, Database normalization</li></ul><ul id="1584c992-a19a-80d4-a5fd-f1c431a7fc2b" class="bulleted-list"><li style="list-style-type:disc"><strong>Drawbacks</strong> of using file systems to store data<ul id="1594c992-a19a-805a-88a3-ee0e16de2921" class="bulleted-list"><li style="list-style-type:circle">Data redundancy and inconsistency</li></ul><ul id="1594c992-a19a-80ca-856c-deb11ef4fd58" class="bulleted-list"><li style="list-style-type:circle">Difficulty in accessing data</li></ul><ul id="1594c992-a19a-800b-b5f2-f5ccaa66105f" class="bulleted-list"><li style="list-style-type:circle">Data isolation - the files are not connected with each ohter</li></ul><ul id="1594c992-a19a-80a6-900a-c3162393c1b7" class="bulleted-list"><li style="list-style-type:circle">Integrity problems<ul id="1594c992-a19a-8028-81d5-c4e4a404de15" class="bulleted-list"><li style="list-style-type:square">Integrity constraints (e.g., GPA &gt;= 0) become “buried” in program code rather than being stated explicitly</li></ul><ul id="1594c992-a19a-8068-8fed-cc53f33dea6e" class="bulleted-list"><li style="list-style-type:square">Hard to add new constraints or change existing ones</li></ul></li></ul><ul id="1594c992-a19a-8019-bd56-cd04f210e6b0" class="bulleted-list"><li style="list-style-type:circle">No way of enforcing atomicity of updates<ul id="1594c992-a19a-80ae-8139-d1431a9576aa" class="bulleted-list"><li style="list-style-type:square">Failure may leave the data in an inconsistent state</li></ul><ul id="1594c992-a19a-80d4-884a-ff3611ac43ba" class="bulleted-list"><li style="list-style-type:square">Example: Transfer of funds from one account to another should either complete or not happen at all</li></ul></li></ul><ul id="1594c992-a19a-804d-9fd0-d1b2ad8e2509" class="bulleted-list"><li style="list-style-type:circle">No system for managing concurrent accesses by different users (over and above that provided by operating system)<ul id="1594c992-a19a-80a1-9657-ee0fd224a2a4" class="bulleted-list"><li style="list-style-type:square">Concurrent accesses needed for performance</li></ul><ul id="1594c992-a19a-80c1-a477-c043ae8b2fd9" class="bulleted-list"><li style="list-style-type:square">Uncontrolled concurrent accesses can leave the data in an inconsistent state</li></ul></li></ul><ul id="1594c992-a19a-8010-8917-ca201390e089" class="bulleted-list"><li style="list-style-type:circle">Security problems<ul id="1594c992-a19a-8055-a736-dbda7394fddc" class="bulleted-list"><li style="list-style-type:square">Can’t give users access to some but not all the data</li></ul></li></ul></li></ul><h3 id="1594c992-a19a-80fa-a386-f738b69ab6d2" class="">Schema</h3><ul id="1594c992-a19a-8091-a5e4-cd014b7bca29" class="bulleted-list"><li style="list-style-type:disc">We want to distinguish between the structure of a RDB table and the data stored in it at any given moment.</li></ul><ul id="1594c992-a19a-8087-96d8-cae7cc62dfb4" class="bulleted-list"><li style="list-style-type:disc">The data can change frequently but the structure changes very infrequently.</li></ul><ul id="1594c992-a19a-80bd-8592-c0c46d0bf959" class="bulleted-list"><li style="list-style-type:disc">The structure is often referred to a the ‘Schema’ of a table in textbooks.<ul id="1594c992-a19a-80d3-b8d1-f56f36a35570" class="bulleted-list"><li style="list-style-type:circle">A table is its schema plus the data stored in it (data with meta-data)</li></ul><ul id="1594c992-a19a-80ec-bcc6-c9cda6ebc3a7" class="bulleted-list"><li style="list-style-type:circle">Warning: RDB practitioners will sometimes use ‘Schema’ to refer to the structure of an entire database as opposed to the structure of a table.</li></ul></li></ul><p id="1594c992-a19a-805d-80d8-e2c0711f3871" class=""><strong>Schema Example:</strong></p><ul id="1594c992-a19a-803d-9bb5-ddde16ce2765" class="bulleted-list"><li style="list-style-type:disc">Friends (name of the schema, not part of the schema)<ul id="1594c992-a19a-80e8-8891-c8de1fafbf20" class="bulleted-list"><li style="list-style-type:circle">Name: Varchar (String)</li></ul><ul id="1594c992-a19a-80aa-b60c-e532d4e8c211" class="bulleted-list"><li style="list-style-type:circle">Age: Integer</li></ul><ul id="1594c992-a19a-80ed-8489-ebc6c43c832a" class="bulleted-list"><li style="list-style-type:circle">Gender: Varchar (String)</li></ul></li></ul><ul id="1594c992-a19a-8028-b048-cbbdb1b6a44a" class="bulleted-list"><li style="list-style-type:disc">Also represented as:<ul id="1594c992-a19a-8024-98f7-deb41bca04ee" class="bulleted-list"><li style="list-style-type:circle">Friends (Name: Varchar (String), Age: Integer, Gender: Varchar (String))</li></ul><ul id="1594c992-a19a-804f-a015-fc3954b2bcf5" class="bulleted-list"><li style="list-style-type:circle">Friends (Name, Age Gender)</li></ul></li></ul><p id="1594c992-a19a-80cb-ba34-c3cc6fad6b56" class=""><strong>Data Types</strong></p><table id="1594c992-a19a-8051-a62d-c938fed9539b" class="simple-table"><tbody><tr id="1741d686-3d47-451d-99e4-9d6018171822"><td id="K[G\" class="">char(n)</td><td id="t&gt;Gb" class="" style="width:145px">varchar(n)</td><td id="vjmU" class="">int</td></tr><tr id="9c544c8f-bede-492f-8c77-109ad47d5b37"><td id="K[G\" class="">smallint</td><td id="t&gt;Gb" class="" style="width:145px">bigint</td><td id="vjmU" class="">numeric(p,d)</td></tr><tr id="56142400-0685-47f6-ba5c-ddac6e049d7b"><td id="K[G\" class="">real, double precision</td><td id="t&gt;Gb" class="" style="width:145px">float(n)</td><td id="vjmU" class="">Date, Time, URL, …</td></tr></tbody></table><h3 id="1594c992-a19a-805e-94d0-eb3be9131303" class="">SQL as Data Definition Language (DDL)</h3><ul id="1594c992-a19a-80da-b793-c92b528e3d5f" class="bulleted-list"><li style="list-style-type:disc">SQL is a declarative language, unlike Python which is an imperative (object-oriented language)</li></ul><ul id="1594c992-a19a-80e0-9ffa-f5b9745cc0c7" class="bulleted-list"><li style="list-style-type:disc">In declarative language we specify what we want as opposed to how to do what we want</li></ul><ul id="1594c992-a19a-807a-bafe-c9ca616757e1" class="bulleted-list"><li style="list-style-type:disc">Can be used to create, drop, and alter tables (schema)<ul id="1594c992-a19a-80d9-bcea-d2154cddd694" class="bulleted-list"><li style="list-style-type:circle">In those uses it is called a Data Definition Language (DDL) rather than a query language</li></ul></li></ul><ul id="1594c992-a19a-802b-87f8-fbd1cdbf0679" class="bulleted-list"><li style="list-style-type:disc">Can be also be used to<ul id="1594c992-a19a-808c-a80a-cfff5ea24b2b" class="bulleted-list"><li style="list-style-type:circle">Retrieve data from tables</li></ul><ul id="1594c992-a19a-80eb-b9d7-ff0c14f0436f" class="bulleted-list"><li style="list-style-type:circle">Insert new data into tables</li></ul><ul id="1594c992-a19a-805f-9dde-d8a0698037c9" class="bulleted-list"><li style="list-style-type:circle">Update (modify) existing data in tables</li></ul></li></ul><p id="1594c992-a19a-8009-bcf9-fc619f12536f" class="">Can be used to create relations as well as additional information about relations, such as:</p><ul id="1594c992-a19a-80d1-b96d-d6e778ce8ef5" class="bulleted-list"><li style="list-style-type:disc">The schema of the relation</li></ul><ul id="1594c992-a19a-80d7-bb3e-c5c0492c7461" class="bulleted-list"><li style="list-style-type:disc">The data types of the values to be stored in the relation</li></ul><ul id="1594c992-a19a-800d-887e-de3899b0fd60" class="bulleted-list"><li style="list-style-type:disc">The integrity constraints on the relation</li></ul><ul id="1594c992-a19a-805d-a744-cb501dfe39a8" class="bulleted-list"><li style="list-style-type:disc">The set of indices on the relation</li></ul><ul id="1594c992-a19a-805e-9a6d-eb8915b527bd" class="bulleted-list"><li style="list-style-type:disc">Information about access privileges and security</li></ul><ul id="1594c992-a19a-805f-be1f-f9986e8da0f6" class="bulleted-list"><li style="list-style-type:disc">The physical storage structure of the relation on the disk</li></ul><h3 id="1594c992-a19a-8005-b9f4-ec9e8858d830" class="">RDBMS and transactions</h3><ul id="1594c992-a19a-8084-9b6a-c439b7d929ad" class="bulleted-list"><li style="list-style-type:disc">A database transaction is any sequence of operation of reading (querying) data from the database or writing (inserting, modifying) data into the database, which can be viewed as a single task.<ul id="1594c992-a19a-80ba-b624-fe97da2ecf31" class="bulleted-list"><li style="list-style-type:circle">E.g., transferring funds from one bank account into another account</li></ul></li></ul><ul id="1594c992-a19a-8078-9783-f73fda082d61" class="bulleted-list"><li style="list-style-type:disc">An RDBMS must manage multiple concurrent transactions from multiple users at the same time without any unintended and undesirable effects.</li></ul><ul id="1594c992-a19a-802d-8d4e-f06a0bf3720d" class="bulleted-list"><li style="list-style-type:disc">RDBMS provide ACID (Atomicity, Consistency, Isolation, Durability) guarantees on transactions<ul id="1594c992-a19a-801f-b86f-cc2c4aeacaed" class="bulleted-list"><li style="list-style-type:circle">Atomicity: Every transaction is either entered into the DB in its entirety or not at all</li></ul><ul id="1594c992-a19a-80c0-8285-eac2a6d56334" class="bulleted-list"><li style="list-style-type:circle">Consistency: Only those transactions are executed which will not make a consistent DB inconsistent</li></ul><ul id="1594c992-a19a-8084-99b7-f009424f78fe" class="bulleted-list"><li style="list-style-type:circle">Isolation: Each transaction is executed as if it is the only transaction being executed at that time</li></ul><ul id="1594c992-a19a-8010-8149-cfb16eb2db9d" class="bulleted-list"><li style="list-style-type:circle">Durability: Once a transaction is committed, it remains in the DB even in the face of system failures</li></ul></li></ul><ul id="1594c992-a19a-80a6-8470-fbf714514e81" class="bulleted-list"><li style="list-style-type:disc">Note: Different type of NoSQL databases relax these ACID guarantees in different ways</li></ul><h3 id="1594c992-a19a-8075-8a9f-d0b28528d37b" class="">Create Table</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-80af-983b-e7fd06fe5c01" class="code"><code class="language-SQL">create table instructor (
                   ID             char(5),
                   name           varchar(20) not null,
                   dept_name      varchar(20),
                   salary         numeric(8,2),
                   primary key (ID),
                   foreign key (dept_name) references department (dept_name)
		)</code></pre><h3 id="1594c992-a19a-80b5-9602-e197e15da12a" class="">Referential Integrity</h3><ul id="1594c992-a19a-8074-8337-d82f1c2654f2" class="bulleted-list"><li style="list-style-type:disc">A database in which all foreign key constraints are respected is said to have <strong>referential integrity.</strong></li></ul><ul id="1594c992-a19a-80a7-aa74-e1cdc8a6e3b9" class="bulleted-list"><li style="list-style-type:disc">In the SQL code for creating a table we can specify what action to take if insertion of data violates a foreign key constraint on table: Block the insertion? Take a corrective action on the validator table? No action?</li></ul><h3 id="1594c992-a19a-80f5-be84-c4c8ffa90f49" class="">Constraints</h3><p id="1594c992-a19a-806b-8a5a-f37863a2d346" class="">Integrity constraint types:</p><ul id="1594c992-a19a-8009-bd56-e93c86522d57" class="bulleted-list"><li style="list-style-type:disc">NOT NULL</li></ul><ul id="1594c992-a19a-80e2-a980-d1573f0c4450" class="bulleted-list"><li style="list-style-type:disc">PRIMARY KEY</li></ul><ul id="1594c992-a19a-8082-b8c0-c14d1d32b9f8" class="bulleted-list"><li style="list-style-type:disc">UNIQUE</li></ul><ul id="1594c992-a19a-8087-9566-f6f7759d8e2d" class="bulleted-list"><li style="list-style-type:disc">FOREIGN KEY (referential integrity)</li></ul><ul id="1594c992-a19a-8000-b8d8-ddcefca70445" class="bulleted-list"><li style="list-style-type:disc">CHECK (P), where P is a predicate</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-80b8-9ee5-e54fa94fc267" class="code"><code class="language-SQL"># Say we want to add a constraint that salary has to be greater than or equal to 0
create table instructor (
                   ID             char(5),
                   name           varchar(20) NOT NULL,
                   dept_name      varchar(20) CHECK (dept_name IN (&#x27;Bio&#x27;,&#x27;Phy&#x27;,&#x27;Math&#x27;)),
                   salary         numeric(8,2) CHECK (salary &gt; 0.0),
                   primary key (ID),
                   foreign key (dept_name) references department(dept_name) ON DELETE CASCADE,
                   # ON UPDATE CASCADE / SET NULL / SET DEFAULT
                   UNIQUE (ID, name)
		)</code></pre><h3 id="1594c992-a19a-803b-ad99-d6b4d0ab09c3" class="">Inserting Data</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-8026-a41d-cbbc475ceeb1" class="code"><code class="language-SQL">INSERT into course VALUES (‘Data1050’, ‘Data Engineering’, ‘DSI’, 1);
# Same as above
INSERT into course (course_id, title, dept_name, credits) VALUES 
	(‘Data1050’, ‘Data Engineering’, ‘DSI’, 1);
	
# Add a new tuple to student with tot_cred set to null
INSERT into student VALUES (’3003’, ’Green’, ’Finance’, null);</code></pre><h3 id="1594c992-a19a-801a-8ba3-fca1b35e4901" class="">Updates</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-80c8-aea1-e31805ebcd95" class="code"><code class="language-SQL"># General Form
UPDATE table_name 
SET attribute_value = value
WHERE boolean condition;

# Example
UPDATE instructor
SET salary = salary * 1.5
WHERE salary &lt; 50,000;</code></pre><h3 id="1594c992-a19a-8080-bcdd-d2424086bfac" class="">Deletes</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-804f-8d35-d545bb8bfd3e" class="code"><code class="language-SQL"># General Form
DELETE FROM table_name WHERE boolean condition;

# Example
DELETE FROM instructor WHERE salary &gt; 75000;</code></pre><h3 id="1594c992-a19a-8077-8a1e-e101f17ef59e" class="">Update Table Constraint</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-8012-a274-e18a87f16691" class="code"><code class="language-SQL"># General Form
ALTER TABLE table_name 
ADD CONSTRAINT 
PRIMARY KEY (col1, col2);

# Example:
ALTER TABLE instructor
ADD CONSTRAINT   
PRIMARY KEY (ID);
</code></pre><h3 id="1594c992-a19a-80ac-8270-d4b0b41c308e" class="">SQL as Data Query Language</h3><div id="1594c992-a19a-8033-a2c7-f08e2509cee2" class="column-list"><div id="71de324f-42d3-48fe-9d17-cc0eda9949fc" style="width:37.5%" class="column"><figure id="1594c992-a19a-80b0-b5a9-c79ac4e57e9f" class="image" style="text-align:left"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258A%25E5%258D%258811.53.59.png"><img style="width:288px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258A%25E5%258D%258811.53.59.png"/></a></figure><p id="1594c992-a19a-80fd-97a4-de3a67e676b9" class="">
</p></div><div id="83a7f625-abb4-4667-bf14-d08a3cc168eb" style="width:62.5%" class="column"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="592f498f-0443-413f-9c15-43e98e7d6187" class="code"><code class="language-SQL">SELECT [DISTINCT] &lt;column expression list&gt;
FROM &lt;table&gt;
[WHERE &lt;predicate&gt;]
[GROUP BY &lt;column list&gt;]
[HAVING &lt;predicate&gt;]
[ORDER BY &lt;column list&gt;] #ASC DESC
[LIMIT &lt;number of rows&gt;]
[OFFSET &lt;number of rows&gt;];</code></pre></div></div><h3 id="1594c992-a19a-8062-9d84-f85a3be7482d" class="">String Operations</h3><ul id="1594c992-a19a-80b6-8f06-e5a9fdd90b38" class="bulleted-list"><li style="list-style-type:disc">SQL includes a string-matching operator for comparisons on character strings.</li></ul><ul id="1594c992-a19a-802a-8bee-e9a5d4a11c05" class="bulleted-list"><li style="list-style-type:disc">The operator “like” uses patterns that are described using two special characters:<ul id="1594c992-a19a-8029-aa12-e4bf15459a27" class="bulleted-list"><li style="list-style-type:circle">percent (%). The % character matches any substring.</li></ul><ul id="1594c992-a19a-8092-a96f-e73378cc20bb" class="bulleted-list"><li style="list-style-type:circle">underscore (_). The _ character matches any character.</li></ul><ul id="1594c992-a19a-80f7-9ff6-fd1cb88c06f4" class="bulleted-list"><li style="list-style-type:circle">Examples: Find the names of all instructors whose name includes the substring “dar”.</li></ul></li></ul><ul id="1594c992-a19a-805c-b979-cb6ab62751d8" class="bulleted-list"><li style="list-style-type:disc">SELECT name FROM instructor WHERE name like &#x27;%dar%&#x27;</li></ul><ul id="1594c992-a19a-80e0-867d-e356d5a9f2be" class="bulleted-list"><li style="list-style-type:disc">Match the string “100 %” :  like ‘100 \%&#x27;</li></ul><ul id="1594c992-a19a-803f-8d60-cda07e715760" class="bulleted-list"><li style="list-style-type:disc">&#x27;\’ is used as an escape character.</li></ul><h3 id="1594c992-a19a-801c-96c5-f04e097707c2" class="">Where clause</h3><ul id="1594c992-a19a-8061-a3ee-fa27f9e1949e" class="bulleted-list"><li style="list-style-type:disc">Must be a Boolean expression</li></ul><ul id="1594c992-a19a-8080-be09-dd2fe3e1d881" class="bulleted-list"><li style="list-style-type:disc">Can contain one or more Boolean clauses joined by AND, OR, or NOT</li></ul><ul id="1594c992-a19a-806c-b5b5-e47ddebbd297" class="bulleted-list"><li style="list-style-type:disc">SQL includes a <strong>between</strong> comparison operator</li></ul><ul id="1594c992-a19a-80e5-bc98-d7d513a650c9" class="bulleted-list"><li style="list-style-type:disc">Example: SELECT name FROM instructor WHERE salary <strong>between</strong> 90000 and 100000</li></ul><ul id="1594c992-a19a-802d-a8b5-c26554cb8406" class="bulleted-list"><li style="list-style-type:disc">Tuple comparison</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-80c3-b631-f8a5d477cd87" class="code"><code class="language-SQL"># Example
SELECT name, course_id FROM instructor, teaches
WHERE (instructor.ID, dept_name) = (teaches.ID, ’Biology’)</code></pre><h3 id="15a4c992-a19a-80a0-b81c-ef69df8b2c56" class="">CASE WHEN Syntax</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8013-ae5c-c8f3e927093a" class="code"><code class="language-SQL"># Basic syntax
CASE
	WHEN condition1 THEN result1
	WHEN condition2 THEN result2
	WHEN conditionN THEN resultN
	ELSE result
END; 

# Example1
SELECT person_id, name, died, born,
    CASE WHEN died IS NULL
         THEN 2024 - born
         ELSE died - born
    END AS age                                                                     
FROM people;

# Example2
SELECT person_id, name, died, born
FROM people
ORDER BY (CASE WHEN died IS NULL
             	 THEN 2024 - born
	         		 ELSE died - born
	    	  END)
DESC;</code></pre><h3 id="15a4c992-a19a-807e-84ef-f7bf168d59bb" class="">CAST</h3><ul id="15a4c992-a19a-804c-b559-c62c61304324" class="bulleted-list"><li style="list-style-type:disc">Convert one type to another for calculation.</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80b0-b72b-e4a39bc5bac7" class="code"><code class="language-SQL"># If premiered was a string, we can cast to integer:
CAST(premiered AS INTEGER)

# Use a column for minutes (assume INT) and convert to hours:
SELECT primary_title, type, premiered, runtime_minutes,
     CAST(runtime_minutes AS DOUBLE PRECISION)/60 AS runtime_hours
FROM titles
WHERE premiered &gt;= 2020 AND
      premiered &lt;= 2023;
      
# another way
SELECT primary_title, type, premiered, runtime_minutes,
     runtime_minutes * 1.0 /60 AS runtime_hours
FROM titles
WHERE premiered &gt;= 2020 AND
      premiered &lt;= 2023;</code></pre><h3 id="1594c992-a19a-80c3-a743-e445187dc314" class="">Set Operation in SQL</h3><ul id="1594c992-a19a-804b-b87f-f3a42a13bd19" class="bulleted-list"><li style="list-style-type:disc">Recall operations on sets are binary (take two arguments)</li></ul><ul id="1594c992-a19a-8008-ba83-ff3299c8d7e7" class="bulleted-list"><li style="list-style-type:disc">Set operations on tables are also binary</li></ul><ul id="1594c992-a19a-80be-8e04-f82cbcac0c2a" class="bulleted-list"><li style="list-style-type:disc">R1 <strong>UNION/INTERSECT/EXCEPT</strong> R2 is another table</li></ul><ul id="1594c992-a19a-804f-bf68-ebeec04802b8" class="bulleted-list"><li style="list-style-type:disc">Restrictions:<ul id="1594c992-a19a-8097-afef-f7d6b1899efb" class="bulleted-list"><li style="list-style-type:circle">The two sets must have the same number of attributes</li></ul><ul id="1594c992-a19a-8090-9e33-e548df329e1c" class="bulleted-list"><li style="list-style-type:circle">The type of each attribute in corresponding positions must be the same</li></ul><ul id="1594c992-a19a-808d-af1c-edc60cd004a7" class="bulleted-list"><li style="list-style-type:circle">But the corresponding attributes <strong>don’t </strong>have to have the same name</li></ul></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-8083-85c4-eb23cc511181" class="code"><code class="language-SQL"># Find courses that were offered in Fall 2020 or in Spring 2021 
(SELECT course_id FROM section WHERE sem = ‘Fall’ and year = 2020) 					
union 
(SELECT course_id FROM section WHERE sem = ‘Spring’ and year = 2021)
# (The union is between the set returned by the first statement with the set returned by the second statement)

# Find courses that were offered in Fall 2020 and in Spring 2021 
(SELECT course_id FROM section WHERE sem = ‘Fall’ and year = 2020) 					
intersect 
(SELECT course_id FROM section WHERE sem = ‘Spring’ and year = 2021)

# Find courses that were offered in Fall 2020 but not in Spring 2021
(SELECT course_id FROM section WHERE sem = ‘Fall’ and year = 2020) 				
except 
(SELECT course_id FROM section WHERE sem = ‘Spring’ and year = 2021)</code></pre><ul id="1594c992-a19a-8037-8213-d34154ec2470" class="bulleted-list"><li style="list-style-type:disc">union, intersect, and except operations automatically eliminates duplicates. To retain all duplicates use the corresponding multiset versions <strong>union all</strong>, <strong>intersect all </strong>and <strong>except all.</strong></li></ul><h3 id="1594c992-a19a-80f0-8894-fde76a65ebe1" class="">Null Values</h3><ul id="1594c992-a19a-80c5-a2b7-dfffb00a2641" class="bulleted-list"><li style="list-style-type:disc">Recall a tuple can contain a <strong>null</strong>, which denotes unknown or non-existent value</li></ul><ul id="1594c992-a19a-800c-85cb-ec91ef8a8a27" class="bulleted-list"><li style="list-style-type:disc">An arithmetic expression with a null evaluates to null<ul id="1594c992-a19a-80a5-b828-d5f6938e0e0c" class="bulleted-list"><li style="list-style-type:circle"><strong>null + 5 evaluates to null</strong></li></ul></li></ul><ul id="1594c992-a19a-80b9-97d5-ddb872718a24" class="bulleted-list"><li style="list-style-type:disc">The predicate <strong>IS NULL</strong> can be used to check for null values.</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-80b5-b387-e1f9a14013bd" class="code"><code class="language-SQL"># Example: Find all instructors whose salary is **null**.
SELECT name FROM instructor WHERE salary IS NULL</code></pre><h3 id="1594c992-a19a-8096-9be1-d9f67898920e" class="">Three-valued logic (Kleene logic)</h3><ul id="1594c992-a19a-8025-95c3-de14cc912090" class="bulleted-list"><li style="list-style-type:disc">Any comparison with null returns unknown<ul id="1594c992-a19a-80f6-bd2f-f4a99342ca81" class="bulleted-list"><li style="list-style-type:circle">Example: (5 &lt; null or null) = (null or null) = null</li></ul></li></ul><p id="1594c992-a19a-80d6-a92b-c7ffe9f67cc5" class="">Three-valued logic using the truth value unknown:</p><ul id="1594c992-a19a-8096-8d90-db17f5f0fc73" class="bulleted-list"><li style="list-style-type:disc">OR: (unknown or true) = true, (unknown or false) = unknown, (unknown or unknown) = unknown</li></ul><ul id="1594c992-a19a-80c3-a5c4-f3409cad6216" class="bulleted-list"><li style="list-style-type:disc">AND: (true and unknown) = unknown, (false and unknown) = false, (unknown and unknown) = unknown</li></ul><ul id="1594c992-a19a-80d9-a78b-ddac9123a592" class="bulleted-list"><li style="list-style-type:disc">NOT: (not unknown) = unknown</li></ul><ul id="1594c992-a19a-8029-9e5f-e996f2a4c4a5" class="bulleted-list"><li style="list-style-type:disc">“P is unknown” evaluates to true if predicate P evaluates to unknown</li></ul><p id="1594c992-a19a-8073-ab58-f9ad143316d2" class=""><strong>Result of WHERE clause predicate is treated as false if it evaluates to unknown</strong></p><h3 id="1594c992-a19a-8036-b940-f451c524ccbd" class="">Aggregate functions</h3><ul id="1594c992-a19a-80ae-ae68-c7b5e3b5849b" class="bulleted-list"><li style="list-style-type:disc">AVG, MIN, MAX, SUM, COUNT()</li></ul><ul id="1594c992-a19a-80d4-b626-ca6ac50bed49" class="bulleted-list"><li style="list-style-type:disc">Attributes in <strong>select </strong>clause other than aggregate functions must appear in <strong>group by</strong> list</li></ul><ul id="1594c992-a19a-80db-8efa-cdab54e52c1f" class="bulleted-list"><li style="list-style-type:disc"><strong>Null values and aggregates</strong><ul id="1594c992-a19a-8067-be52-f6e05ecf3d72" class="bulleted-list"><li style="list-style-type:circle">All aggregate operations except count(*) ignore tuples with null values on the aggregated attributes ■</li></ul><ul id="1594c992-a19a-80f5-9be7-cec99dd326e4" class="bulleted-list"><li style="list-style-type:circle">Total all salaries</li></ul><ul id="1594c992-a19a-80b6-94f9-cbf2b2ef257d" class="bulleted-list"><li style="list-style-type:circle">SELECT sum (salary ) FROM instructor<ul id="1594c992-a19a-80bd-a26a-c27d0bee9b26" class="bulleted-list"><li style="list-style-type:square">Above statement ignores null amounts</li></ul><ul id="1594c992-a19a-80e0-b028-ea8d2e96302b" class="bulleted-list"><li style="list-style-type:square">Result is null if there is no non-null amount</li></ul></li></ul><ul id="1594c992-a19a-800d-8e6a-d7d0e0c1da83" class="bulleted-list"><li style="list-style-type:circle">What if collection has only null values?<ul id="1594c992-a19a-8050-aa5b-ee289a2ffc4c" class="bulleted-list"><li style="list-style-type:square">count returns 0</li></ul><ul id="1594c992-a19a-80a7-be73-d5b4f1c56296" class="bulleted-list"><li style="list-style-type:square">all other aggregates return null</li></ul></li></ul><ul id="1594c992-a19a-806e-9f99-ed03b01b5cad" class="bulleted-list"><li style="list-style-type:circle"><strong>Note: sum/count is not always same as avg, due to null values</strong></li></ul></li></ul><div id="1594c992-a19a-80b2-9882-f4f2539bc1d7" class="column-list"><div id="1594c992-a19a-80ce-a009-c869e0eba143" style="width:93.75%" class="column"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-805a-860b-e794757dcd11" class="code"><code class="language-SQL"># Count NULLS and NOT NULLS in the same query
SELECT 
	COUNT(*) - COUNT(price) null_cnt, 
	COUNT(price) not_null_cnt
FROM cars;</code></pre><p id="1594c992-a19a-80d2-a99f-e7aeb52c295d" class="">
</p></div><div id="1594c992-a19a-802b-9786-c1e5a8c922ef" style="width:68.74999999999999%" class="column"><table id="1594c992-a19a-800a-9746-f3c490c27102" class="simple-table"><tbody><tr id="1594c992-a19a-8097-aaa2-ed19a83facc1"><td id="[d`=" class=""><strong>car</strong></td><td id="jXA~" class=""><strong>price</strong></td></tr><tr id="1594c992-a19a-80e4-96c9-c8efffc6aff2"><td id="[d`=" class="">abc</td><td id="jXA~" class="">100</td></tr><tr id="1594c992-a19a-8069-b12d-d613b51bb758"><td id="[d`=" class="">bcd</td><td id="jXA~" class="">null</td></tr><tr id="1594c992-a19a-8040-9ddc-ff74c2844603"><td id="[d`=" class="">cde</td><td id="jXA~" class="">50</td></tr><tr id="1594c992-a19a-8094-8756-c8e87ae75ca8"><td id="[d`=" class="">def</td><td id="jXA~" class="">null</td></tr><tr id="1594c992-a19a-80c1-8136-c3bedd90c439"><td id="[d`=" class="">efg</td><td id="jXA~" class="">100</td></tr></tbody></table></div></div><h3 id="1594c992-a19a-8048-b5cc-d8ddcf4dda57" class="">GROUP BY with HAVING clause</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-80c3-b91f-e4fb71d18550" class="code"><code class="language-SQL"># Example
# Find the names and average salaries of all departments whose average salary is greater than 50,000
select dept_name, avg (salary)
from instructor
group by dept_name
having avg (salary) &gt; 50000;</code></pre><ul id="1594c992-a19a-80df-a022-c08baa5aeabb" class="bulleted-list"><li style="list-style-type:disc">Note:  Predicates in the <strong>having</strong> clause are filters on groups whereas predicates in the <strong>where</strong> clause are filters on the tuples that go into groups. They are applied after the formation of groups whereas predicates in the where clause are applied before forming groups.</li></ul><h3 id="1594c992-a19a-80c3-b296-eb23cbe94892" class="">Views</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-806b-a162-e44c3324bdab" class="code"><code class="language-SQL">CREATE VIEW view_name AS
SELECT column1, column2, ...
FROM table_name
WHERE condition;


SELECT column1, column2, ...
FROM view_name
WHERE other_condition;</code></pre><h3 id="1594c992-a19a-8069-b9e3-f160b9fa0f88" class="">CTE</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-803f-b96c-cd59ac7bfb2c" class="code"><code class="language-SQL">WITH cte_name AS 
(SELECT column1, column2, ...
FROM table_name
WHERE condition)


SELECT column1, column2, ...
FROM cte_name
WHERE other_condition;</code></pre><h3 id="1594c992-a19a-8008-9a84-c0dbf37787c7" class="">Temporary Tables</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-8037-85a3-da648768f607" class="code"><code class="language-SQL">CREATE TEMPORARY TABLE temporary_table (column1 INT, column2 VARCHAR);
INSERT INTO  temporary_table VALUES (123, “Adam”), (234, “Lily”); 
SELECT column1, column2
FROM temporary_table
WHERE some_condition;</code></pre><table id="1594c992-a19a-8099-9a8e-f8c5675e3aa8" class="simple-table"><tbody><tr id="1594c992-a19a-80bd-8aa1-d92477d8cf23"><td id=":pLR" class=""></td><td id="q&gt;Vu" class=""><strong>Views</strong></td><td id="C~~t" class=""><strong>CTEs</strong></td><td id="PNgR" class=""><strong>Temporary Table</strong></td></tr><tr id="1594c992-a19a-80d4-b14f-c26c17c8b06e"><td id=":pLR" class="">“Materializes” the data</td><td id="q&gt;Vu" class="">❌</td><td id="C~~t" class="">✅</td><td id="PNgR" class="">✅</td></tr><tr id="1594c992-a19a-80dd-a672-d2ca853f8ee3"><td id=":pLR" class="">Table stored in the database</td><td id="q&gt;Vu" class="">❌</td><td id="C~~t" class="">❌</td><td id="PNgR" class="">❌</td></tr><tr id="1594c992-a19a-8072-ab3b-cb64c052c525"><td id=":pLR" class="">Can be outside of database session</td><td id="q&gt;Vu" class="">✅</td><td id="C~~t" class="">❌</td><td id="PNgR" class="">❌</td></tr><tr id="1594c992-a19a-80ad-b4ed-d71f54c78bb3"><td id=":pLR" class="">Can modify after created</td><td id="q&gt;Vu" class="">✅</td><td id="C~~t" class="">❌</td><td id="PNgR" class="">✅</td></tr><tr id="1594c992-a19a-801d-a5cd-db691882cf65"><td id=":pLR" class="">Will change the data if underlying data changes</td><td id="q&gt;Vu" class="">✅</td><td id="C~~t" class="">❌</td><td id="PNgR" class="">❌</td></tr></tbody></table><h3 id="1594c992-a19a-8085-9401-fca83eefa7d3" class="">Subqueries</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-8044-92ba-ea99a3ba1bab" class="code"><code class="language-SQL"># Basic Syntax
SELECT column1, column2, ...
FROM 
(SELECT column1, column2, ...
FROM table_name
WHERE condition) AS view_name
WHERE other_condition;

# Example
# Find the total number of (distinct) students who have taken course sections taught by the instructor with ID 10101 
SELECT COUNT (DISTINCT ID) 
FROM takes 
WHERE (course_id, sec_id, semester, year) IN 
(SELECT course_id, sec_id, semester, year FROM teaches WHERE teaches.ID= 10101)

# Scalar Subquery
# Example
SELECT dept_name, 
(SELECT count(*) 
FROM instructor 
WHERE department.dept_name = instructor.dept_name) AS num_instructors 
FROM department</code></pre><h3 id="1594c992-a19a-80fa-8ec7-e49738492072" class="">Set Comparison</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-8084-88af-f49e54f5f32e" class="code"><code class="language-SQL"># Example
# Find names of instructors with salary greater than that of some (at least one) instructor in the Biology department. 
SELECT name 
FROM instructor 
WHERE salary &gt; SOME (SELECT salary FROM instructor WHERE dept name = ’Biology’)

# Example
# Find the names of all instructors whose salary is greater than the salary of all instructors in the Biology department. 
SELECT name 
FROM instructor 
WHERE salary &gt; ALL (SELECT salary 
FROM instructor 
WHERE dept name = ’Biology’)</code></pre><h3 id="1594c992-a19a-8059-ada2-c46c1cc3d371" class="">Why SQL Joins Important</h3><ul id="1594c992-a19a-8023-83b6-cdc23e56fd7e" class="bulleted-list"><li style="list-style-type:disc">Efficiency<ul id="1594c992-a19a-802f-a74a-f4b78a765d95" class="bulleted-list"><li style="list-style-type:circle">Joins are the core of why we use relational databases. It allows us to efficient get and change information within a database.</li></ul></li></ul><ul id="1594c992-a19a-80aa-a37a-e568440485ea" class="bulleted-list"><li style="list-style-type:disc">Normalization<ul id="1594c992-a19a-8016-aba5-dfb9647bcfdb" class="bulleted-list"><li style="list-style-type:circle">Avoid data duplication and redundancy by normalizing the data to its smallest form and allows for fewer data anomalies when you delete or update records</li></ul></li></ul><ul id="1594c992-a19a-8060-9910-f27e9aad9dcf" class="bulleted-list"><li style="list-style-type:disc">Reduce Database Workload<ul id="1594c992-a19a-804b-bc0e-d4cc1be3096e" class="bulleted-list"><li style="list-style-type:circle">Reduce the workload placed on the database because you can use one join query to get the same result as multiple queries</li></ul></li></ul><figure id="1594c992-a19a-8021-9d75-fe11a1a2d65e" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25881.44.45.png"><img style="width:624px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25881.44.45.png"/></a></figure><h3 id="1594c992-a19a-801f-84a4-e2e297ed9e5d" class="">Functional Dependency</h3><ul id="1594c992-a19a-802b-bb47-f9fb6b91c6c6" class="bulleted-list"><li style="list-style-type:disc">RDBMS does not directly enforce functional dependencies. Instead functional dependencies are enforced by a good design (or redesign) of a database</li></ul><ul id="1594c992-a19a-8096-bba6-da3e159a1352" class="bulleted-list"><li style="list-style-type:disc">Functional dependency A-&gt; X, where A and X are subsets of attributes of a relation R, where the attribute set on the left side of the arrow, A is called Determinant, and X is called the Dependent.<ul id="1594c992-a19a-8053-918c-ff29cd9bbd5e" class="bulleted-list"><li style="list-style-type:circle">This is a special case of a key K, which can be represented as K-&gt; R (all the attributes of R including K)</li></ul></li></ul><ul id="1594c992-a19a-8083-b9ce-d46047ea57d6" class="bulleted-list"><li style="list-style-type:disc">Both mean there can be no valid instance of the DB in which there are two tuples which have the same value for the lhs of the dependency but different values for the rhs of the dependency.<ul id="1594c992-a19a-80dc-b244-dcc3af4359f9" class="bulleted-list"><li style="list-style-type:circle">The main difference is that in the case of keys, the rhs consists of all the attributes of R.</li></ul></li></ul><ul id="1594c992-a19a-80f8-bb6c-e96998956895" class="bulleted-list"><li style="list-style-type:disc">Secondly, the DBMS has mechanisms for enforcing dependencies involving primary keys (i.e., primary key constraints)</li></ul><ul id="1594c992-a19a-800d-889c-dce46bc30036" class="bulleted-list"><li style="list-style-type:disc">Problems caused by FDs<table id="1594c992-a19a-8034-986d-eb712d0356cc" class="simple-table"><tbody><tr id="1594c992-a19a-80ee-8078-d76e11c6b08b"><td id="yzjk" class=""><strong>id</strong></td><td id="c:gW" class=""><strong>name</strong></td><td id="g?gh" class=""><strong>dept_name</strong></td><td id="&gt;s]o" class=""><strong>salary</strong></td><td id="lzkX" class=""><strong>building</strong></td><td id="zq;q" class=""><strong>budget</strong></td></tr><tr id="1594c992-a19a-8081-aba5-f292964a8670"><td id="yzjk" class="">111</td><td id="c:gW" class="">Jon Bergman</td><td id="g?gh" class="">Biology</td><td id="&gt;s]o" class="">72,000</td><td id="lzkX" class="">Watson</td><td id="zq;q" class="">954,000</td></tr><tr id="1594c992-a19a-8045-8d8f-f3e2b695fe12"><td id="yzjk" class="">183</td><td id="c:gW" class="">Ronald Sharma</td><td id="g?gh" class="">Philosophy</td><td id="&gt;s]o" class="">68,000</td><td id="lzkX" class="">Plaza</td><td id="zq;q" class="">543,000</td></tr><tr id="1594c992-a19a-80c9-b4a6-f984daeab77e"><td id="yzjk" class="">324</td><td id="c:gW" class="">Seila Crick</td><td id="g?gh" class="">Biology</td><td id="&gt;s]o" class="">73,000</td><td id="lzkX" class="">Watson</td><td id="zq;q" class="">954,000</td></tr><tr id="1594c992-a19a-805d-86fb-ffc8ab3a1aab"><td id="yzjk" class="">379</td><td id="c:gW" class="">Yuan Xi</td><td id="g?gh" class="">Biology</td><td id="&gt;s]o" class="">64,000</td><td id="lzkX" class="">Watson</td><td id="zq;q" class="">954,000</td></tr><tr id="1594c992-a19a-8065-8992-c4cbad62a7db"><td id="yzjk" class="">421</td><td id="c:gW" class="">Julie Fernandes</td><td id="g?gh" class="">Philosophy</td><td id="&gt;s]o" class="">71,500</td><td id="lzkX" class="">Plaza</td><td id="zq;q" class="">543,000</td></tr></tbody></table><ul id="1594c992-a19a-800b-a30e-f97421407db8" class="bulleted-list"><li style="list-style-type:circle">Redundancy anomaly<ul id="1594c992-a19a-8026-b391-f1054eb7b784" class="bulleted-list"><li style="list-style-type:square">Building and budget info is needlessly repeated</li></ul><ul id="1594c992-a19a-8064-ab33-e17b6468ac25" class="bulleted-list"><li style="list-style-type:square">Waste of DB space</li></ul></li></ul><ul id="1594c992-a19a-80a3-8102-d9983be0a14c" class="bulleted-list"><li style="list-style-type:circle">Insertion anomaly<ul id="1594c992-a19a-8027-b58c-d2c9a977e19d" class="bulleted-list"><li style="list-style-type:square">If the philosophy budget is increased, it could be updated in one row and not the other rows.</li></ul></li></ul><ul id="1594c992-a19a-80eb-b4ec-cb078d33f2af" class="bulleted-list"><li style="list-style-type:circle">Deletion anomaly<ul id="1594c992-a19a-8090-aefb-e444cab344d8" class="bulleted-list"><li style="list-style-type:square">If all the philosophy faculty are deleted from the DB, then there is no record of the location or budget of the philosophy department since there is no separate department table</li></ul></li></ul></li></ul><p id="1594c992-a19a-80d4-9658-f617b038170e" class=""><strong>Trivial Satisfaction of a FD</strong></p><ul id="1594c992-a19a-8013-be32-e8e59c779a54" class="bulleted-list"><li style="list-style-type:disc">F <em>trivially </em>satisfies R if<ul id="1594c992-a19a-80f4-8b6e-fff26f4a28d8" class="bulleted-list"><li style="list-style-type:circle">R does not contain all the attribute on the lhs of F, or</li></ul><ul id="1594c992-a19a-80f5-83d7-ec6c86691440" class="bulleted-list"><li style="list-style-type:circle">R does not contain all the attributes on the rhs of R, or</li></ul><ul id="1594c992-a19a-806e-bfb1-ddfdefd376ad" class="bulleted-list"><li style="list-style-type:circle">The attributes on the rhs of F are a subset of the lhs of F</li></ul></li></ul><ul id="1594c992-a19a-809a-bbae-ee09f2cc95c1" class="bulleted-list"><li style="list-style-type:disc"><strong>Thesis: If F trivially satisfies R then no instance (state) of R can be in violation of F.</strong></li></ul><p id="1594c992-a19a-80e0-99e7-fed693424ed0" class=""><strong>Non-Trivial Satisfaction</strong></p><ul id="1594c992-a19a-808c-913b-f11109586918" class="bulleted-list"><li style="list-style-type:disc">By the law of transitivity {A} -&gt; {B} and {B} -&gt; {C} implies (generates) {A} -&gt; {C}</li></ul><h3 id="1594c992-a19a-809e-85f8-f41e8c619c23" class="">Normalization</h3><p id="1594c992-a19a-80e5-9d9a-d61cf3f7234c" class=""><strong>First Normal Form - 1NF</strong></p><ul id="1594c992-a19a-802a-b26b-ed09be6e5249" class="bulleted-list"><li style="list-style-type:disc">a single cell must not hold more than one value (atomicity)</li></ul><ul id="1594c992-a19a-8034-8bdf-c1db71b926cc" class="bulleted-list"><li style="list-style-type:disc">there must be a primary key for identification</li></ul><ul id="1594c992-a19a-809f-885b-db8f73f7658c" class="bulleted-list"><li style="list-style-type:disc">each column must have only one value for each row in the table</li></ul><ul id="1594c992-a19a-80b8-ad0c-fe40689c71f1" class="bulleted-list"><li style="list-style-type:disc">no duplicated rows or columns</li></ul><p id="1594c992-a19a-80f7-89fd-e01e84f9c5a9" class=""><strong>Second Normal Form - 2NF</strong></p><ul id="1594c992-a19a-803d-8c32-d4e45d5bfcd3" class="bulleted-list"><li style="list-style-type:disc">It’s already in 1NF</li></ul><ul id="1594c992-a19a-8016-af59-de370430aac9" class="bulleted-list"><li style="list-style-type:disc">AND has no partial dependency - that is, all non-key attributes are fully dependent on the entire primary key.</li></ul><p id="1594c992-a19a-8090-9224-f677e0a0b483" class=""><strong>Third Normal Form - 3NF</strong></p><ul id="1594c992-a19a-80e1-8000-da84a3b01942" class="bulleted-list"><li style="list-style-type:disc">It’s already in 2NF AND have no transitive partial dependency</li></ul><ul id="1594c992-a19a-80f6-bc9a-e6f1d61fb428" class="bulleted-list"><li style="list-style-type:disc">A database schema S is in 3NF with respect to a set of FDs F iff for every  relation R in S and for every F in F  it holds that<p id="1594c992-a19a-80b3-b1d8-cebac54bde24" class="">1. F is trivially satisfied, or</p><p id="1594c992-a19a-804d-8913-ea87f004066a" class="">2. lhs of F is a superkey of R, or</p><p id="1594c992-a19a-808b-9f74-dc29a1f24621" class="">3. Each attribute in rhs – lhs of R is contained in a candidate key of R (Note the attributes in rhs –lhs can be contained in different candidate keys of R.)</p></li></ul><p id="1594c992-a19a-80f7-9dcb-d5e43f7fbbf0" class=""><strong>Boyce-Codd Normal Form</strong></p><ul id="1594c992-a19a-8055-89ca-f6180e3b01b7" class="bulleted-list"><li style="list-style-type:disc">A stronger form of 3NF</li></ul><ul id="1594c992-a19a-800a-afcd-c053772fe65c" class="bulleted-list"><li style="list-style-type:disc">A database schema <em><strong>S</strong></em> is in BCNF with respect to a set of FDs <em><strong>F </strong></em>iff for every relation R in <em><strong>S </strong></em>and for every F in <em><strong>F  </strong></em>it holds that<p id="1594c992-a19a-80a6-80ad-fe3ba879b98e" class="">1. F is trivially satisfied by R, or</p><p id="1594c992-a19a-8095-823d-d1c441647b11" class="">2. lhs of F is a superkey of R</p><p id="1594c992-a19a-8091-a52e-fdb32ae9e3b0" class="">(How do we know whether the lhs of F is a superkey of R?)</p></li></ul><ul id="1594c992-a19a-807a-95c8-d5b08d094ae4" class="bulleted-list"><li style="list-style-type:disc">A database that is in BCNF with respect to <em><strong>F</strong></em><ul id="1594c992-a19a-800d-bf58-d0367c307c49" class="bulleted-list"><li style="list-style-type:circle">is guaranteed to satisfy all the FDs in <em><strong>F, and</strong></em></li></ul><ul id="1594c992-a19a-80b8-a700-f50b9634bfc7" class="bulleted-list"><li style="list-style-type:circle">do it in such a way that there are no redundancy and update anomalies.</li></ul></li></ul><ul id="1594c992-a19a-80de-9db1-dece1a25d910" class="bulleted-list"><li style="list-style-type:disc">F <em>trivially </em>satisfies R if<ul id="1594c992-a19a-8006-a3ac-fc12bdda3a89" class="bulleted-list"><li style="list-style-type:circle">R does not contain all the attribute on the lhs of F, or</li></ul><ul id="1594c992-a19a-80a3-9350-ecfed920f2fe" class="bulleted-list"><li style="list-style-type:circle">R does not contain all the attributes on the rhs of F, or</li></ul><ul id="1594c992-a19a-800d-808e-f94c6445b8e0" class="bulleted-list"><li style="list-style-type:circle">The attributes on the rhs of F are a subset of the lhs of F</li></ul></li></ul><ul id="1594c992-a19a-80d8-ae22-cf34159cb152" class="bulleted-list"><li style="list-style-type:disc">3NF -&gt; every non-key attribute in a table on the key, the whole key, and nothing but the key</li></ul><ul id="1594c992-a19a-8075-8fd4-f61c156881c3" class="bulleted-list"><li style="list-style-type:disc">BCNF -&gt; every <del>non-key </del>attribute in a table on the key, the whole key, and nothing but the key</li></ul><h3 id="1594c992-a19a-80e8-8147-c618c48b4461" class="">Triggers</h3><ul id="1594c992-a19a-808f-8736-e0dbedd122f8" class="bulleted-list"><li style="list-style-type:disc">A mechanism for creating a side-effect on another table when a table is modified through insertion or delete or update, or</li></ul><ul id="1594c992-a19a-8097-823c-d97606cc2046" class="bulleted-list"><li style="list-style-type:disc">To create a notification outside the database system</li></ul><ul id="1594c992-a19a-80e9-b9f4-cd3386b5c06c" class="bulleted-list"><li style="list-style-type:disc">Trigger structure:<ul id="1594c992-a19a-8078-a1a1-c29978087f4f" class="bulleted-list"><li style="list-style-type:circle">Event -&gt; check condition -&gt; if condition is true, perform action</li></ul><ul id="1594c992-a19a-80e8-a932-e89d42291b54" class="bulleted-list"><li style="list-style-type:circle">Event is modification (delete or insertion or update) of a table</li></ul><ul id="1594c992-a19a-8057-b53a-e5661253cd1d" class="bulleted-list"><li style="list-style-type:circle">Action can be modification of another table or an action external to the DBMS (send an email, activate an alarm, launch a missile, etc.)</li></ul></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-809c-bf43-f29a47f62477" class="code"><code class="language-SQL"># Basic Syntax
CREATE TRiGGER [trigger_name]
[before | after]  
{insert | update | delete}  
ON [table_name]  
[for each row]  
[trigger_body]

# Example
# Scenario: student’s grade is changed from an INC or NC grade to a letter grade in the takes table. And tot_cred has to be updated as result
CREATE TRIGGER credits_earned 
AFTER UPDATE OF takes ON (grade)
REFERENCING NEW ROW AS nrow   # updated row of takes
REFERENCING OLD ROW AS orow    # row of takes before the update
FOR EACH ROW
WHEN nrow.grade &lt;&gt; ‘F’ AND 
            (orow.gade = ‘INC’ OR orow.grade = ‘NC’)
BEGIN ATOMIC UPDATE student 
SET tot_cred = tot_cred + (SELECT credits 
                                           FROM course 
               WHERE course.course_id = nrow.course_id)
WHERE student.id = nrow.id
END

# Example 2
# change an attempted update of grade with a non-allowed value to a null value
CREATE TRIGGER setnull 
BEFORE UPDATE ON takes
REFERENCING NEW ROW AS nrow
FOR EACH ROW
WHEN nrow.grade NOT IN  (‘A’, ‘B’, ‘C’, ‘D’, ‘F’, ‘INC’)
BEGIN ATOMIC
SET nrow.grade = NULL
END</code></pre><h3 id="1594c992-a19a-8012-98bb-f6bf9363bdd9" class="">Procedures</h3><ul id="1594c992-a19a-80f8-abd6-d752e8c4de0f" class="bulleted-list"><li style="list-style-type:disc">Stored procedures are programs that can perform multiple operations, such as inserting, updating, deleting etc. </li></ul><ul id="1594c992-a19a-80fc-b413-d62ed6e0d5ce" class="bulleted-list"><li style="list-style-type:disc">Procedures do not need to return a value but they usually change the value of some variable when the procedure is executed (not when it is defined)</li></ul><ul id="1594c992-a19a-8009-a3f0-d312c55e1cce" class="bulleted-list"><li style="list-style-type:disc">Procedures vs. Views:<ul id="1594c992-a19a-80ee-b4f4-de3513faf03f" class="bulleted-list"><li style="list-style-type:circle">Views are virtual tables that return the result of a query every time they are accessed.</li></ul><ul id="1594c992-a19a-8025-b5ae-e6a519c6ef15" class="bulleted-list"><li style="list-style-type:circle">Stored procedures are programs that can perform multiple operations, such as inserting, updating, deleting etc.</li></ul></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-80fc-8eee-effd3e8540a8" class="code"><code class="language-SQL"># Example
DELIMITER //

CREATE procedure studentcount (
IN sid varchar(128),
OUT total decimal(3,2))
BEGIN 	
	SELECT tot_cred INTO total   
	FROM student	
	WHERE student.id = sid;
END //

# Call procedure
DELIMITER;
call studentcount(&#x27;1122&#x27;,  @total); #results stored in @total

SELECT @total #display results
#The procedure studentcount is stored in the database and can be invoked any time with a specific value for id 
</code></pre><h3 id="1594c992-a19a-80fe-bff9-c3a76643f55a" class="">Functions</h3><ul id="1594c992-a19a-80a5-9113-ce2830598138" class="bulleted-list"><li style="list-style-type:disc">Functions must return a value</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-802a-ad63-ec0952cbe814" class="code"><code class="language-SQL">DELIMITER //
CREATE FUNCTION studentcount (sid varchar(128))
RETURNS decimal(3, 2)
BEGIN
     DECLARE total decimal(3, 2);
     SELECT tot_cred INTO total
     FROM student
     WHERE student.id = sid;
     RETURN total;
END //

DELIMITER;
SELECT studentcount(&#x27;1122&#x27;);
#The function studentcount is stored in the database and can be invoked any time with a specific value for id </code></pre><h3 id="1594c992-a19a-80e2-968b-f06c171c3ecc" class="">Window Functions</h3><ul id="1594c992-a19a-805d-b54f-c696c1a78fc4" class="bulleted-list"><li style="list-style-type:disc">Window functions can insert some value in the current row by accessing other rows and do this for each row of the table.</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-8050-a7a7-d18e0c0d9728" class="code"><code class="language-SQL"># Basic Syntax
&lt;window or agg_func&gt; OVER (
  [PARTITION BY &lt;…&gt;]
  [ORDER BY &lt;…&gt;]
  [RANGE BETWEEN &lt;…&gt; AND &lt;…&gt;])
 
# range_start/range_end general syntax:
#  UNBOUNDED PRECEDING
#  UNBOUNDED FOLLOWING
#  CURRENT ROW
#  offset PRECEDING
#  offset FOLLOWING 
  
#Example
SELECT O.CustomerId, O.OrderDate, OD.UnitPrice, 
		RANK() OVER (
				PARTITION BY O.CustomerId 
				ORDER BY OD.UnitPrice 
				DESC) AS “UnitRank”
FROM Order O, OrderDetail OD
WHERE  O.Id = OD.OrderId</code></pre><ul id="1594c992-a19a-80f0-b334-ef1248d8ea36" class="bulleted-list"><li style="list-style-type:disc">Window functions CANNOT be used within FROM, JOIN, GROUP BY, HAVING, and Aggregate Functions</li></ul><ul id="1594c992-a19a-8009-b47a-cfcaff373b5c" class="bulleted-list"><li style="list-style-type:disc">Window functions CAN be used in SELECT, DISTINCT, UNION, INTERSECT, EXCEPT, ORDER BY, LIMIT, TOP<figure id="1594c992-a19a-801e-9adc-cbc5d2974145" class="image" style="text-align:center"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/2bae74c4-dcb9-4138-89c4-7f0d04c56ad4.png"><img style="width:576px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/2bae74c4-dcb9-4138-89c4-7f0d04c56ad4.png"/></a></figure></li></ul><div id="1594c992-a19a-8017-baf0-c0b1393c7c26" class="column-list"><div id="2266ff3e-f0d6-43ad-9893-26c28b69dfef" style="width:50%" class="column"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="d561cc05-14c5-4be0-99d5-c25cc1fab595" class="code"><code class="language-SQL"># Example of range between
SELECT id, location, age, 
  SUM(age) OVER (
    PARTITION BY location 
    ORDER BY age 
    RANGE BETWEEN
      UNBOUNDED PRECEDING AND 
      1 PRECEDING ) 
      AS a_sum 
FROM Stops
ORDER BY location, age
</code></pre></div><div id="b83fb44a-0d85-4f1c-a56d-9128671dddfd" style="width:50%" class="column"><figure id="1594c992-a19a-80f5-a27d-e2414e8d5fe6" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.27.16.png"><img style="width:238.4921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.27.16.png"/></a></figure><figure id="1594c992-a19a-804b-be0e-ebab73c57060" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.27.26.png"><img style="width:238.484375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.27.26.png"/></a></figure></div></div><h3 id="1594c992-a19a-80a9-8b2c-d11a2cc30cdd" class="">Sampling</h3><p id="1594c992-a19a-80e9-bfa0-d9335282b5c6" class="">Three common techniques for <strong>sampling</strong> rows from a relation:</p><ol type="1" id="1594c992-a19a-8021-8fac-ecabdbdd1a9a" class="numbered-list" start="1"><li>SELECT * FROM Table <strong>ORDER BY RANDOM()</strong> LIMIT N;<ul id="1594c992-a19a-8079-9bb4-dee3596eadbc" class="bulleted-list"><li style="list-style-type:disc">Reasonable for exploration</li></ul></li></ol><p id="1594c992-a19a-8023-8bb5-c18535e5c1e5" class="">2. 	SELECT * FROM Table <strong>TABLESAMPLE BERNOULLI (p)</strong></p><ul id="1594c992-a19a-80bd-a2d9-d447742f46be" class="bulleted-list"><li style="list-style-type:disc">Includes each row with probability (i.e., p=1 means 1%)</li></ul><p id="1594c992-a19a-809a-aaca-ed288300e467" class="">3. 	SELECT * FROM Table <strong>TABLESAMPLE SYSTEM (p)</strong></p><ul id="1594c992-a19a-8063-85be-f366b4081f9a" class="bulleted-list"><li style="list-style-type:disc">Includes each memory <strong>page</strong> with probability p%</li></ul><ul id="1594c992-a19a-80d4-9b08-c0e46d768770" class="bulleted-list"><li style="list-style-type:disc">(Relations are laid out on pages on disk)</li></ul><h3 id="1594c992-a19a-805c-9b87-fc07f32a9b3e" class="">Data Warehouses</h3><p id="1594c992-a19a-80e3-b76a-fbc80617dce7" class=""><strong>Data warehouses</strong> emerged as a technology that brings together an organization’s collection of relational databases under a single umbrella, allowing the data to be queried and viewed as a whole. First they were all on site data stores. Then cloud computing made it easier. But till the late 90s these were the primary tools companies used.</p><p id="1594c992-a19a-8070-be71-ef9a068de989" class="">The primary advantages of this technology included:</p><ul id="1594c992-a19a-802f-b831-e8bc6ddaea46" class="bulleted-list"><li style="list-style-type:disc">Integration of many data sources</li></ul><ul id="1594c992-a19a-8066-9b73-c8f5db9dcc90" class="bulleted-list"><li style="list-style-type:disc">Data optimized for read access</li></ul><ul id="1594c992-a19a-808c-b054-e8f9f8051ba5" class="bulleted-list"><li style="list-style-type:disc">Ability to run quick ad hoc analytical queries</li></ul><ul id="1594c992-a19a-8020-b34d-de781c40a4ba" class="bulleted-list"><li style="list-style-type:disc">Data audit, governance and lineage</li></ul><p id="1594c992-a19a-80f5-b0f4-c17a164a832d" class="">Data warehouses served their purpose well, but over time, the downsides to this technology became apparent.</p><ul id="1594c992-a19a-807b-9ebf-c21ce676d26e" class="bulleted-list"><li style="list-style-type:disc">Inability to store unstructured, raw data</li></ul><ul id="1594c992-a19a-80bc-87b3-d4237814ddd5" class="bulleted-list"><li style="list-style-type:disc">Expensive, proprietary hardware and software</li></ul><ul id="1594c992-a19a-80a4-a54f-c15c86bbb799" class="bulleted-list"><li style="list-style-type:disc">Difficulty scaling due to the tight coupling of storage and compute power</li></ul><p id="1594c992-a19a-8079-851c-d0972f1182eb" class=""><strong>Shortcomings of Data Warehouses</strong></p><ul id="1594c992-a19a-80af-a797-ddd5131fba96" class="bulleted-list"><li style="list-style-type:disc">Data ingestion is too slow<ul id="1594c992-a19a-80c2-b0fb-dc1238139afe" class="bulleted-list"><li style="list-style-type:circle">IoT, social media, sensors generate vast quantities of data quickly</li></ul><ul id="1594c992-a19a-8090-83a7-df9d3a4454ab" class="bulleted-list"><li style="list-style-type:circle">Many varieties of data</li></ul><ul id="1594c992-a19a-8017-8657-f52b3d347474" class="bulleted-list"><li style="list-style-type:circle">ETL procedures and schema-on-write will not work in these contexts</li></ul></li></ul><ul id="1594c992-a19a-80d3-93bc-c2421e0be8f2" class="bulleted-list"><li style="list-style-type:disc">Making data available for analysis too slow<ul id="1594c992-a19a-80f5-ab4b-d02c942366a2" class="bulleted-list"><li style="list-style-type:circle">Fitting rapidly accumulating data into a schema for analysis not a good idea.</li></ul><ul id="1594c992-a19a-80d1-88a1-c0522afae395" class="bulleted-list"><li style="list-style-type:circle">Takes too long</li></ul><ul id="1594c992-a19a-8081-8c24-cc1a3cc13390" class="bulleted-list"><li style="list-style-type:circle">Schema may need to be modified frequently as more types of data are ingested</li></ul><ul id="1594c992-a19a-80d1-bdf1-d538fe47fb0b" class="bulleted-list"><li style="list-style-type:circle">Many applications need to use data soon after ingestion</li></ul></li></ul><h3 id="1594c992-a19a-8019-ad78-e3e7f2547450" class="">Data Lakes</h3><ul id="1594c992-a19a-808b-b46b-da5b4c2ec99c" class="bulleted-list"><li style="list-style-type:disc">Motivation for Data Lakes<ul id="1594c992-a19a-802d-a671-d89398e109af" class="bulleted-list"><li style="list-style-type:circle">Need a data repository for analysis which<ul id="1594c992-a19a-803a-a4fb-f6d77b41923c" class="bulleted-list"><li style="list-style-type:square">Supports quick data ingestion<ul id="1594c992-a19a-8023-99b0-eb07d263e7d4" class="bulleted-list"><li style="list-style-type:disc">Raw data, slightly cleaned data</li></ul></li></ul><ul id="1594c992-a19a-80e6-8e6b-d8ef27cb6ab6" class="bulleted-list"><li style="list-style-type:square">Thus, no schema<ul id="1594c992-a19a-805b-912f-c834090fef2e" class="bulleted-list"><li style="list-style-type:disc">Schema-on-read instead of schema-on-write</li></ul><ul id="1594c992-a19a-8071-b187-d7a3e32a46c3" class="bulleted-list"><li style="list-style-type:disc">Different types of data will have to be stored in the repository separately (different zones)</li></ul></li></ul></li></ul><ul id="1594c992-a19a-8030-956f-d83e641e51f6" class="bulleted-list"><li style="list-style-type:circle">If no schema, then applications needing the data will have to create their own interfaces for accessing the data, structuring the data</li></ul></li></ul><div id="1594c992-a19a-80f5-a999-eef59ba8b5c4" class="column-list"><div id="1594c992-a19a-80f1-b655-d8f830e62e4e" style="width:50%" class="column"><figure id="1594c992-a19a-809d-a9a7-c4fe5e6c09f1" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.54.11.png"><img style="width:336px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.54.11.png"/></a></figure><p id="1594c992-a19a-80ed-a61e-f431ccaab02e" class="">
</p></div><div id="1594c992-a19a-8049-8761-e9e782025149" style="width:50%" class="column"><figure id="1594c992-a19a-8021-b182-cd83687333f4" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.55.00.png"><img style="width:1382px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.55.00.png"/></a></figure></div></div><figure id="1594c992-a19a-808e-b9e8-dbb09a137bc2" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.55.40.png"><img style="width:459.453125px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.55.40.png"/></a></figure><p id="1594c992-a19a-8014-81e2-cadefb248160" class=""><strong>When to use which</strong></p><figure id="1594c992-a19a-80d3-972a-c53a56a36503" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.56.30.png"><img style="width:447.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.56.30.png"/></a></figure><p id="1594c992-a19a-8081-9e96-d156fdaed3df" class=""><strong>Disadvantages of data lakes</strong></p><ul id="1594c992-a19a-8039-be02-e44fe887aac0" class="bulleted-list"><li style="list-style-type:disc">Do not support transactions</li></ul><ul id="1594c992-a19a-803a-b6c7-eed938a55e28" class="bulleted-list"><li style="list-style-type:disc">Do not enforce data quality</li></ul><ul id="1594c992-a19a-8014-be7e-cdf70aa40300" class="bulleted-list"><li style="list-style-type:disc">No mechanism for enforcing data integrity</li></ul><ul id="1594c992-a19a-801c-9dce-cccf39ca9eb2" class="bulleted-list"><li style="list-style-type:disc">No mechanism for ensuring consistency</li></ul><h3 id="1594c992-a19a-8004-8538-ef6080b1f4ee" class="">Data Lakehouse</h3><ul id="1594c992-a19a-8027-a2d8-c6fd2bbd03d7" class="bulleted-list"><li style="list-style-type:disc">Combines a data lake with a data warehouse</li></ul><ul id="1594c992-a19a-800a-810f-fd6260b22695" class="bulleted-list"><li style="list-style-type:disc">First ingest. Then gradually extract, transform, and load.<figure id="1594c992-a19a-808c-880b-fec86e27bf71" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.58.51.png"><img style="width:679.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.58.51.png"/></a></figure><figure id="1594c992-a19a-8059-8471-cc1c2b166e17" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.59.20.png"><img style="width:419.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25885.59.20.png"/></a><figcaption>From Databricks</figcaption></figure><figure id="1594c992-a19a-8077-aa36-d57df5feb57a" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.01.41.png"><img style="width:679.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.01.41.png"/></a></figure></li></ul><h3 id="1594c992-a19a-80c5-a274-c68f08cb8fb7" class="">OLAP (OnLine Analytical Processing)</h3><ul id="1594c992-a19a-8019-88c8-e0ee7a64ced5" class="bulleted-list"><li style="list-style-type:disc"><strong>OLAP </strong>is one huge technology under the BI umbrella.<ul id="1594c992-a19a-80db-98e7-d5bbe18f39cc" class="bulleted-list"><li style="list-style-type:circle">Read/summarize large volumes of multidimensional data to understand trends and patterns.</li></ul><ul id="1594c992-a19a-8033-b78c-c76ea398bcda" class="bulleted-list"><li style="list-style-type:circle">Read-only queries on, say, petabytes of multidimensional data.</li></ul><ul id="1594c992-a19a-80bb-89c4-d2981294a778" class="bulleted-list"><li style="list-style-type:circle">Example: total sales of each type of Honda car over time for each county.</li></ul></li></ul><div id="1594c992-a19a-80f0-8ecc-f0769d137da8" class="column-list"><div id="1594c992-a19a-8016-8191-e57fe896ab9a" style="width:43.75%" class="column"><ul id="1594c992-a19a-8068-aaf8-d2f7b4ea2c03" class="bulleted-list"><li style="list-style-type:disc">Post-hoc large-scale analysis (<strong>OLAP</strong>) happens separately from updates (<strong>OLTP</strong>).<ul id="1594c992-a19a-80b4-a39a-fd3b84d1e579" class="bulleted-list"><li style="list-style-type:circle"><strong>OLAP</strong> is performed in a data warehouse</li></ul><ul id="1594c992-a19a-8042-a657-f983098c6b00" class="bulleted-list"><li style="list-style-type:circle"><strong>OLTP</strong> happens in the per-region database</li></ul><ul id="1594c992-a19a-801b-b6f4-caeefa2af3ff" class="bulleted-list"><li style="list-style-type:circle">OLAP <strong>separate from critical path</strong> of OLTP.</li></ul></li></ul></div><div id="1594c992-a19a-80ae-8c85-ef26a9d953ed" style="width:56.25%" class="column"><figure id="1594c992-a19a-8050-9dc4-c5e1326092f9" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.12.49.png"><img style="width:330.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.12.49.png"/></a></figure><p id="1594c992-a19a-8072-ba65-ee772c7a19a3" class="">
</p></div></div><ul id="1594c992-a19a-8075-a906-fef3ff74ebc0" class="bulleted-list"><li style="list-style-type:disc">OLAP systems fundamentally provide comprehensive, summarized views of data in data warehouses.</li></ul><ul id="1594c992-a19a-801d-a9a1-c9fa64b67a5e" class="bulleted-list"><li style="list-style-type:disc">This summarization can and will happen across multiple dimensions of data. One such representation is a data cube, aka OLAP cube.<figure id="1594c992-a19a-806a-8f94-cc049eb3ad77" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.14.25.png"><img style="width:419.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.14.25.png"/></a></figure></li></ul><ul id="1594c992-a19a-809a-b797-dfce8da4958e" class="bulleted-list"><li style="list-style-type:disc"><strong>Roll-up</strong><ul id="1594c992-a19a-804e-8943-f6c35f215b81" class="bulleted-list"><li style="list-style-type:circle">The operation of adjusting granularity to summarize at different levels of a dimension hierarchy<figure id="1594c992-a19a-80b4-9be0-d78c2974c0c9" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.15.12.png"><img style="width:391.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.15.12.png"/></a></figure></li></ul></li></ul><ul id="1594c992-a19a-80a8-9413-cf2c741d84c7" class="bulleted-list"><li style="list-style-type:disc"><strong>Cross-tab</strong><ul id="1594c992-a19a-80a8-a021-cc0643d08c94" class="bulleted-list"><li style="list-style-type:circle">Aka pivot-table -  aggregations of groups of individual values from a more extensive table within one or more discrete categories<figure id="1594c992-a19a-8088-975b-d727bb5e7b71" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.15.53.png"><img style="width:391.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.15.53.png"/></a></figure></li></ul></li></ul><ul id="1594c992-a19a-80e6-88b8-c9fee5dcb41a" class="bulleted-list"><li style="list-style-type:disc"><strong>Drill-down</strong><ul id="1594c992-a19a-8001-98cc-e87da88c1bd7" class="bulleted-list"><li style="list-style-type:circle">The operation of adjusting granularity to summarize at different levels of a dimension hierarchy<figure id="1594c992-a19a-80b2-91b4-d6aab9b9dc3f" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.17.38.png"><img style="width:391.9765625px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.17.38.png"/></a></figure><p id="1594c992-a19a-806a-a6df-e60bd2d04c5e" class="">Drill-down time dimension to months</p></li></ul></li></ul><ul id="1594c992-a19a-80ae-bd58-cb1123292d3e" class="bulleted-list"><li style="list-style-type:disc"><strong>Slicing</strong><ul id="1594c992-a19a-8098-a59b-e0d93a70abb6" class="bulleted-list"><li style="list-style-type:circle">An operation in which one of the dimension is set to a particular value<figure id="1594c992-a19a-8033-8eb2-e414c9bee5e6" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.18.21.png"><img style="width:391.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.18.21.png"/></a></figure></li></ul></li></ul><ul id="1594c992-a19a-8057-8cb8-f723ceafa679" class="bulleted-list"><li style="list-style-type:disc"><strong>Dicing</strong><ul id="1594c992-a19a-8047-a394-c01146021d58" class="bulleted-list"><li style="list-style-type:circle">An operation consisting in a range selection on one or more dimensions<figure id="1594c992-a19a-80db-9452-fc1913ab7066" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.18.43.png"><img style="width:391.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.18.43.png"/></a></figure></li></ul></li></ul><ul id="1594c992-a19a-808c-90eb-ffb0138ef3b1" class="bulleted-list"><li style="list-style-type:disc">How do we actually store our data cube?<ul id="1594c992-a19a-80ff-86a2-c46180c75070" class="bulleted-list"><li style="list-style-type:circle">Normalized data in long format</li></ul><ul id="1594c992-a19a-805b-b898-fc8f622f8731" class="bulleted-list"><li style="list-style-type:circle">Star Schema</li></ul></li></ul><div id="1594c992-a19a-807a-bf35-f52154970788" class="column-list"><div id="1594c992-a19a-80dc-985a-d6b2ffe3fc23" style="width:62.5%" class="column"><ul id="1594c992-a19a-80e6-a21e-fce1312d193d" class="bulleted-list"><li style="list-style-type:disc">OLAP in a relational database:<ul id="1594c992-a19a-8005-a04c-c6d352b839d7" class="bulleted-list"><li style="list-style-type:circle"><strong>mental model</strong>: data cube, a multidimensional tensor</li></ul><ul id="1594c992-a19a-8034-876d-e87ddeee6357" class="bulleted-list"><li style="list-style-type:circle"><strong>physical model</strong>: star schema or snowflake schema of relations</li></ul><p id="15a4c992-a19a-8009-b332-e4064fc61d37" class="">
</p></li></ul></div><div id="15a4c992-a19a-8097-8263-c0771efbedc9" style="width:37.49999999999999%" class="column"><figure id="1594c992-a19a-8016-ac5a-c2078148ccfd" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.20.05.png"><img style="width:200.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25886.20.05.png"/></a></figure></div></div><h3 id="1594c992-a19a-8085-a1a0-cd61f9f0856b" class="">Group by CUBE</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1594c992-a19a-80f1-ad4e-db3c919fb36e" class="code"><code class="language-SQL">SELECT quarter, region, SUM(sales)
FROM sales_table
GROUP BY CUBE (quarter, region)
# resulting multiset will have: 
# 4*2+4*1+1*2+1 or 15 tuples 

SELECT QUARTER, REGION, SUM(SALES)
FROM SALESTABLE
GROUP BY ROLLUP (QUARTER, REGION)
# get sum only for quarters, and total sum

SELECT quarter, region, SUM(sales)
FROM sales_table
GROUP BY GROUPING SETS (
(quarter, region), 
(quarter), 
(region)
()
);
# Same with CUBE(quarter, region)

SELECT quarter, region, SUM(sales)
FROM sales_table
GROUP BY GROUPING SETS (
(quarter, region), 
(quarter)
);
# Same with ROLLUP(quarter, reqion) but no total sum</code></pre><h3 id="1594c992-a19a-80d4-962c-d66b4c6c6420" class="">Indexing</h3><ul id="15a4c992-a19a-802c-ad8e-f53a3f0197c1" class="bulleted-list"><li style="list-style-type:disc">An index is a data structure that supports efficient retrieval of “certain types of tuples” from a table eg. a course tuple from the <em>courses</em> table</li></ul><ul id="15a4c992-a19a-80aa-b365-fb0dc3759541" class="bulleted-list"><li style="list-style-type:disc">With no index:<ul id="15a4c992-a19a-8084-aab8-f71a7badc704" class="bulleted-list"><li style="list-style-type:circle">Search the entire table</li></ul></li></ul><ul id="15a4c992-a19a-80fc-a002-fa72a5e9c2f4" class="bulleted-list"><li style="list-style-type:disc">With index:<ul id="15a4c992-a19a-8084-a31f-d4c077c47859" class="bulleted-list"><li style="list-style-type:circle">Index provides the address of the block containing the tuple.</li></ul><ul id="15a4c992-a19a-80be-9ecc-d3683dc3bf47" class="bulleted-list"><li style="list-style-type:circle">Retrieve it using this address.</li></ul></li></ul><div id="15a4c992-a19a-80ed-b224-e43dd8205016" class="column-list"><div id="15a4c992-a19a-805b-b62a-c412eb76b161" style="width:50%" class="column"><figure id="15a4c992-a19a-80f4-b78c-c547944a00de" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.01.37.png"><img style="width:447.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.01.37.png"/></a></figure></div><div id="15a4c992-a19a-8043-ad3f-d09e7e3bc93e" style="width:50%" class="column"><figure id="15a4c992-a19a-80cf-a4a0-c850d1609b61" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.01.50.png"><img style="width:330.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.01.50.png"/></a></figure></div></div><h2 id="15a4c992-a19a-8021-9798-c6c7c5a98079" class="">Hadoop / MapReduce</h2><h3 id="15a4c992-a19a-80ed-9274-fce477e96293" class="">APIs (Application Program Interface)</h3><ul id="15a4c992-a19a-8078-ae98-d8d1cd354651" class="bulleted-list"><li style="list-style-type:disc">An application (say, Yelp or Twitter) gives a program an interface to retrieve information from its database</li></ul><ul id="15a4c992-a19a-80d7-9f82-d833c60c7a2a" class="bulleted-list"><li style="list-style-type:disc">The program must make a request to the application using some protocol like http or ftp</li></ul><ul id="15a4c992-a19a-8072-a38d-c8e50a5fca2b" class="bulleted-list"><li style="list-style-type:disc">The answers are returned in the form of a JSON object or an XML document</li></ul><ul id="15a4c992-a19a-80ea-a9b2-daf556ea7df5" class="bulleted-list"><li style="list-style-type:disc">Essentially, an API is a web service plus an authentication protocol like Oauth</li></ul><p id="15a4c992-a19a-805a-80be-cbc8e3e90c04" class="">JSON (JavaScript Object Notation)</p><ul id="15a4c992-a19a-80dc-b7a8-c7836538aa5b" class="bulleted-list"><li style="list-style-type:disc">It is a format for representing data for storing and exchanging data<ul id="15a4c992-a19a-8005-97c3-c095e67df8d6" class="bulleted-list"><li style="list-style-type:circle">It is a data model</li></ul></li></ul><ul id="15a4c992-a19a-80ee-81aa-cda14ded39f7" class="bulleted-list"><li style="list-style-type:disc">In MongoDB (which we will study later) the data (documents) are stored as JSON objects</li></ul><ul id="15a4c992-a19a-800b-8d03-e37555da7f5b" class="bulleted-list"><li style="list-style-type:disc">APIs return data in JSON format<ul id="15a4c992-a19a-806f-a956-fa5f7b84fc38" class="bulleted-list"><li style="list-style-type:circle">Also, optionally, as XML documents</li></ul></li></ul><ul id="15a4c992-a19a-802a-ab25-c596b718349f" class="bulleted-list"><li style="list-style-type:disc">JSON Syntax<ul id="15a4c992-a19a-809c-9a78-d9c370780c66" class="bulleted-list"><li style="list-style-type:circle">Data is in key/value pairs<ul id="15a4c992-a19a-80b2-82e5-e53186c3dce3" class="bulleted-list"><li style="list-style-type:square">e.g. “city”: “New York”</li></ul><ul id="15a4c992-a19a-804f-92ee-e047a1b1f43b" class="bulleted-list"><li style="list-style-type:square">Values including string, number, JSON object, array, boolean, null</li></ul></li></ul><ul id="15a4c992-a19a-8041-b126-d2fe35404c88" class="bulleted-list"><li style="list-style-type:circle">Keys and string values should be in a double quotes.</li></ul><ul id="15a4c992-a19a-8042-8181-e76f57c83458" class="bulleted-list"><li style="list-style-type:circle">All keys should be unique in the context of a JSON object</li></ul><ul id="15a4c992-a19a-8087-8879-ce923dc18424" class="bulleted-list"><li style="list-style-type:circle">Data is separated by commas</li></ul><ul id="15a4c992-a19a-80a0-bcbe-fc18a70e6796" class="bulleted-list"><li style="list-style-type:circle">Curly braces hold (JSON) objects<ul id="15a4c992-a19a-806f-97d8-c27c210e2946" class="bulleted-list"><li style="list-style-type:square">In this context an object is a set of key/value pairs separated by commas</li></ul></li></ul><ul id="15a4c992-a19a-80d0-9ca0-d51fb2dbc0a2" class="bulleted-list"><li style="list-style-type:circle">Square brackets hold arrays</li></ul><ul id="15a4c992-a19a-8028-94e6-ee2dd2d6838d" class="bulleted-list"><li style="list-style-type:circle">Booleans values are represented using the true or false literals in lower case</li></ul><ul id="15a4c992-a19a-80a4-9762-dceffaa91c10" class="bulleted-list"><li style="list-style-type:circle">Null values are represented by the null literal in lower case</li></ul><ul id="15a4c992-a19a-8051-b9e7-d3cce4b663d3" class="bulleted-list"><li style="list-style-type:circle">Dates are represented as strings</li></ul></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8027-9d46-c374e2040fc8" class="code"><code class="language-JSON">// Example
{
	“name” : “Swami”,
	“position” : “Vice President”,
	“current” : “Goldman Sachs”,
	“previous” : [“PwC”, “McKinsey”, “Chase”], 
	“address” : {“apt” : 66, “street” : “235 W. 	Broadway”, “city”: “New York” }
}</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-802f-ae53-e176d018e634" class="code"><code class="language-Python"># python code for API pull
import urllib, urllib.request
url = &#x27;xyz.com&#x27;
data = urllib.request.urlopen(url)
print(data.read().decode(&#x27;utf-8&#x27;))</code></pre><h3 id="15a4c992-a19a-80f0-bbbf-d395f53a96da" class="">MapReduce - Map and Reduce</h3><ul id="15a4c992-a19a-804a-aa2d-fc8e0869d9f9" class="bulleted-list"><li style="list-style-type:disc">Basic idea: Parallelizing processing on different chunks of data stored on different nodes.<ul id="15a4c992-a19a-809e-be2a-de4199348945" class="bulleted-list"><li style="list-style-type:circle">The processing function is cloned and ‘mapped’ to each data chunk (e.g., a document)</li></ul><ul id="15a4c992-a19a-80b7-bed7-cd0ce2a21a0f" class="bulleted-list"><li style="list-style-type:circle">For example, the processing function keeps a tally of the number of occurrences of every word in that document.</li></ul></li></ul><ul id="15a4c992-a19a-80aa-99d4-f2de0c6c5973" class="bulleted-list"><li style="list-style-type:disc">Reduce: Consolidating the results of each mapping function into a common unit<ul id="15a4c992-a19a-8064-b4d3-c72f67b8135b" class="bulleted-list"><li style="list-style-type:circle">The final output might be a tally of the occurrence of each word in all the documents</li></ul></li></ul><ul id="15a4c992-a19a-807a-beb6-e9f65f4ff7e5" class="bulleted-list"><li style="list-style-type:disc">Intermediate units: shuffling and sorting the results produced by each mapping function</li></ul><ul id="15a4c992-a19a-8026-85ad-d1e671b2bcbd" class="bulleted-list"><li style="list-style-type:disc">E.g. all words from all the documents that start with ‘a’ to ‘g’ go to one intermediate unit, all words that start with ‘h’ to ‘p’ go to another, and so on, and then they are sorted alphabetically<figure id="15a4c992-a19a-80af-aa1a-d547cbf0b85e" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.25.02.png"><img style="width:679.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.25.02.png"/></a></figure></li></ul><ul id="15a4c992-a19a-8097-a1da-d408787f39a0" class="bulleted-list"><li style="list-style-type:disc">Computation occurs where the data resides<ul id="15a4c992-a19a-80a7-8827-f41b1b2c2301" class="bulleted-list"><li style="list-style-type:circle">No need to move data to a global processing unit.</li></ul></li></ul><ul id="15a4c992-a19a-80db-a6a7-de46c559c080" class="bulleted-list"><li style="list-style-type:disc">Works only if the task is highly parallelizable</li></ul><ul id="15a4c992-a19a-806d-aa30-f0fe0e8b0488" class="bulleted-list"><li style="list-style-type:disc">Any function can be used for map<ul id="15a4c992-a19a-8045-828f-fba27df59dd6" class="bulleted-list"><li style="list-style-type:circle">The result has to be something that can easily be reduced</li></ul></li></ul><ul id="15a4c992-a19a-80c1-89a9-fbb0629844d2" class="bulleted-list"><li style="list-style-type:disc">Lot of overhead distributing map and reduce functions, synchronizing the different processes, assigning nodes for intermediate stages. (Hence, the need to introduce a resource manager component like YARN)</li></ul><ul id="15a4c992-a19a-80b1-b6dc-df46514a6522" class="bulleted-list"><li style="list-style-type:disc">Partition Data<ul id="15a4c992-a19a-8034-8a80-f051c1442951" class="bulleted-list"><li style="list-style-type:circle">Range-based partitioning<ul id="15a4c992-a19a-80d1-ab54-e14ac3ba0b5b" class="bulleted-list"><li style="list-style-type:square">Pick processor j for tuple i if its value for some field is within range i.</li></ul></li></ul><ul id="15a4c992-a19a-80cb-ad0e-d6573f4b882c" class="bulleted-list"><li style="list-style-type:circle">Hash-based partitioning<ul id="15a4c992-a19a-805f-a638-d69f70f4736e" class="bulleted-list"><li style="list-style-type:square">Pick a field. Pick processor for a tuple by hashing with this field.</li></ul></li></ul><ul id="15a4c992-a19a-80d1-9205-e24b4f73a613" class="bulleted-list"><li style="list-style-type:circle">Round-robin partitioning<ul id="15a4c992-a19a-8005-b223-f552b828b8c3" class="bulleted-list"><li style="list-style-type:square">Hash tuple i to processor i % n</li></ul></li></ul></li></ul><ul id="15a4c992-a19a-8034-9e8d-d7c653ace81a" class="bulleted-list"><li style="list-style-type:disc">MapReduce Drawbacks<ul id="15a4c992-a19a-80b1-99e0-d82095d95496" class="bulleted-list"><li style="list-style-type:circle">User must handwrite the Map and Reduce steps;</li></ul><ul id="15a4c992-a19a-8039-ae76-d85247cf763e" class="bulleted-list"><li style="list-style-type:circle">No indexing, query optimization;</li></ul><ul id="15a4c992-a19a-80c9-bf76-ec84d13ca2cf" class="bulleted-list"><li style="list-style-type:circle">No pipelining; intermediate data copies must be materialized;</li></ul><ul id="15a4c992-a19a-8003-b954-dab570c29741" class="bulleted-list"><li style="list-style-type:circle">Cannot “declare” query processing steps; and</li></ul><ul id="15a4c992-a19a-8086-a611-c00716e84774" class="bulleted-list"><li style="list-style-type:circle">Overall, must rely on system’s shuffle step. Not very flexible!</li></ul></li></ul><h3 id="15a4c992-a19a-8087-81f8-ff28bc3d19ea" class="">Hadoop</h3><figure id="15a4c992-a19a-807a-a67d-f177d804c417" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.59.24.png"><img style="width:447.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.59.24.png"/></a></figure><ul id="15a4c992-a19a-8024-b6fe-fd101ae0946c" class="bulleted-list"><li style="list-style-type:disc">Hadoop is a massively distributed data management and processing system on clusters of commodity hardware<ul id="15a4c992-a19a-8017-91f0-d06d7d2ecfb7" class="bulleted-list"><li style="list-style-type:circle">Unlike NoSQL database systems, Hadoop can do all sorts of processing (not just database operations)</li></ul></li></ul><ul id="15a4c992-a19a-80ff-86c5-f1b982b0067c" class="bulleted-list"><li style="list-style-type:disc">Principle: Distributing Data + Distributing computation (moving computation to data)</li></ul><ul id="15a4c992-a19a-80c5-8232-e961ee8592ae" class="bulleted-list"><li style="list-style-type:disc">Hadoop = HDFS (store) + MapReduce (Process)</li></ul><div id="15a4c992-a19a-80ec-8385-ec5996041d86" class="column-list"><div id="15a4c992-a19a-8008-8cf2-ebf4afa9631d" style="width:50%" class="column"><ul id="15a4c992-a19a-80d5-ba01-ebbb99d2f6de" class="bulleted-list"><li style="list-style-type:disc">Structure of HDFS<ul id="15a4c992-a19a-80c0-8c38-eda4fb070d18" class="bulleted-list"><li style="list-style-type:circle">Data is divided into blocks of the same size.</li></ul><ul id="15a4c992-a19a-80ed-9afc-f76834182a13" class="bulleted-list"><li style="list-style-type:circle">Each block is replicated (default 3)</li></ul><ul id="15a4c992-a19a-80a3-88de-f3caf1fefa05" class="bulleted-list"><li style="list-style-type:circle">Each replica is stored in a different Datanode (some of which may be in different Racks)</li></ul><ul id="15a4c992-a19a-8013-986b-e4f8f3d5b6cf" class="bulleted-list"><li style="list-style-type:circle">Namenode contains all the information about which blocks are in which Datanode</li></ul></li></ul></div><div id="15a4c992-a19a-8041-b435-e1184437c559" style="width:50%" class="column"><figure id="15a4c992-a19a-808d-99ce-c3b902476d04" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.52.42.png"><img style="width:330.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25887.52.42.png"/></a></figure><p id="15a4c992-a19a-80f7-9ada-e64d7d71ea14" class="">
</p></div></div><p id="15a4c992-a19a-803d-950a-f6d309202871" class=""><strong>Terminology</strong></p><ul id="15a4c992-a19a-8029-b395-fb0fc1f61859" class="bulleted-list"><li style="list-style-type:disc">A Data Center is a collection of Racks.</li></ul><ul id="15a4c992-a19a-8071-a840-c1c055486506" class="bulleted-list"><li style="list-style-type:disc">A Rack is a collection of Servers.</li></ul><ul id="15a4c992-a19a-8000-88d9-d996b2112ce2" class="bulleted-list"><li style="list-style-type:disc">A Server contains 256 virtual nodes (or vnodes) by default.</li></ul><ul id="15a4c992-a19a-806d-81c0-e0945d5bb8a3" class="bulleted-list"><li style="list-style-type:disc">A vnode is the data storage layer within a server.</li></ul><ul id="15a4c992-a19a-80a6-8a87-d1846e18b315" class="bulleted-list"><li style="list-style-type:disc">A Cluster is a network of vnodes or servers</li></ul><h3 id="15a4c992-a19a-80a9-b5b9-db2ceaf3dffd" class="">Flume</h3><ul id="15a4c992-a19a-8095-a8a2-fedd02f75508" class="bulleted-list"><li style="list-style-type:disc">Apache Flume can be used to store data in to any of the centralized stores (HBase, HDFS)</li></ul><ul id="15a4c992-a19a-805f-bc77-f7d56c1a20d8" class="bulleted-list"><li style="list-style-type:disc">Flume permits the data to be buffered when incoming rate exceeds write rate of the centralized store.</li></ul><ul id="15a4c992-a19a-80d9-bd23-f81235a64392" class="bulleted-list"><li style="list-style-type:disc">Flume is reliable, fault tolerant, horizontally scalable, manageable, and customizable.</li></ul><ul id="15a4c992-a19a-80d0-94d3-d74f29f8d81a" class="bulleted-list"><li style="list-style-type:disc">Based on the concept of a channel connecting sender to receiver</li></ul><ul id="15a4c992-a19a-804c-9faf-c5101c0d7340" class="bulleted-list"><li style="list-style-type:disc">Flume can be used to get data (log files, event files) from multiple servers into centralized stores.</li></ul><h3 id="15a4c992-a19a-809e-84ca-ce9e255a5573" class="">Apache Pig</h3><ul id="15a4c992-a19a-80b1-b6a3-f76130df968a" class="bulleted-list"><li style="list-style-type:disc">Pig, like Hive, is an abstraction over MapReduce<ul id="15a4c992-a19a-808c-9169-cc9f2566931d" class="bulleted-list"><li style="list-style-type:circle">Enables analysts to process data in HDFS files without having to write Java programs for setting up MapReduce jobs.</li></ul></li></ul><ul id="15a4c992-a19a-8078-bc09-d5113f5727f6" class="bulleted-list"><li style="list-style-type:disc">With Pig larger data analysis jobs can be performed than with Hive</li></ul><ul id="15a4c992-a19a-8019-aa25-cbaae8db9b33" class="bulleted-list"><li style="list-style-type:disc">Pig programs are written in a high-level scripting language called Pig Latin</li></ul><ul id="15a4c992-a19a-8035-a5a5-f8fa67c51218" class="bulleted-list"><li style="list-style-type:disc">Pig Latin is SQL-like. However, it is a data flow language.<ul id="15a4c992-a19a-803e-860b-dbb42479dafb" class="bulleted-list"><li style="list-style-type:circle">A data flow programming language models a program as a directed graph of the data flowing between operations.</li></ul></li></ul><ul id="15a4c992-a19a-8047-91c8-e06380648aeb" class="bulleted-list"><li style="list-style-type:disc">Pig Latin programs are converted into MapReduce jobs by the Pig Engine.</li></ul><ul id="15a4c992-a19a-80fc-9aab-c1ac6fb017bc" class="bulleted-list"><li style="list-style-type:disc">Pig Latin is more flexible because it is a procedural language (though based on the data flow paradigm). Can handle structures, semi-structured, and unstructured data</li></ul><h3 id="15a4c992-a19a-80d3-a2ad-cb2e75e2db14" class="">Hive</h3><ul id="15a4c992-a19a-80e7-afab-d37ce3432bf6" class="bulleted-list"><li style="list-style-type:disc">HiveQL is a declarative, query processing language, mostly usable for structured data</li></ul><ul id="15a4c992-a19a-80aa-94ea-e54c25e903af" class="bulleted-list"><li style="list-style-type:disc">Hive is a data processing tool in Hadoop</li></ul><ul id="15a4c992-a19a-8077-b3ba-cb7113deb8af" class="bulleted-list"><li style="list-style-type:disc">Setting up MapReduce for a small data processing task is very tedious. Need to create mappers, reducers, driver code, etc. Not worth doing it just to access a few lines of an HFDS file.</li></ul><ul id="15a4c992-a19a-8026-821b-e65f7aff575f" class="bulleted-list"><li style="list-style-type:disc">Hive provides a SQL-like interface (HiveQL) for doing that task<ul id="15a4c992-a19a-807b-ad20-cef67e89a9fc" class="bulleted-list"><li style="list-style-type:circle">A HiveQL instruction is automatically converted as a MapReduce job by its compiler.</li></ul></li></ul><ul id="15a4c992-a19a-807e-b3c8-e32387728190" class="bulleted-list"><li style="list-style-type:disc">Hive doesn’t store data but store meta-data that have pointers(links) to the data</li></ul><ul id="15a4c992-a19a-8000-9051-feb3e92045c8" class="bulleted-list"><li style="list-style-type:disc">Hive is designed for OLAP but not OLTP</li></ul><ul id="15a4c992-a19a-80b8-8d1c-eb1204a828a1" class="bulleted-list"><li style="list-style-type:disc">A Hive query can be submitted to the Hive server using a Web UI, or programmatically using JDBC/ODBC, or Hive CLI (command line interface)<ul id="15a4c992-a19a-80b6-b4b4-db8e8ab11f2a" class="bulleted-list"><li style="list-style-type:circle">The Hive server converts it into a MapReduce job.</li></ul><ul id="15a4c992-a19a-80ed-a4ce-e39400418222" class="bulleted-list"><li style="list-style-type:circle">The MapReduce job is executed on a Hadoop cluster.</li></ul></li></ul><h3 id="15a4c992-a19a-800e-a251-cf5e5f2ee5c5" class="">YARN (Yet Another Resource Negotiator) </h3><ul id="15a4c992-a19a-807c-986e-df8090671dcc" class="bulleted-list"><li style="list-style-type:disc">Resource Manager<ul id="15a4c992-a19a-8035-aab0-f301a033ab65" class="bulleted-list"><li style="list-style-type:circle"><strong>ResourceManager </strong>is the master process manager responsible for resource management among the applications in the system.</li></ul><ul id="15a4c992-a19a-80f9-a9c3-e2c4bb2d827d" class="bulleted-list"><li style="list-style-type:circle">ResourceManager has a scheduler, which allocates the resources to the applications.</li></ul><ul id="15a4c992-a19a-80d0-8662-ff1eb481c0a9" class="bulleted-list"><li style="list-style-type:circle">It also keeps track of resource availability which info it gets from containers that provide information such as memory, disk, CPU, network, and so on.</li></ul></li></ul><ul id="15a4c992-a19a-8007-9107-c32f2ac07e63" class="bulleted-list"><li style="list-style-type:disc">Node Manager<ul id="15a4c992-a19a-8050-8c56-e7a7f048f626" class="bulleted-list"><li style="list-style-type:circle"><strong>NodeManager </strong>is present in all the nodes.</li></ul><ul id="15a4c992-a19a-80c3-bc06-f6d0ba343702" class="bulleted-list"><li style="list-style-type:circle">It is responsible for containers, authentication, monitoring resource usage, and reports the information to ResourceManager.</li></ul><ul id="15a4c992-a19a-808f-8f41-ff8b0e936258" class="bulleted-list"><li style="list-style-type:circle">It sends heartbeats to ResourceManager (to let the Resource Manager know that it is alive).</li></ul></li></ul><ul id="15a4c992-a19a-80b0-b7ae-e7fabc10f6a5" class="bulleted-list"><li style="list-style-type:disc">Application Master<ul id="15a4c992-a19a-806e-8bc3-d93310327090" class="bulleted-list"><li style="list-style-type:circle"><strong>ApplicationMaster </strong>is present for each application, responsible for managing each and every instance of applications that runs within YARN.</li></ul><ul id="15a4c992-a19a-807a-92f8-e8f114bd9887" class="bulleted-list"><li style="list-style-type:circle">It coordinates with ResourceManager for the negotiation of the resources.</li></ul><ul id="15a4c992-a19a-8089-91a1-c168a05ec86d" class="bulleted-list"><li style="list-style-type:circle">And coordinates with the NodeManager to monitor the execution and resource consumption of containers, such as resource allocations of CPU, memory, and so on.</li></ul><figure id="15a4c992-a19a-80b2-a151-f864220ac306" class="image" style="text-align:center"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25888.15.26.png"><img style="width:432px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%25888.15.26.png"/></a></figure></li></ul><h2 id="15a4c992-a19a-8043-b4d6-fe7eb8396633" class="">NoSQL (Not Only SQL) Databases</h2><h3 id="15a4c992-a19a-80e0-b5d9-e2513f15985c" class="">Semi-Structured Data</h3><ul id="15a4c992-a19a-8023-a31f-dcc6ff47175a" class="bulleted-list"><li style="list-style-type:disc">Flexible schema</li></ul><ul id="15a4c992-a19a-806d-92e2-f08de5cf323c" class="bulleted-list"><li style="list-style-type:disc">Attributes can be multivalued</li></ul><ul id="15a4c992-a19a-806c-abe8-fbe7fefef4a7" class="bulleted-list"><li style="list-style-type:disc">Attributes can be nested</li></ul><ul id="15a4c992-a19a-808f-81f3-caca367d07b6" class="bulleted-list"><li style="list-style-type:disc">Popular formats: XML, JSON, Key-Value Stores</li></ul><ul id="15a4c992-a19a-8035-aed6-c8c5a726fcc6" class="bulleted-list"><li style="list-style-type:disc">Several reasons for why nested relations became less desirable:<ul id="15a4c992-a19a-8052-b1bb-c7ab2c61d5c1" class="bulleted-list"><li style="list-style-type:circle"><strong>Complex and cumbersome</strong> to traverse nested relations to find specific bits of data<ul id="15a4c992-a19a-8022-8faf-eb1b7f3cf321" class="bulleted-list"><li style="list-style-type:square">(e.g., traversing a film hierarchy just to find information about actors)</li></ul></li></ul><ul id="15a4c992-a19a-8015-a002-d6b43894fcaf" class="bulleted-list"><li style="list-style-type:circle">Nested model mixes <strong>physical and logical data organization</strong>.<ul id="15a4c992-a19a-8094-9a68-c7c8fc140f47" class="bulleted-list"><li style="list-style-type:square">In the relational model, we can <strong>rearrange the data on disk</strong> and the relation would still be equivalent (e.g., CLUSTER).</li></ul><ul id="15a4c992-a19a-80f3-b128-f2c339435fa5" class="bulleted-list"><li style="list-style-type:square">For nested models, however, we can’t; therefore we can’t optimize it for queries.</li></ul></li></ul><ul id="15a4c992-a19a-8096-87ab-fc5652c281cd" class="bulleted-list"><li style="list-style-type:circle"><strong>Lots of redundancy</strong>, leading to update and deletion anomalies.</li></ul></li></ul><ul id="15a4c992-a19a-8046-8566-dde696812add" class="bulleted-list"><li style="list-style-type:disc">Big Data’s 3Vs: volume, variety, and <strong><span style="border-bottom:0.05em solid">velocity</span></strong><ul id="15a4c992-a19a-80a8-aa64-c3c764a60714" class="bulleted-list"><li style="list-style-type:circle">Velocity → DB infrastructure (servers, dis capacity) has to be rapidly scaled</li></ul></li></ul><h3 id="15a4c992-a19a-8031-9e13-ecfb21f28c25" class="">Document Stores</h3><ul id="15a4c992-a19a-8042-99b4-cf8cf63d4ab9" class="bulleted-list"><li style="list-style-type:disc">Document stores are data systems that primarily operate on JSON<ul id="15a4c992-a19a-80ca-95c4-df80e0175a5f" class="bulleted-list"><li style="list-style-type:circle">A document: Each JSON element. Basic unit of retrieval in document stores.</li></ul></li></ul><ul id="15a4c992-a19a-80b2-b31c-c77ca122ae50" class="bulleted-list"><li style="list-style-type:disc">Document stores support a set of operations:<ul id="15a4c992-a19a-80d2-974c-ffa402597866" class="bulleted-list"><li style="list-style-type:circle"><strong>Searching</strong> across documents (essentially, selections / filters)</li></ul><ul id="15a4c992-a19a-807a-9a7f-fe57f0c72cf9" class="bulleted-list"><li style="list-style-type:circle">Primitive aggregation</li></ul><ul id="15a4c992-a19a-8008-b05b-c43ff6c71d30" class="bulleted-list"><li style="list-style-type:circle">However, typically <strong><span style="border-bottom:0.05em solid">no joins</span></strong> (beyond what is already done via denormalization)<ul id="15a4c992-a19a-8081-a513-d4805aadfdb6" class="bulleted-list"><li style="list-style-type:square">Joining two tables, each table consisting of ten shards, each shard on different servers → require physical movement on many server and thus slow</li></ul></li></ul><ul id="15a4c992-a19a-80fa-9232-f71ea97dba58" class="bulleted-list"><li style="list-style-type:circle">Possibly primitive indexing, e.g., to retrieve documents based on certain criteria.</li></ul></li></ul><ul id="15a4c992-a19a-806e-9d7b-fd7f5a89553c" class="bulleted-list"><li style="list-style-type:disc">MondoDB is an example of a document store</li></ul><h3 id="15a4c992-a19a-80aa-9cd8-c90a421a7128" class="">Scaling up</h3><ul id="15a4c992-a19a-804d-95ba-c6b45b7830c3" class="bulleted-list"><li style="list-style-type:disc">Vertical scaling up: get bigger and bigger specialized and expensive DB servers</li></ul><ul id="15a4c992-a19a-80e2-a423-ff928ed31774" class="bulleted-list"><li style="list-style-type:disc"><span style="border-bottom:0.05em solid">Horizontal scaling</span> up: connect together as many cheap small servers as needed → network of cheap(commodity) servers. Because of velocity, NoSQL DB architectures prefer horizontal scaling<ul id="15a4c992-a19a-80c6-88ef-d085a3235f92" class="bulleted-list"><li style="list-style-type:circle">Each commodity server is limited in how much data it can store → a table/collection of data has to be distributed over a number of servers → sharding<ul id="15a4c992-a19a-803a-9398-f8d8aec9922f" class="bulleted-list"><li style="list-style-type:square">Velocity → Horizontal Scaling → <span style="border-bottom:0.05em solid">Sharding</span></li></ul></li></ul><ul id="15a4c992-a19a-80b1-95e3-e0c5642ecd63" class="bulleted-list"><li style="list-style-type:circle">Implications of Horizontal Scaling<ul id="15a4c992-a19a-8040-bb03-e493dbf4dcbf" class="bulleted-list"><li style="list-style-type:square">Servers and network links can fail<p id="15a4c992-a19a-8087-b6df-f7128371c7bd" class="">occasionally</p></li></ul><ul id="15a4c992-a19a-8054-8845-f250acb33cd7" class="bulleted-list"><li style="list-style-type:square">So not all of the network is accessible at<p id="15a4c992-a19a-8086-bc6b-ee92ddfbe7cb" class="">those times ⇒ Some parts of the DB is not accessible ⇒ Bad experience for users.</p></li></ul><ul id="15a4c992-a19a-80b3-85b3-ecfbef5853d3" class="bulleted-list"><li style="list-style-type:square">This is called network partitioning</li></ul></li></ul></li></ul><ul id="15a4c992-a19a-80d7-8f73-de1d27fe92bc" class="bulleted-list"><li style="list-style-type:disc">Solving breakdown from network partitioning by <strong>Resiliency through Redundancy</strong><ul id="15a4c992-a19a-8090-a6d7-e1b742cdadae" class="bulleted-list"><li style="list-style-type:circle">By <span style="border-bottom:0.05em solid">replicating</span> each shard and placing each replica in different servers<ul id="15a4c992-a19a-80fc-a174-dd45a9fb5749" class="bulleted-list"><li style="list-style-type:square">How many replicas? Usually 3, but it is configurable.</li></ul></li></ul><ul id="15a4c992-a19a-80cc-9ff1-e0558821822a" class="bulleted-list"><li style="list-style-type:circle">So, unless all the servers where replicas of a shard are stored fail at the same time, every part of a NoSQL DB can be accessible.</li></ul></li></ul><h3 id="15a4c992-a19a-807c-9b13-ddfb46664ad7" class="">Features of NoSQL DBs</h3><ul id="15a4c992-a19a-8018-b843-edc936e61108" class="bulleted-list"><li style="list-style-type:disc">Horizontal scaling</li></ul><ul id="15a4c992-a19a-8069-95ae-c41da60a9353" class="bulleted-list"><li style="list-style-type:disc">Sharding</li></ul><ul id="15a4c992-a19a-80ad-ad1e-cd96004e11cc" class="bulleted-list"><li style="list-style-type:disc">Replication</li></ul><ul id="15a4c992-a19a-80cc-8a49-c57eeef7767f" class="bulleted-list"><li style="list-style-type:disc">No joins</li></ul><ul id="15a4c992-a19a-8002-b5b9-d697e41b22f9" class="bulleted-list"><li style="list-style-type:disc">Schema optional (no fixed schema)</li></ul><ul id="15a4c992-a19a-8079-b391-c76424cddbbd" class="bulleted-list"><li style="list-style-type:disc">No relational tables - E.g., a NoSQL database may have a ‘table’ for Student and another for Course but will not have a ‘table’ for Takes to reflect the relation about which students are enrolled in which courses</li></ul><ul id="15a4c992-a19a-8073-9d19-f77bbce7a087" class="bulleted-list"><li style="list-style-type:disc">Denormalized</li></ul><ul id="15a4c992-a19a-8014-81d8-e47363fa5ecc" class="bulleted-list"><li style="list-style-type:disc">Can handle variety of data</li></ul><h3 id="15a4c992-a19a-803e-85aa-cd60f84c3877" class="">NoSQL Database Types</h3><ul id="15a4c992-a19a-80e1-883b-ccf8dc2ea3df" class="bulleted-list"><li style="list-style-type:disc"><em><strong>Column oriented</strong></em>: Cassandra, Hbase</li></ul><ul id="15a4c992-a19a-803d-ad46-dbd2d3dd51be" class="bulleted-list"><li style="list-style-type:disc"><em><strong>Document oriented:</strong></em> MongoDB, Couch DB</li></ul><ul id="15a4c992-a19a-80a8-8bf3-c40039fe615c" class="bulleted-list"><li style="list-style-type:disc"><em><strong>Graphical</strong></em>: Neo4j, HypergraphDB</li></ul><ul id="15a4c992-a19a-80de-8686-d183725eff9a" class="bulleted-list"><li style="list-style-type:disc"><em><strong>Key-value:</strong></em> redis, riak</li></ul><h3 id="15a4c992-a19a-80cd-89af-f1d5851f6132" class="">CAP Theorem</h3><ul id="15a4c992-a19a-8034-9b37-eac9d51fdd27" class="bulleted-list"><li style="list-style-type:disc">Consistency<ul id="15a4c992-a19a-806a-a903-ea9b05131139" class="bulleted-list"><li style="list-style-type:circle">Each replica of a shard contains exactly the same information at all times</li></ul><ul id="15a4c992-a19a-8042-ae07-feecf87f9d4f" class="bulleted-list"><li style="list-style-type:circle">Eg. two people with a joint bank account should get the same balance if they checked it at different ATMs at the same time.</li></ul></li></ul><ul id="15a4c992-a19a-8088-aa84-c815139cd046" class="bulleted-list"><li style="list-style-type:disc">Availability<ul id="15a4c992-a19a-8022-8764-c7a020b37c7b" class="bulleted-list"><li style="list-style-type:circle">every piece of information in the database must be accessible for reading or updating</li></ul><ul id="15a4c992-a19a-80ba-91da-d35121eb4c9d" class="bulleted-list"><li style="list-style-type:circle">And also available for writing (new insertions)</li></ul></li></ul><ul id="15a4c992-a19a-80c6-a2fa-d80afd55473a" class="bulleted-list"><li style="list-style-type:disc">Partition Tolerance</li></ul><ul id="15a4c992-a19a-800f-a3ba-f3456435003c" class="bulleted-list"><li style="list-style-type:disc">If you want to make your database function in the face of network partitioning (partition tolerant), you must give up either Consistency, or Availability</li></ul><figure id="15a4c992-a19a-80ef-9911-f5f9d96ecd05" class="image"><a href="https://www.nitendratech.com/wp-content/uploads/2020/01/cap_theorem-1024x873.png"><img style="width:432px" src="https://www.nitendratech.com/wp-content/uploads/2020/01/cap_theorem-1024x873.png"/></a></figure><ul id="15a4c992-a19a-8002-aee5-e79034b13231" class="bulleted-list"><li style="list-style-type:disc"><strong>AP Systems</strong><ul id="15a4c992-a19a-8057-9a15-f1b59b9c3ecf" class="bulleted-list"><li style="list-style-type:circle">always available</li></ul><ul id="15a4c992-a19a-8032-be02-fa548c31802c" class="bulleted-list"><li style="list-style-type:circle">risk of inconsistency</li></ul><ul id="15a4c992-a19a-80a6-9057-e01c96fec7a3" class="bulleted-list"><li style="list-style-type:circle"><strong>Eventual Consistency: Guarantee that transactions will eventually be consistent across the database.</strong><ul id="15a4c992-a19a-801f-8acb-f8bc115ad94d" class="bulleted-list"><li style="list-style-type:square">Used to guarantee that the system would be highly available.</li></ul></li></ul><ul id="15a4c992-a19a-8007-86c3-c2858d988f2a" class="bulleted-list"><li style="list-style-type:circle"><strong>Consistency</strong>: Guarantee that any transactions started in the future necessarily see the effects of other transactions committed in the past.<ul id="15a4c992-a19a-8085-8a28-cb950b321683" class="bulleted-list"><li style="list-style-type:square">In other words, the database always reflects the most current changes.</li></ul></li></ul></li></ul><div id="15a4c992-a19a-806b-86ee-ea1616c0fc32" class="column-list"><div id="15a4c992-a19a-80e2-961a-d8fceb995772" style="width:56.25%" class="column"><ul id="15a4c992-a19a-8067-8434-d49ed33f6ddb" class="bulleted-list"><li style="list-style-type:disc"><strong>CP Systems</strong><ul id="15a4c992-a19a-8070-872c-edecd1727b6d" class="bulleted-list"><li style="list-style-type:circle">Availability is sacrificed for consistency and partition-tolerance</li></ul><ul id="15a4c992-a19a-80bc-8a39-c32c8a320441" class="bulleted-list"><li style="list-style-type:circle">In the event of a node/replica failure, the system may be temporarily unavailable</li></ul><ul id="15a4c992-a19a-80f1-9935-f03ca3ff6861" class="bulleted-list"><li style="list-style-type:circle">System is made consistent through a primary and a secondary structure.<ul id="15a4c992-a19a-8001-9956-d0e7789d030a" class="bulleted-list"><li style="list-style-type:square">All writes and reads go to primary node (so don’t care if secondary nodes/replicas are not consistent)</li></ul><ul id="15a4c992-a19a-806b-a7b8-d256ee5d2d35" class="bulleted-list"><li style="list-style-type:square">But if primary node goes down, one of the other nodes is made primary</li></ul><ul id="15a4c992-a19a-8014-928e-cfa6d66faae4" class="bulleted-list"><li style="list-style-type:square">In this process those replicas are unavailable</li></ul><ul id="15a4c992-a19a-802b-bfd1-e9912e80207d" class="bulleted-list"><li style="list-style-type:square">This is called ‘basic availability’.</li></ul></li></ul></li></ul></div><div id="15a4c992-a19a-8092-8da4-e2ac975b3ad5" style="width:43.74999999999999%" class="column"><figure id="15a4c992-a19a-8073-85de-c26eb04ed381" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%258810.24.36.png"><img style="width:184.765625px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-11_%25E4%25B8%258B%25E5%258D%258810.24.36.png"/></a></figure><p id="15a4c992-a19a-8030-b2be-d1b6a423c69d" class="">
</p></div></div><ul id="15a4c992-a19a-8011-b31e-d06d802e50fd" class="bulleted-list"><li style="list-style-type:disc">CA Systems<ul id="15a4c992-a19a-80c1-9071-c73354a488ee" class="bulleted-list"><li style="list-style-type:circle">In a distributed system, partitions can’t be avoided.</li></ul><ul id="15a4c992-a19a-80d7-bbd4-e8a99c936ae5" class="bulleted-list"><li style="list-style-type:circle">So, while we can discuss a CA distributed database in theory, for all practical purposes a CA distributed database can’t exist.<ul id="15a4c992-a19a-806a-aaa8-dc29108f4b51" class="bulleted-list"><li style="list-style-type:square">When network failure occurs, there are two options: Either send old data which was replicated moments ago before network failure or do not allow user to access the already moments old data. If we choose first option, our system will become Available and if we choose second option our system will become Consistent.</li></ul></li></ul></li></ul><h2 id="15a4c992-a19a-800e-8be1-dccf87a1d93d" class="">MongoDB</h2><h3 id="15a4c992-a19a-8025-8d8f-fe96ef68d97c" class="">MongoDB features</h3><ul id="15a4c992-a19a-8036-b163-c78d4e1e856a" class="bulleted-list"><li style="list-style-type:disc">Now supports left outer joins but still limited query options</li></ul><ul id="15a4c992-a19a-800e-a129-d14f6147b304" class="bulleted-list"><li style="list-style-type:disc">Schema less/optional</li></ul><ul id="15a4c992-a19a-8044-9002-e6ed91d63d2a" class="bulleted-list"><li style="list-style-type:disc">Sharding</li></ul><ul id="15a4c992-a19a-8021-b356-ce629281b599" class="bulleted-list"><li style="list-style-type:disc">Replication</li></ul><ul id="15a4c992-a19a-803f-8b19-f0ec86a02d39" class="bulleted-list"><li style="list-style-type:disc">Horizontal scaling</li></ul><h3 id="15a4c992-a19a-803f-abfa-dcb18f7ec6cf" class="">Documents as Data Model</h3><ul id="15a4c992-a19a-80b0-921c-fd063a3198ec" class="bulleted-list"><li style="list-style-type:disc">The fundamental data storage unit is a document, containing zero or more fields</li></ul><div id="15a4c992-a19a-80c4-81e9-eb0617ba8de3" class="column-list"><div id="15a4c992-a19a-805d-bf1f-f5894e6b69f9" style="width:50%" class="column"><ul id="15a4c992-a19a-8070-95ee-d06d34567a86" class="bulleted-list"><li style="list-style-type:disc">A <em><strong>document</strong></em> in MongoDB corresponds to a row in relational databases<ul id="15a4c992-a19a-8006-9eb9-cba256c26de8" class="bulleted-list"><li style="list-style-type:circle">The fields corresponds to columns in relational databases</li></ul></li></ul></div><div id="15a4c992-a19a-80cd-8dc0-db93b3b7f6c2" style="width:50%" class="column"><table id="15a4c992-a19a-80fb-8f0e-fd5a26c906a1" class="simple-table"><tbody><tr id="15a4c992-a19a-806d-99db-fa407a9e2879"><td id="l_WT" class=""><strong>RDBMS</strong></td><td id="qj\@" class=""><strong>MongoDB</strong></td></tr><tr id="15a4c992-a19a-805b-b5b9-e478207647cf"><td id="l_WT" class="">Database</td><td id="qj\@" class="">Database</td></tr><tr id="15a4c992-a19a-80c8-be91-fe241a7942d4"><td id="l_WT" class="">Relation (Table)</td><td id="qj\@" class="">Collection</td></tr><tr id="15a4c992-a19a-80ea-8c0c-c4360e4a13b4"><td id="l_WT" class="">Row (Record)</td><td id="qj\@" class="">Document</td></tr><tr id="15a4c992-a19a-8016-825d-fb8e99670ac1"><td id="l_WT" class="">Column (Attribute)</td><td id="qj\@" class="">Field</td></tr></tbody></table></div></div><ul id="15a4c992-a19a-8008-962d-d6e1b8f08538" class="bulleted-list"><li style="list-style-type:disc">A <em><strong>collection</strong></em> is a set of documents<ul id="15a4c992-a19a-8017-a187-e75a20b229e4" class="bulleted-list"><li style="list-style-type:circle">Corresponds to a table in relational databases</li></ul></li></ul><ul id="15a4c992-a19a-8004-844d-f6ffbc5c4008" class="bulleted-list"><li style="list-style-type:disc">The documents in a collection do not all have to have the same set of fields. Each object of which consists of <em><strong>field-value pairs</strong></em><ul id="15a4c992-a19a-804f-addb-c2e58b7c482d" class="bulleted-list"><li style="list-style-type:circle">It is in this sense that MongoDB databases are schema less</li></ul></li></ul><ul id="15a4c992-a19a-80a1-b5c6-eab85e1a0f44" class="bulleted-list"><li style="list-style-type:disc">Documents are stored as binary versions of JSON objects</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80e7-95ca-f534be11a74c" class="code"><code class="language-JSON">// MongoDB document example
{
_id: “1”, //_id is a special field in each document.
name: “Jack Dorsey” 
company: {“Twitter”, “Block”}
email: “jack@twitter.com”
}
{
_id: “2”,
name: “Elon Musk”,
email: “emusk@tesla.com”,
home_town: [“LA”, “London”]
}

// The primary key (indexed by default).
// First field of each document.
// If _id is not present during ingest (database load), then it will be added.
// Special operation during projections (more later)</code></pre><h3 id="15a4c992-a19a-80ff-8a93-f153c4a1d4bc" class="">Indexing</h3><ul id="15a4c992-a19a-8087-b152-f0209679fc58" class="bulleted-list"><li style="list-style-type:disc">MongoDB databases are automatically indexed on the _id field (primary index)</li></ul><ul id="15a4c992-a19a-808a-b413-e0dfa7679d66" class="bulleted-list"><li style="list-style-type:disc">You can also create indices on other fields—secondary indices</li></ul><ul id="15a4c992-a19a-80de-b25c-fa37a78cfc70" class="bulleted-list"><li style="list-style-type:disc">Up to 64 per collection allowed</li></ul><ul id="15a4c992-a19a-8026-aae4-c96eaf3b87d3" class="bulleted-list"><li style="list-style-type:disc">Indices enable efficient search</li></ul><h3 id="15a4c992-a19a-80f8-81c7-c75402ad83d4" class="">Namespace</h3><ul id="15a4c992-a19a-80d8-9012-de53a97f24f5" class="bulleted-list"><li style="list-style-type:disc">A namespace is a database in relational database systems. Also called database in MongoDB<p id="15a4c992-a19a-80ec-8227-ecbc13bc9803" class="">&gt; use tutorial</p><ul id="15a4c992-a19a-8082-b59b-d32eec086a55" class="bulleted-list"><li style="list-style-type:circle">Switched to db tutorial</li></ul></li></ul><ul id="15a4c992-a19a-80e5-988b-e11a57019ffd" class="bulleted-list"><li style="list-style-type:disc">Creates a namespace called ‘tutorial’ and makes it available for use</li></ul><ul id="15a4c992-a19a-8015-a63e-e6949dd63840" class="bulleted-list"><li style="list-style-type:disc">So no need to explicitly create a namespace before using it</li></ul><ul id="15a4c992-a19a-80fa-bfe4-e67007a1d7f4" class="bulleted-list"><li style="list-style-type:disc">All subsequent commands are assumed to pertain to this namespace unless a command to use another namespace is executed</li></ul><ul id="15a4c992-a19a-802c-a788-ffd674d2ed3b" class="bulleted-list"><li style="list-style-type:disc">A namespace consists of a collection of documents</li></ul><h3 id="15a4c992-a19a-80ee-bd8e-ea1eeaecfdcf" class="">Collections</h3><ul id="15a4c992-a19a-805b-bc5d-ebdcabd45465" class="bulleted-list"><li style="list-style-type:disc">Collections are sets of documents<ul id="15a4c992-a19a-8006-88bc-c42249d87c3b" class="bulleted-list"><li style="list-style-type:circle">These are like tables in relational database systems</li></ul></li></ul><ul id="15a4c992-a19a-8040-ac0a-ebd48c5f36e4" class="bulleted-list"><li style="list-style-type:disc">Documents with very different fields can be stored in a collection.<ul id="15a4c992-a19a-8039-855c-c47c3c157141" class="bulleted-list"><li style="list-style-type:circle">But it makes sense from the point of efficient search to keep more or less<p id="15a4c992-a19a-804c-864c-e6897f3970ed" class="">similarly structured documents, about related topics be stored in the same</p><p id="15a4c992-a19a-803c-a6b3-e541aec141ce" class="">collection.</p></li></ul><p id="15a4c992-a19a-803b-a5b5-d62f50f94f9e" class="">&gt; db.students.insert({name: “John Doe”})</p></li></ul><ul id="15a4c992-a19a-8081-bcc3-d89356f5738e" class="bulleted-list"><li style="list-style-type:disc">Notice: we created the collection students just by telling MongoDB to insert a document into it—no need to explicitly create the collection.</li></ul><ul id="15a4c992-a19a-8095-a232-d4ceb8699418" class="bulleted-list"><li style="list-style-type:disc">Similarly, the document inserted doesn’t have to be created prior to insertion.</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80e0-89dc-edfc519bc6af" class="code"><code class="language-Python">use tutorial # create a database called tutorial
db.students.insert({name: &quot;John Doe&quot;}) # create a table/collection by insert sth into it
db.createCollection(&quot;students&quot;)

db.students.find() #similar to show()

db.students.find({name: &quot;John Doe&quot;}) # select name = John Doe

db.students.insertMany([{name: &quot;first&quot;}, 
												{name: &quot;second&quot;}])</code></pre><h3 id="15a4c992-a19a-8021-8006-cc2ed964993c" class="">Query in Mongo</h3><p id="15a4c992-a19a-8062-81f6-f9c82cac2b7b" class="">There are three main types of query in the MongoDB Query Language, or MQL:</p><ul id="15a4c992-a19a-80ab-8472-d4e21a0592fe" class="bulleted-list"><li style="list-style-type:disc"><strong>Retrieval</strong> queries: Restricted queries of the form SELECT-WHERE-ORDER-BY-LIMIT</li></ul><ul id="15a4c992-a19a-802a-a473-c9f1bb2de6b1" class="bulleted-list"><li style="list-style-type:disc"><strong>Aggregation</strong> queries: A general pipeline of operators<ul id="15a4c992-a19a-808a-b149-e16b544c4ddf" class="bulleted-list"><li style="list-style-type:circle">A bit of a misnomer; can capture retrievals as a special case</li></ul></li></ul><ul id="15a4c992-a19a-80dc-a086-eb42bfa5ad44" class="bulleted-list"><li style="list-style-type:disc"><strong>Update</strong> queries</li></ul><p id="15a4c992-a19a-8089-8c7a-f91a63f69014" class="">All queries are invoked as <em><strong>db.collection.operation1(...).operation2(...)</strong></em></p><p id="15a4c992-a19a-8012-af96-d3fc08473ab8" class="">Object-oriented and pipelined</p><ul id="15a4c992-a19a-801a-8a8a-dbb58e004234" class="bulleted-list"><li style="list-style-type:disc">“input”: a name of a collection (e.g., named collection) in database db</li></ul><ul id="15a4c992-a19a-8075-8ed4-c4b43e2d6026" class="bulleted-list"><li style="list-style-type:disc">output: collection</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80ff-b376-d392d5204982" class="code"><code class="language-Python"># RETRIEVAL
# find()
# Uses the $regex operator to return documents in the bios collection where name.last field starts with the letter N (or is &quot;LIKE N%&quot;)
db.bios.find(
   { &quot;name.last&quot;: { $regex: /^N/ } }
)
# uses the $gt operator returns all the documents from the bios collection where birth is greater than new Date(&#x27;1950-01-01&#x27;):
db.bios.find( { birth: { $gt: new Date(&#x27;1950-01-01&#x27;) } } )
# uses the $in operator to return documents in the bios collection where _id equals either 5 or ObjectId(&quot;507c35dd8fada716c89d0013&quot;):
db.bios.find(
   { _id: { $in: [ 5, ObjectId(&quot;507c35dd8fada716c89d0013&quot;) ] } }
)
# uses $gt to return documents where the value of qty is greater than 4
db.collection.find( { qty: { $gt: 4 } } )
# finds all documents in the bios collection and returns only the name field, contribs field and _id field:
db.bios.find( { }, { name: 1, contribs: 1 } )
# returns the last field in the name embedded document and the first two elements in the contribs array
db.bios.find(
   { },
   { _id: 0, &#x27;name.last&#x27;: 1, contribs: { $slice: 2 } } )

# findOne()
# returns the first matching document from the bios collection where either the field first in the embedded document name starts with the letter G or where the field birth is less than new Date(&#x27;01/01/1945&#x27;):
db.bios.findOne(
   {
     $or: [
            { &#x27;name.first&#x27; : /^G/ },
            { birth: { $lt: new Date(&#x27;01/01/1945&#x27;) } }
          ]
   }
)
# finds a document in the bios collection and returns only the name, contribs and _id fields:
db.bios.findOne(
    { },
    { name: 1, contribs: 1 }
)
# returns a document in the bios collection where the contribs field contains the element OOP and returns all fields except the _id field, the first field in the name embedded document, and the birth field:
db.bios.findOne(
   { contribs: &#x27;OOP&#x27; },
   { _id: 0, &#x27;name.first&#x27;: 0, birth: 0 }
)
# uses the sort option to return the first matching document from the sorted bios collection. In this example, the collection is sorted by birth in ascending order.
db.bios.findOne(
   { },
   { },
   { sort: { birth: 1 } }
)</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80af-881d-d46eaa3d8acf" class="code"><code class="language-Python"># AGGREGATE
# The following aggregation operation selects documents with status equal to &quot;A&quot;, groups the matching documents by the cust_id field and calculates the total for each cust_id field from the sum of the amount field, and sorts the results by the total field in descending order:
db.orders.aggregate( [
   { $match: { status: &quot;A&quot; } },
   { $group: { _id: &quot;$cust_id&quot;, total: { $sum: &quot;$amount&quot; } } },
   { $sort: { total: -1 } }
] )
# output
[
   { _id: &quot;xyz1&quot;, total: 100 },
   { _id: &quot;abc1&quot;, total: 75 }
]</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80c8-9967-d3bed3dd5af9" class="code"><code class="language-Python"># UPDATE
# Adding a new field (and value) to an existing document
db.students.update({name: “John Doe”}, {$set: {country: “USA”}})
# Update the {name: “John Doe”} document by adding the field ‘country’ with the values ‘USA’

# change the name to ‘Johnny’
db.students.update({name: “John Doe”}, {$set: {name: “Johnny”}})

# To replace one document with another document in the collection use replacement update.
db.students.update({name: “Johnny”}, {status: “new”})
# that is, without the ‘$set’ operator
db.students.find()
# example output
{ &quot;_id&quot; : ObjectId(&quot;5c806c41839f4c0f6a407677&quot;), &quot;name&quot; : &quot;Jane Smith&quot; }
{ &quot;_id&quot; : ObjectId(&quot;5c80738a839f4c0f6a407676&quot;), &quot;status&quot; : &quot;new&quot; }</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8023-9dd0-c656191a8c27" class="code"><code class="language-Python"># DELETE
# To delete all the documents from a collection (w/o deleting the collection): 
db.students.remove()

# To delete just a specific document: 
db.students.remove({name: “Johnny”})

# To delete the collection: 
db.students.drop()</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8083-bd36-c2856cd12fc3" class="code"><code class="language-Python"># AND, OR operators
# Find students who satisfy two conditions (on name AND tot_credit)
db.students.find({name: “Joe”, tot_credit: {$lt: 8}})

# Find students who satisfy one of two conditions (a name OR tot_credit)
db.students.find({$or: [name: “joe”, tot_credit: {$lt: 8}]})

# MongoDB supports operators like $gt, $lte, etc.

# student&#x27;s name is &quot;joe&quot; and either
# Their total credit (tot_credit) is less than 100, or
# Their department (dept) is &quot;DSI&quot;.
db.students.find({name: “joe”, $or : [ { tot_credit: { $lt: 100 } }, { dept: “DSI” } ])</code></pre><h3 id="15a4c992-a19a-8017-b9e5-d551526b23f8" class="">PyMongo</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80d5-b1ac-df832ec6dc0b" class="code"><code class="language-Python">from pymongo import MongoClient

client = MongoClient(&quot;localhost&quot;,27017)

client.list_database_names()
# The above command lists all the databases (namespaces)

# to access a specific database we can use
db = client[“students”]
# or
db = client.students

db.list_collection_names()
# The above command lists all the collections

# To access a specific collection in a db we can use
collection = db[“myCollection”] # where ‘myCollection’ is the name of a collection
# Or
collection = db.myCollection

# To get a list of collections in a db
db.list_collection_names()

# get a document that has the exact FV pair
db.prizes.find_one({category: &quot;chemistry&quot;})

# the comma functions as the &quot;and&quot; operator
db.prizes.find_one({category: &quot;chemistry&quot;, 
                    year: 2020})
                    
# note the object structure
db.prizes.find({$or: [{category: &quot;chemistry&quot;},
                        {year: 2020}]})
# note the object structure
db.prizes.find({year: {$gt: 2018}})</code></pre><table id="15a4c992-a19a-800c-8094-d7447c8a2f0f" class="simple-table"><tbody><tr id="a58b6165-508d-49a4-9d33-042d7ce099b7"><td id="AT{^" class=""><strong>MQL</strong></td><td id="LLii" class=""><strong>pymongo</strong></td></tr><tr id="da431a76-fe1f-423c-a6f8-cd9bb0ee67a0"><td id="AT{^" class="">Methods are camelCase, e.g. findOne()</td><td id="LLii" class="">Methods are underscore, e.g. find_one()</td></tr><tr id="811c00e9-f21a-4e23-802e-5415fecfc8ff"><td id="AT{^" class="">field/LHS doesn’t use quotes</td><td id="LLii" class="">field/LHS uses quotes, beacause {} is a Python dictionary</td></tr><tr id="15a4c992-a19a-80e0-85f3-e2959953f409"><td id="AT{^" class="">special keywords don’t use quotes</td><td id="LLii" class="">special keywords don’t use quotes</td></tr><tr id="15a4c992-a19a-8071-a43a-f169e973e202"><td id="AT{^" class="">dot notation uses quotes</td><td id="LLii" class="">dot notation uses quotes</td></tr></tbody></table><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80b4-87b1-ca1dea90528c" class="code"><code class="language-Python"># “ORDER BY”/”LIMIT”, i.e., sort() and limit()
(db.prizes.find({category: &quot;peace&quot;},
     {_id: 0, category: 1, year: 1,
        &quot;laureates.firstname&quot;: 1,
        &quot;laureates.surname&quot;: 1})
     .sort({year: 1} ))
     
(db.prizes.find({category: &quot;peace&quot;},
     {_id: 0, category: 1, year: 1,
        &quot;laureates.firstname&quot;: 1,
        &quot;laureates.surname&quot;: 1})
     .sort({year:  -1}) # asc: 1, desc: -1
     
(db.prizes.find({category: &quot;peace&quot;},
     {_id: 0, category: 1, year: 1,
        &quot;laureates.firstname&quot;: 1,
        &quot;laureates.surname&quot;: 1})
      .sort({year: 1, category: -1})) # multi
      
(db.prizes.find({category: &quot;peace&quot;},
     {_id: 0, category: 1, year: 1,
        &quot;laureates.firstname&quot;: 1,
        &quot;laureates.surname&quot;: 1})
      .sort({year: 1, category: -1})
      .limit(2))          # limit</code></pre><h2 id="15a4c992-a19a-803b-ac2b-cecc3a3f4cb1" class="">Apache Spark</h2><table id="15a4c992-a19a-8088-9e9a-d9ae08aec3ea" class="simple-table"><tbody><tr id="c11d0767-c1c4-44a8-a7db-e02f4ac7a3fe"><td id="BsBI" class="">Hadoop</td><td id=":ML&lt;" class="">Spark</td></tr><tr id="42ba3427-d7c7-4015-a0fd-e1fd9407dffc"><td id="BsBI" class="">Batch system</td><td id=":ML&lt;" class="">In memory</td></tr><tr id="46e5b3fe-0521-469b-b3bb-cc7d81199976"><td id="BsBI" class="">Too much effort to program</td><td id=":ML&lt;" class="">Multiple programming languages</td></tr><tr id="15a4c992-a19a-80aa-a46f-d3b11d9d4e14"><td id="BsBI" class="">Too slow on ad hoc and real time</td><td id=":ML&lt;" class="">Supports real-time use cases</td></tr><tr id="15a4c992-a19a-8076-b3b2-f70121d39e48"><td id="BsBI" class=""></td><td id=":ML&lt;" class="">Spark stack</td></tr></tbody></table><h3 id="15a4c992-a19a-8017-8e72-cb1b16e19e82" class="">Resilient Distributed Dataset (RDD)</h3><ul id="15a4c992-a19a-8003-bd8c-c1fc523684d7" class="bulleted-list"><li style="list-style-type:disc">Fundamental unit of data in Spark<ul id="15a4c992-a19a-80fd-9638-cef00dfcc4a5" class="bulleted-list"><li style="list-style-type:circle">Resilient – ability to recreate failed node</li></ul><ul id="15a4c992-a19a-80b2-b05f-e6072b4e44b4" class="bulleted-list"><li style="list-style-type:circle">Distributed – data split across partitions (strategy involved here)</li></ul><ul id="15a4c992-a19a-8085-8bb8-e1b55b892ce7" class="bulleted-list"><li style="list-style-type:circle">Dataset – obv</li></ul></li></ul><ul id="15a4c992-a19a-8069-963e-f0cf0c0bbe7c" class="bulleted-list"><li style="list-style-type:disc">An RDD is lazy and immutable</li></ul><ul id="15a4c992-a19a-8034-a128-d75287700964" class="bulleted-list"><li style="list-style-type:disc">RDD features<ol type="1" id="15a4c992-a19a-8082-acc9-f939d278a89f" class="numbered-list" start="1"><li>Distributed Data Abstraction</li></ol><ol type="1" id="15a4c992-a19a-8041-b3e7-e3c75a794ce6" class="numbered-list" start="2"><li>Resilient and Immutable</li></ol><ol type="1" id="15a4c992-a19a-80ae-b394-d0891d2cd933" class="numbered-list" start="3"><li>Compile-time Type-safe</li></ol><ol type="1" id="15a4c992-a19a-80eb-b156-ca0e4264b2c8" class="numbered-list" start="4"><li>Unstructured/Structured Data: Text (logs, tweets, articles, social)</li></ol><ol type="1" id="15a4c992-a19a-8065-83c4-c9179b1d5a61" class="numbered-list" start="5"><li>Lazy<ul id="15a4c992-a19a-80bb-a439-f8f65a7c8c5b" class="bulleted-list"><li style="list-style-type:disc">Transformations are <strong>lazy</strong>; nothing happens until an action is called</li></ul><ul id="15a4c992-a19a-80f2-ba77-d0c16eecdcad" class="bulleted-list"><li style="list-style-type:disc">Action triggers computation</li></ul><ul id="15a4c992-a19a-80ff-99bf-cc26708f2883" class="bulleted-list"><li style="list-style-type:disc">Action returns value</li></ul></li></ol></li></ul><figure id="15a4c992-a19a-8025-bc81-e8440266d9ab" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.22.58.png"><img style="width:201px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.22.58.png"/></a></figure><p id="15a4c992-a19a-805d-95a5-c6d3c858e225" class=""><strong>Three ways of creating RDDs</strong></p><ol type="1" id="15a4c992-a19a-8079-bf51-e28d26345135" class="numbered-list" start="1"><li>By transferring an existing collection using SparkContext’s parallelize() function<p id="15a4c992-a19a-800e-9c9f-ef2106022765" class="">sc = spark.sparkContext</p><p id="15a4c992-a19a-80e0-b192-c47ae745c80f" class="">collection_rdd = sc.parallelize(collection)</p></li></ol><p id="15a4c992-a19a-80b9-8f8c-eafce5abdcb5" class="">2. From any Hadoop-supported data source, such as local file systems, HDFS, Hbase, Cassandra, etc.</p><p id="15a4c992-a19a-8052-b759-c89494a9a30a" class="">3. By transforming one RDD into another</p><h3 id="15a4c992-a19a-803e-84c0-de03a987dc3a" class="">Three key Spark interfaces</h3><ul id="15a4c992-a19a-8094-aacb-daea91b9e3b3" class="bulleted-list"><li style="list-style-type:disc">RDD<ul id="15a4c992-a19a-80ad-a316-fb08360c28d9" class="bulleted-list"><li style="list-style-type:circle">It is an interface to a sequence of data objects that consist of one or more types that are located across a collection of machines (a cluster). RDDs can be created in a variety of ways and are the “lowest level” API available. While this is the original data structure for Apache Spark, you should focus on the DataFrame API, which is a superset of the RDD functionality. The RDD API is available in the Java, Python, and Scala languages.</li></ul></li></ul><ul id="15a4c992-a19a-80fe-86ee-f2faa85d26a3" class="bulleted-list"><li style="list-style-type:disc">DataFrame<ul id="15a4c992-a19a-8047-b84d-f7d793f3af49" class="bulleted-list"><li style="list-style-type:circle">These are similar in concept to the DataFrame you may be familiar with in the pandas Python library and the R language. The DataFrame API is available in the Java, Python, R, and Scala languages.</li></ul></li></ul><ul id="15a4c992-a19a-8048-9b55-e1b5575b2b9c" class="bulleted-list"><li style="list-style-type:disc">Dataset<ul id="15a4c992-a19a-80b7-9df1-fe9ab281e62a" class="bulleted-list"><li style="list-style-type:circle">A combination of DataFrame and RDD. It provides the typed interface that is available in RDDs while providing the convenience of the DataFrame. The Dataset API is available in the Java and Scala languages.</li></ul></li></ul><ul id="15a4c992-a19a-804f-92a6-e08cdd10acdf" class="bulleted-list"><li style="list-style-type:disc">In many scenarios, especially with the performance optimizations embedded in DataFrames and Datasets, it will not be necessary to work with RDDs. But it is important to understand the RDD abstraction because:<ul id="15a4c992-a19a-808c-9970-cdcce90cc73d" class="bulleted-list"><li style="list-style-type:circle">The RDD is the underlying infrastructure that allows Spark to run so fast and provide data lineage.</li></ul><ul id="15a4c992-a19a-80bc-b67e-f6ee55d6b374" class="bulleted-list"><li style="list-style-type:circle">If you are diving into more advanced components of Spark, it may be necessary to use RDDs.</li></ul><ul id="15a4c992-a19a-80df-98bd-d3e6e8d5996b" class="bulleted-list"><li style="list-style-type:circle">The visualizations within the Spark UI reference RDDs.</li></ul></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8051-ae54-fad19ff09b8d" class="code"><code class="language-Python"># Converting between RDDs and DF
from pyspark.sql import SparkSession

spark = SparkSession.builder.appName(&#x27;SparkByExamples.com&#x27;).getOrCreate()

dept = [(&quot;Finance&quot;,10),(&quot;Marketing&quot;,20),(&quot;Sales&quot;,30),(&quot;IT&quot;,40)]
rdd = spark.sparkContext.parallelize(dept)
df = rdd.toDF()
df.printSchema()
df.show(truncate=False)

root
 |-- _1: string (nullable = true)
 |-- _2: long (nullable = true)

+---------+---+
|_1       |_2 |
+---------+---+
|Finance  |10 |
|Marketing|20 |
|Sales    |30 |
|IT       |40 |
+---------+---+</code></pre><h3 id="15a4c992-a19a-8046-bad7-f7433dff3461" class="">Example in RDD and DF</h3><figure id="15a4c992-a19a-8093-9f6a-e8b5f5950fac" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.28.02.png"><img style="width:447.9765625px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.28.02.png"/></a></figure><h3 id="15a4c992-a19a-80b5-933d-f63faacf5995" class="">Spark Architecture</h3><figure id="15a4c992-a19a-800a-bd76-d064cb3b9293" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.29.01.png"><img style="width:447.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.29.01.png"/></a></figure><ul id="15a4c992-a19a-8016-89aa-feb514b60582" class="bulleted-list"><li style="list-style-type:disc">The Driver<ul id="15a4c992-a19a-802b-883a-e868643931f2" class="bulleted-list"><li style="list-style-type:circle">The driver is a Java process.</li></ul><ul id="15a4c992-a19a-80c3-bb14-d03ddeb2eb0f" class="bulleted-list"><li style="list-style-type:circle">The main() method of a user&#x27;s program runs in this program.</li></ul><ul id="15a4c992-a19a-80db-85ee-dfca5d243e38" class="bulleted-list"><li style="list-style-type:circle">It executes the user code and generates a SparkSession or SparkContext, and the SparkSession is in charge of creating DataFrame, DataSet, RDD, SQL execution, Transformation &amp; Action, and other resources.</li></ul></li></ul><ul id="15a4c992-a19a-8006-bf7d-f42ef1cc1fab" class="bulleted-list"><li style="list-style-type:disc">The Executor<ul id="15a4c992-a19a-80c8-80a5-f0736590f6c9" class="bulleted-list"><li style="list-style-type:circle">Spark uses a Primary-Secondary architecture, with one central coordinator and several hierarchical worker nodes.</li></ul><ul id="15a4c992-a19a-8022-8c8e-e7af45d06d90" class="bulleted-list"><li style="list-style-type:circle">Spark Driver is the central coordinator, and it deals with all of the Workers.</li></ul><ul id="15a4c992-a19a-80a8-8c3d-d2636b6c21d4" class="bulleted-list"><li style="list-style-type:circle">Each Worker node has one or more Executor(s)</li></ul><ul id="15a4c992-a19a-8012-85c7-dfc6606a9e62" class="bulleted-list"><li style="list-style-type:circle">The Driver has complete knowledge of the Executors at all times.</li></ul><ul id="15a4c992-a19a-80e8-a828-e8506fe48aa0" class="bulleted-list"><li style="list-style-type:circle">Executors are launched in collaboration with the Cluster Manager at the outset of a Spark Application.</li></ul><ul id="15a4c992-a19a-8025-a1af-c542bd714181" class="bulleted-list"><li style="list-style-type:circle">The executor&#x27;s main responsibility is to run a single Task and return the outcome to the Driver.</li></ul></li></ul><ul id="15a4c992-a19a-803a-9815-f35a0e0e809b" class="bulleted-list"><li style="list-style-type:disc">SparkContext<ul id="15a4c992-a19a-804a-b784-f83f1269d648" class="bulleted-list"><li style="list-style-type:circle">A SparkContext is a reference to a Spark cluster that can be used to construct RDDs, accumulators, and broadcast variables.</li></ul><ul id="15a4c992-a19a-80ef-9ec2-c25d2fa3799f" class="bulleted-list"><li style="list-style-type:circle">Since Spark 2.0, recommended to use SparkSession which is a higher-level API that&#x27;s more user-friendly and simpler to use than SparkContext</li></ul></li></ul><ul id="15a4c992-a19a-8059-9777-df846f630e17" class="bulleted-list"><li style="list-style-type:disc">Cluster Manager<ul id="15a4c992-a19a-8086-9d0c-d92340895351" class="bulleted-list"><li style="list-style-type:circle">The Cluster Manager is used by Spark to launch the Executors and Driver in Cluster mode.</li></ul><ul id="15a4c992-a19a-80d3-9325-e4b278ac67cd" class="bulleted-list"><li style="list-style-type:circle">Spark can be used in conjunction with any Cluster Manager.</li></ul><ul id="15a4c992-a19a-8065-b527-e900f36f6915" class="bulleted-list"><li style="list-style-type:circle">The spark-submit script is used to launch applications on a cluster. It can use all of Spark’s supported <a href="https://spark.apache.org/docs/latest/cluster-overview.html#cluster-manager-types">cluster managers</a> through a uniform interface.</li></ul><ul id="15a4c992-a19a-80cb-8b10-f56267e4b119" class="bulleted-list"><li style="list-style-type:circle">Task or command is the smallest individual unit of execution that operates on a single RDD partition.</li></ul><ul id="15a4c992-a19a-8008-9813-dbd1bcd25cb2" class="bulleted-list"><li style="list-style-type:circle">The system currently supports several cluster managers:<ul id="15a4c992-a19a-80d3-a6a1-d57a5a62c9db" class="bulleted-list"><li style="list-style-type:square"><strong>Standalone</strong> – a simple cluster manager included with Spark that makes it easy to set up a cluster.</li></ul><ul id="15a4c992-a19a-80ba-a7d0-da36a2c25513" class="bulleted-list"><li style="list-style-type:square"><strong>Apache Mesos</strong> – a general cluster manager that can also run Hadoop MapReduce and service applications. (Deprecated)</li></ul><ul id="15a4c992-a19a-8000-93b5-f94e4b541a91" class="bulleted-list"><li style="list-style-type:square"><strong>Hadoop YARN</strong> – the resource manager in Hadoop 3.</li></ul><ul id="15a4c992-a19a-8048-ade1-e8b777960deb" class="bulleted-list"><li style="list-style-type:square"><strong>Kubernetes </strong>– an open-source system for automating deployment, scaling, and management of containerized applications.</li></ul></li></ul><figure id="15a4c992-a19a-8093-8c69-ffbb15f1d3a7" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.34.12.png"><img style="width:419.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.34.12.png"/></a></figure></li></ul><p id="15a4c992-a19a-8048-8555-c599b2cbd698" class=""><strong>Task Scheduling</strong></p><figure id="15a4c992-a19a-80b3-8376-ecd8c4cb8cba" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.34.55.png"><img style="width:447.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25881.34.55.png"/></a></figure><h3 id="15a4c992-a19a-805f-86e3-e6675b807bc5" class="">Spark SQL</h3><ul id="15a4c992-a19a-80d6-b26a-fea44386551d" class="bulleted-list"><li style="list-style-type:disc">Spark SQL runs on top of Spark Core and introduces another data abstraction called DataFrames</li></ul><ul id="15a4c992-a19a-801a-9b3a-dd0a65284a8d" class="bulleted-list"><li style="list-style-type:disc">DataFrames can be created from RDDs by specifying a schema on how to structure the data elements in the RDD, or can be loaded in directly from various sorts of file formats</li></ul><ul id="15a4c992-a19a-801d-80b3-f124efd05f0a" class="bulleted-list"><li style="list-style-type:disc">Even although DataFrames continue to use RDDs behind the scenes, they represent themselves to the end user as a collection of data organized into named columns</li></ul><ul id="15a4c992-a19a-804e-ad79-e701ac4b4032" class="bulleted-list"><li style="list-style-type:disc">Run SQL or HiveQL queries on existing warehouses.</li></ul><ul id="15a4c992-a19a-805c-80b9-d104f000bbc3" class="bulleted-list"><li style="list-style-type:disc">Spark SQL supports the HiveQL syntax as well as Hive SerDes and UDFs, allowing you to access existing Hive warehouses.</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8027-ad90-d63e03e93994" class="code"><code class="language-Python"># Spark SQL Example
spark.read.json(&quot;s3n://...&quot;)
  .registerTempTable(&quot;json&quot;)

results = spark.sql(
  &quot;&quot;&quot;SELECT *
 	FROM people
 	JOIN json ...&quot;&quot;&quot;)

# SparkSession
from pyspark.sql import SparkSession
spark = SparkSession.builder.appName(“Products example&quot;).getOrCreate()
 
# Create a DataFrame object by reading in a file
df = spark.read.csv(“./Documents/data/productFiles/products.csv”, sep = “,”, header = True, inferSchema = True)


# DataFrames are structured in columns and rows:
df.printSchema() 
# root 
# |-- product: string (nullable = true) 
# |-- product_URL: string (nullable = true)
# |-- product_type: string (nullable = true)
 
df.show()
# will show the results in tabular form, as in Pandas 

df.select(“product”).show()

from pyspark.sql.functions import col

df.where(col(&quot;product&quot;).isin([&quot;shoes&quot;, &quot;shirts&quot;])).show()</code></pre><p id="15a4c992-a19a-80bb-9009-c2dfd74b5565" class="">Spark MLlib Example</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8079-9857-d71453b18bb3" class="code"><code class="language-Python"># MLlib Example
from pyspark.sql import SparkSession
from pyspark.ml.stat import Correlation
import pyspark.sql.functions as f
from pyspark.ml.linalg import Vector
from pyspark.ml.feature import VectorAssembler
from pyspark.sql.types import *
from pyspark.ml.regression import LinearRegression

spark = SparkSession.builder.getOrCreate()

Schema = StructType([
   StructField(&#x27;YearsExperience&#x27;, FloatType(), True),
   StructField(&#x27;Salary&#x27;, FloatType(), True)
])

df = spark.read.csv(&quot;/FileStore/tables/Salary_Data.csv&quot;, header=True,schema=Schema)

assembler = VectorAssembler(inputCols=[&#x27;YearsExperience&#x27;],outputCol=&#x27;features&#x27;)
data_set = assembler.transform(df)
data_set = data_set.select([&#x27;features&#x27;,&#x27;salary&#x27;])
train_data,test_data = data_set.randomSplit([0.8,0.2])

lr = LinearRegression(featuresCol=&quot;features&quot;,labelCol=&#x27;salary&#x27;)
lrModel = lr.fit(train_data)
test_stats = lrModel.evaluate(test_data)</code></pre><p id="15a4c992-a19a-80fc-b76e-df428bedd35d" class="">Spark Streaming Example</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80a7-8ff3-dc3b4cf0fcaa" class="code"><code class="language-Python">from pyspark import SparkContext
from pyspark.streaming import StreamingContext

# Create a local StreamingContext with two working thread and batch interval of 1 second
sc = SparkContext(&quot;local[2]&quot;, &quot;NetworkWordCount&quot;)
ssc = StreamingContext(sc, 1)

# Create a DStream that will connect to hostname:port, like localhost:9999
  lines = ssc.socketTextStream(&quot;localhost&quot;, 9999)
# Split each line into words
  words = lines.flatMap(lambda line: line.split(&quot; &quot;))
flatMap is a one-to-many DStream operation that creates a new DStream by generating multiple new records from each record in the source DStream. In this case, each line will be split into multiple words and the stream of words is represented as the words DStream. Next, let’s say we want to count these words.
# Count each word in each batch
pairs = words.map(lambda word: (word, 1))
wordCounts = pairs.reduceByKey(lambda x, y: x + y)

# Print the first ten elements of each RDD generated in this DStream to the console
  wordCounts.pprint()
  # Start the computation 
  ssc.start()  
  ssc.awaitTermination()  </code></pre><p id="15a4c992-a19a-8080-93d5-df461150ca75" class="">Spark GraphX Example</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-801c-89a2-d1096948674b" class="code"><code class="language-Python">vertices = spark.createDataFrame([(&#x27;1&#x27;, &#x27;Carter&#x27;, &#x27;Derrick&#x27;, 50), 
                                  (&#x27;2&#x27;, &#x27;May&#x27;, &#x27;Derrick&#x27;, 26),
                                 (&#x27;3&#x27;, &#x27;Mills&#x27;, &#x27;Jeff&#x27;, 80),
                                  (&#x27;4&#x27;, &#x27;Hood&#x27;, &#x27;Robert&#x27;, 65),
                                  (&#x27;5&#x27;, &#x27;Banks&#x27;, &#x27;Mike&#x27;, 93),
                                 (&#x27;98&#x27;, &#x27;Berg&#x27;, &#x27;Tim&#x27;, 28),
                                 (&#x27;99&#x27;, &#x27;Page&#x27;, &#x27;Allan&#x27;, 16)],
                                 [&#x27;id&#x27;, &#x27;name&#x27;, &#x27;firstname&#x27;, &#x27;age&#x27;])
edges = spark.createDataFrame([(&#x27;1&#x27;, &#x27;2&#x27;, &#x27;friend&#x27;), 
                               (&#x27;2&#x27;, &#x27;1&#x27;, &#x27;friend&#x27;),
                              (&#x27;3&#x27;, &#x27;1&#x27;, &#x27;friend&#x27;),
                              (&#x27;1&#x27;, &#x27;3&#x27;, &#x27;friend&#x27;),
                               (&#x27;2&#x27;, &#x27;3&#x27;, &#x27;follows&#x27;),
                               (&#x27;3&#x27;, &#x27;4&#x27;, &#x27;friend&#x27;),
                               (&#x27;4&#x27;, &#x27;3&#x27;, &#x27;friend&#x27;),
                               (&#x27;5&#x27;, &#x27;3&#x27;, &#x27;friend&#x27;),
                               (&#x27;3&#x27;, &#x27;5&#x27;, &#x27;friend&#x27;),
                               (&#x27;4&#x27;, &#x27;5&#x27;, &#x27;follows&#x27;),
                              (&#x27;98&#x27;, &#x27;99&#x27;, &#x27;friend&#x27;),
                              (&#x27;99&#x27;, &#x27;98&#x27;, &#x27;friend&#x27;)],
                              [&#x27;src&#x27;, &#x27;dst&#x27;, &#x27;type&#x27;])
g = GraphFrame(vertices, edges)

pr = g.pageRank(resetProbability=0.15, tol=0.01)
pr.vertices.show()</code></pre><h3 id="15a4c992-a19a-809d-ac44-f2c0459e9101" class="">PySpark - Coding</h3><ul id="15a4c992-a19a-80be-94a6-fe0fdde12d2f" class="bulleted-list"><li style="list-style-type:disc">Speed - run workloads 100x faster</li></ul><ul id="15a4c992-a19a-80bc-9fe3-c82175187007" class="bulleted-list"><li style="list-style-type:disc">Ease of Use - write applications quickly in Java, Scala, Python, R, and SQL</li></ul><ul id="15a4c992-a19a-808b-a58c-d9c4a23fe756" class="bulleted-list"><li style="list-style-type:disc">Generality - combine SQL, streaming, and complex analytics</li></ul><ul id="15a4c992-a19a-8025-82f8-ca140970e52f" class="bulleted-list"><li style="list-style-type:disc">Runs Everywhere - runs on Hadoop, Apache Mesos, Kubemetes, standalone, or in the cloud. Access divers data sources</li></ul><p id="15a4c992-a19a-80a9-9553-cddac9a2fa02" class="">
</p><p id="15a4c992-a19a-8043-b7f0-eb63b9d8e34c" class="">Install and import PySpark library</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80ea-bf94-f632a263c9f2" class="code"><code class="language-Python">!pip install pyspark
import pyspark</code></pre><p id="15a4c992-a19a-8062-8fc5-d3432a41d065" class="">Create Spark session</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-808a-b5d2-c46e2b640d0d" class="code"><code class="language-Python">from pyspark.sql import SaprkSession
spark = SparkSession.builder.appName(&#x27;optional&#x27;).getOrCreate()
# appName() is optional; builder.getOrCreate() also works</code></pre><p id="15a4c992-a19a-805b-870e-ebae2e256ef5" class="">Read data</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-805c-b365-d616476db39a" class="code"><code class="language-Python">df = spark.read.csv(&#x27;path/xxx.csv&#x27;, header=True, inferSchema=True)
# csv/table/text/json/...

# check schema
df.printSchema()
df.dtypes
# example output:
# root
# |-- c1_: string (nullable = true)
# |-- c2_: string (nullable = true)

df.show(truncate=False, n=df.count())
df.head()

# convert to pandas_df
pandas_df = df.toPandas()
# convert back to Spark DataFrame
spark_df = sparkCreateDataFrame(pandas_df)</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80f9-a30a-e5a2300a44e9" class="code"><code class="language-Python"># Spark and JSON

df = spark.createDataFrame([(2, “Alice”), (5, “Bob”)], schema = [“age”, “name”])
df.toJSON().first()
#‘{“age”: 2, “name”: “Alice”}’
# returns a RDD</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8071-9072-eb0cb7987054" class="code"><code class="language-Python"># get column names
df.columns
# show only one column
df.select(&#x27;column1&#x27;).show()
# show multiple columns
df.select([&#x27;columns1&#x27;,&#x27;column2&#x27;]).show()

# show summary of table
df.describe().show()</code></pre><p id="15a4c992-a19a-8046-b441-cf963bd7ba54" class="">Operations on DataFrames</p><ul id="15a4c992-a19a-804e-82ca-f5a6417ad029" class="bulleted-list"><li style="list-style-type:disc">Access some meta-data<ul id="15a4c992-a19a-8093-b50d-e071f6f7c540" class="bulleted-list"><li style="list-style-type:circle">df.printSchema()</li></ul><ul id="15a4c992-a19a-8006-a0c6-e0dec0df2686" class="bulleted-list"><li style="list-style-type:circle">df.count()</li></ul><ul id="15a4c992-a19a-80a5-bb2d-e6d7631fd088" class="bulleted-list"><li style="list-style-type:circle">df.describe(i).show() #for EDA on column i of df</li></ul><ul id="15a4c992-a19a-8070-8298-f9036b851364" class="bulleted-list"><li style="list-style-type:circle">df.select(i).summary().show() #some statistical analysis of the values in specific column</li></ul></li></ul><p id="15a4c992-a19a-8054-8ca9-cf8aa853ee49" class="">Changing columns</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80ba-ba82-d0c81a2686bd" class="code"><code class="language-Python"># Example to create a simple df
df = spark.createDataFrame([(2, “Alice”), (5, “Bob”)], schema = [“age”, “name”])

# add columns in dataframe
df_new = df.withColumn(&#x27;newcol&#x27;,df[&#x27;col1&#x27;]*2) #newcol=col1*2

# drop column
df_new = df_new.drop(&#x27;newcol&#x27;)

# rename columns
df.withColumnRenamed(&#x27;oldName&#x27;,&#x27;newName&#x27;)

# drop duplicate columns
df.dropDuplicates()</code></pre><p id="15a4c992-a19a-8016-b813-ed0c32d30119" class="">Drop null values</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8054-bfa7-f1d786b3eb0e" class="code"><code class="language-Python">df.na.drop(how=&#x27;any&#x27;, thresh=None, subset=None).show()
# drop/fill/replace
# how = &#x27;any&#x27;(default) drop a row if contains any nulls / &#x27;all&#x27; drop a row only if all values are null
# thresh = n at least n non-null values in a row
# subset = [&#x27;colname&#x27;] drop row if there&#x27;s null value in &#x27;colname&#x27;</code></pre><p id="15a4c992-a19a-8048-b022-d5000db3ed4b" class="">Fill null values</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-809d-bfe3-fe37ff903975" class="code"><code class="language-Python"># replace all missing values
df.na.fill(&#x27;replace_val&#x27;)
# replace missing values in certain columns
df.na.fill(&#x27;replace_val&#x27;,[&#x27;col1&#x27;,&#x27;col2&#x27;])</code></pre><p id="15a4c992-a19a-80bd-aa65-e5a02984cc27" class="">Filter operation</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-809d-866c-deb2cd102a83" class="code"><code class="language-Python"># one condition
df.filter(&#x27;col1 &lt; 1050&#x27;).show()
df.filter(&#x27;col1 &lt; 1050&#x27;).select([&#x27;col1&#x27;,&#x27;col2&#x27;]).show()

# &gt;1 condition
df.filter((df[&#x27;col1&#x27;]&lt;1050) &amp; (df[&#x27;col2&#x27;]&gt;1030)).show()
# &amp; |
# inverse filtering
df.filter(~(&#x27;col1 &lt; 1050&#x27;)).show() #showing everything &gt;=1050</code></pre><p id="15a4c992-a19a-8003-abf1-cf3439f7e42a" class="">Groupby and aggregate functions</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80f7-adda-df8cc9d80c4f" class="code"><code class="language-Python"># groupby
df.groupBy(&#x27;col1&#x27;)

# groupby and aggregate functions
df.groupBy(&#x27;col1&#x27;).sum() #sum of every unique values in col1
# sum/mean/count/max/min/avg/...</code></pre><p id="15a4c992-a19a-809a-83ca-cd97b10b5592" class="">Join</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80f7-8748-cb1828851f64" class="code"><code class="language-Python">df1.join(df2, df1.key == df2.key, join_type)
# join_type = inner,outer, left, right, leftsemi, leftanti

# Join two DataFrames, df1 and df2
joined_df = df1.join(df2, on = &lt;join conditions&gt;, how = &lt;join type&gt;)
# e.g.
joined_df = df1.join(df2, on =“product”, how = “inner”)
# Cross product
cross_df = df1.crossJoin(df2)

# Append a DataFrame df2 to df1—the rows of df2 will appear after the rows of df1. They must have the same number of columns
appended_df = df1.union(df2)
# intersection
df1.intersect(df2)
</code></pre><h3 id="15a4c992-a19a-80bf-8459-c65d6f5770dc" class="">Cross-tab / CUBE / Roll Up</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8087-89fd-d895036ae435" class="code"><code class="language-Python">df = spark.createDataFrame([(1, 11), (1, 11), (3, 10), (4, 8), (4, 8)], [“c1”, “c2”])
df.crosstab(“c1”, “c2”).show()
# exmaple output in below table</code></pre><table id="15a4c992-a19a-80bc-9ccf-c5af4a7da476" class="simple-table"><tbody><tr id="15a4c992-a19a-801a-80fc-d236e96995a5"><td id="yrKs" class=""><strong>c1_c2</strong></td><td id="lCXF" class=""><strong>10</strong></td><td id="XzQp" class=""><strong>11</strong></td><td id="rdD&gt;" class=""><strong>8</strong></td></tr><tr id="15a4c992-a19a-80d9-8f80-fa8d47600168"><td id="yrKs" class="">1</td><td id="lCXF" class="">0</td><td id="XzQp" class="">2</td><td id="rdD&gt;" class="">0</td></tr><tr id="15a4c992-a19a-80d2-8543-e2dcf0c4887b"><td id="yrKs" class="">3</td><td id="lCXF" class="">1</td><td id="XzQp" class="">0</td><td id="rdD&gt;" class="">0</td></tr><tr id="15a4c992-a19a-8073-a29a-f2f06afa5e6c"><td id="yrKs" class="">4</td><td id="lCXF" class="">0</td><td id="XzQp" class="">0</td><td id="rdD&gt;" class="">2</td></tr></tbody></table><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80ad-a568-f5bfefcba34b" class="code"><code class="language-Python"># CUBE
df = spark.createDataFrame([(“LLC”, “XYZ”), (“INC”, “ABC”)], schema = [“status”, “company”])
df.cube(“company”, df.status).count().show()</code></pre><table id="15a4c992-a19a-80ae-a5eb-ce38995cbbb5" class="simple-table"><tbody><tr id="15a4c992-a19a-8046-b4f9-e537e889c69f"><td id="D:PI" class=""><strong>company</strong></td><td id="fU}A" class=""><strong>status</strong></td><td id="YvM~" class=""><strong>count</strong></td></tr><tr id="15a4c992-a19a-80a9-be80-f37b9fe37c70"><td id="D:PI" class="">XYZ</td><td id="fU}A" class="">LLC</td><td id="YvM~" class="">1</td></tr><tr id="15a4c992-a19a-80bf-a48d-cdd2a3e98d23"><td id="D:PI" class="">XYZ</td><td id="fU}A" class="">NULL</td><td id="YvM~" class="">1</td></tr><tr id="15a4c992-a19a-8061-89f2-f225fe483a00"><td id="D:PI" class="">ABC</td><td id="fU}A" class="">NULL</td><td id="YvM~" class="">1</td></tr><tr id="15a4c992-a19a-80d2-8b46-ef5917fa6edc"><td id="D:PI" class="">ABC</td><td id="fU}A" class="">INC</td><td id="YvM~" class="">1</td></tr><tr id="15a4c992-a19a-8069-88c8-e2fb3deb0886"><td id="D:PI" class="">NULL</td><td id="fU}A" class="">LLC</td><td id="YvM~" class="">1</td></tr><tr id="15a4c992-a19a-806d-bc5a-d944e760ab2a"><td id="D:PI" class="">NULL</td><td id="fU}A" class="">INC</td><td id="YvM~" class="">1</td></tr><tr id="15a4c992-a19a-8061-9f81-c3c61bc24ce9"><td id="D:PI" class="">NULL</td><td id="fU}A" class="">NULL</td><td id="YvM~" class="">2</td></tr></tbody></table><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8043-a142-ddc97a6ab536" class="code"><code class="language-Python">df = spark.createDataFrame([(“LLC”, “XYZ”), (“INC”, “ABC”)], schema = [“status”, “company”])
df.rollup(“company”, df.status).count().show()</code></pre><table id="15a4c992-a19a-8003-811b-c74bab44a22d" class="simple-table"><tbody><tr id="15a4c992-a19a-80ed-81c5-eaf2eec290c1"><td id="Imue" class=""><strong>company</strong></td><td id="FcdJ" class=""><strong>status</strong></td><td id="kW{;" class=""><strong>count</strong></td></tr><tr id="15a4c992-a19a-80b6-8d80-cf7516d9ced3"><td id="Imue" class="">XYZ</td><td id="FcdJ" class="">LLC</td><td id="kW{;" class="">1</td></tr><tr id="15a4c992-a19a-8000-a72d-ccdd4c856585"><td id="Imue" class="">XYZ</td><td id="FcdJ" class="">NULL</td><td id="kW{;" class="">1</td></tr><tr id="15a4c992-a19a-803a-9afd-c736ddd80556"><td id="Imue" class="">ABC</td><td id="FcdJ" class="">NULL</td><td id="kW{;" class="">1</td></tr><tr id="15a4c992-a19a-80f8-8860-c3bb4597be8e"><td id="Imue" class="">ABC</td><td id="FcdJ" class="">INC</td><td id="kW{;" class="">1</td></tr><tr id="15a4c992-a19a-80d7-9ddc-c3afa4074788"><td id="Imue" class="">NULL</td><td id="FcdJ" class="">NULL</td><td id="kW{;" class="">2</td></tr></tbody></table><h3 id="15a4c992-a19a-808e-b5c4-cec00cc9b280" class="">Statistical Analysis</h3><p id="15a4c992-a19a-8047-a63a-f47e87ebd00a" class="">Calculate the correlation (Pearson) of the values in two columns of a DataFrame</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-808b-9b31-d5fd69f78a85" class="code"><code class="language-Python">df = spark.createDataFrame([(1, 12), (10, 1), (19, 8)], [“c1”, “c2”])
df.corr(“c1”, “c2”)  #correlation
&gt;&gt; -0.3592106040535498

df.cov(“c1”, “c2”)   #covariance
&gt;&gt; -18.0</code></pre><h3 id="15a4c992-a19a-8062-826f-fee617377749" class="">UDFs (User Defined Functions)</h3><ul id="15a4c992-a19a-800a-86c3-fdebac51b19a" class="bulleted-list"><li style="list-style-type:disc">Convert a python function to PySpark UDF</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8000-9490-fd55d8fc3fff" class="code"><code class="language-Python">upperCaseUDF = udf(lambda z: upperCase(z))
df.withColumn(&#x27;Capitalized&#x27;, upperCaseUDF(col(&#x27;name&#x27;))).show(truncate=False)</code></pre><h2 id="15a4c992-a19a-800a-9915-f37a47a11d04" class="">Data Ops</h2><h3 id="15a4c992-a19a-806f-928f-ee1b7d02dda7" class="">How data arrive</h3><ul id="15a4c992-a19a-80d7-af43-ffbea1b2a0a7" class="bulleted-list"><li style="list-style-type:disc"><em><strong>Push</strong></em>: To some location<ol type="1" id="15a4c992-a19a-8017-9ec9-f7b1934bf5a5" class="numbered-list" start="1"><li>Files appear in a staging folder, e.g. in aws S3</li></ol><ol type="1" id="15a4c992-a19a-80f3-8d7d-f46dae87bc3c" class="numbered-list" start="2"><li>Tables get populated in a data warehouse, e.g. in BigQuery</li></ol><ol type="1" id="15a4c992-a19a-80aa-b649-c88ab238681b" class="numbered-list" start="3"><li>A software system API provides the data<ul id="15a4c992-a19a-803f-acb6-f14c66cfd837" class="bulleted-list"><li style="list-style-type:disc">E.g. publish-subscribe (pub-sub) or message queueing systems (more later)</li></ul></li></ol></li></ul><ul id="15a4c992-a19a-8068-9ef5-c6ecdbe259a5" class="bulleted-list"><li style="list-style-type:disc"><strong>Pull</strong>: Extract data from some source<ol type="1" id="15a4c992-a19a-8026-b51d-fbc89a5dbb11" class="numbered-list" start="1"><li>Via scheduling software (eg. cron job)</li></ol><ol type="1" id="15a4c992-a19a-800f-b78e-e66a6f1cbd9f" class="numbered-list" start="2"><li>On receipt of an event, e.g. from pub-sub</li></ol><ol type="1" id="15a4c992-a19a-8032-a149-ddea0ab2e3fe" class="numbered-list" start="3"><li>From an API</li></ol><ol type="1" id="15a4c992-a19a-80d0-a00b-c6f702e0461b" class="numbered-list" start="4"><li>Or slack or email</li></ol><ol type="1" id="15a4c992-a19a-8032-b903-c0477568bcff" class="numbered-list" start="5"><li>Or … really anything</li></ol></li></ul><h3 id="15a4c992-a19a-8053-85dd-c1a1620d86a3" class="">What to do upon arrival</h3><p id="15a4c992-a19a-809c-843c-fd9e52cbcd6f" class="">Many possible options, and often you need to do all of them:</p><ul id="15a4c992-a19a-80f0-b945-cb8f9df85027" class="bulleted-list"><li style="list-style-type:disc">Run data quality (DQ) tests<ol type="1" id="15a4c992-a19a-80f7-8304-c46099081b29" class="numbered-list" start="1"><li>E.g. check the new data has expected schema, integrity constraints, data cleaning checks</li></ol></li></ul><ul id="15a4c992-a19a-80ac-a68e-c5ec6e01a00a" class="bulleted-list"><li style="list-style-type:disc">Load the data somewhere (a data warehouse or a curated set of directories)<ol type="1" id="15a4c992-a19a-8013-917c-f7bc8ff21ca9" class="numbered-list" start="1"><li>Run transformation logic</li></ol></li></ul><ul id="15a4c992-a19a-806d-9b45-fafd14bdeac9" class="bulleted-list"><li style="list-style-type:disc">Log metadata (eg. Data Lineage): track what arrived from whom, where, when</li></ul><ul id="15a4c992-a19a-800b-a453-e685ac1c0fb4" class="bulleted-list"><li style="list-style-type:disc">“Real-time” analysis (eg. run rules / models for fraud use cases)</li></ul><ul id="15a4c992-a19a-80af-afb3-dbe4d8cc8894" class="bulleted-list"><li style="list-style-type:disc">Pass along errors/info to humans (more later)<ol type="1" id="15a4c992-a19a-80df-afdf-d5a13c2d659f" class="numbered-list" start="1"><li>E.g. pagerduty alert to on-call engineer / scientist</li></ol></li></ul><ul id="15a4c992-a19a-8046-af66-c3e61f4950db" class="bulleted-list"><li style="list-style-type:disc">Most data will have issues and is not “clean”<ol type="1" id="15a4c992-a19a-80f5-9909-c127d6f15cf8" class="numbered-list" start="1"><li>Can’t use simple SQL-centric ELT</li></ol></li></ul><ul id="15a4c992-a19a-8093-b33c-e22142902974" class="bulleted-list"><li style="list-style-type:disc">Data pipelines involve different systems for different pieces of the puzzle:<ol type="1" id="15a4c992-a19a-80bf-b089-c7205792dcbf" class="numbered-list" start="1"><li><strong>Derived data</strong>: Preparation/Cleaning/Transformation systems, Entity Resolution/Standardization systems</li></ol><ol type="1" id="15a4c992-a19a-80ec-aa00-c05fa82c6067" class="numbered-list" start="2"><li><strong>Data Structure Maintenance</strong>: Indexes, Materialized View updates, Data Cube updates</li></ol><ol type="1" id="15a4c992-a19a-80fa-ba5c-cad13c2d321c" class="numbered-list" start="3"><li><strong>Data Security/Compliance Systems</strong>: “masking” private data, encryption</li></ol><ol type="1" id="15a4c992-a19a-8057-9847-e4316dbd768e" class="numbered-list" start="4"><li><strong>Metadata storage</strong>: catalogs, data lineage (tracking where data came from and what happened)</li></ol><ol type="1" id="15a4c992-a19a-8029-807a-ffb342d7ed21" class="numbered-list" start="5"><li>And so on, and so on.</li></ol></li></ul><ul id="15a4c992-a19a-8020-a243-c6d81af012a1" class="bulleted-list"><li style="list-style-type:disc">We need to automate these many tasks/systems and their handoffs<ol type="1" id="15a4c992-a19a-80b9-bb3a-f413998815d3" class="numbered-list" start="1"><li>And deal with exceptions, human interventions/approvals, etc.</li></ol></li></ul><h3 id="15a4c992-a19a-80ca-b872-d09eea8dac4a" class="">How to automate</h3><ul id="15a4c992-a19a-806e-a854-f2dd258550fb" class="bulleted-list"><li style="list-style-type:disc"><strong>Workflow Systems</strong>: manage processes (human or software)<ol type="1" id="15a4c992-a19a-8084-b636-e2b93be08a7d" class="numbered-list" start="1"><li>With process dependencies (order of activity)</li></ol><ol type="1" id="15a4c992-a19a-804c-aa4b-d99e85b1c986" class="numbered-list" start="2"><li>Activiti, Airflow, BPL, Luigi, …</li></ol></li></ul><ul id="15a4c992-a19a-80a4-bc1c-c777399e680b" class="bulleted-list"><li style="list-style-type:disc"><strong>Dataflow Systems</strong>: manage data movement through operations (software)<ol type="1" id="15a4c992-a19a-80e2-af39-e48a885bbb42" class="numbered-list" start="1"><li>Handle data dependencies (inputs/outputs)</li></ol><ol type="1" id="15a4c992-a19a-8072-b1de-fb1db06aa3cd" class="numbered-list" start="2"><li>Spark</li></ol><ol type="1" id="15a4c992-a19a-8024-b31f-c6874518c148" class="numbered-list" start="3"><li>dbt + SQL (more later)</li></ol><ol type="1" id="15a4c992-a19a-80e8-99ad-f4918d4a5dba" class="numbered-list" start="4"><li>Flink, Dataflow, etc.</li></ol></li></ul><ul id="15a4c992-a19a-80d2-b050-fa7c386f62a2" class="bulleted-list"><li style="list-style-type:disc"><strong>Messaging/Queueing/Eventing</strong>: hand off data reliably from one system to another<ol type="1" id="15a4c992-a19a-80d5-b79f-eb1a4eef2b73" class="numbered-list" start="1"><li>Kafka, RabbitMQ, AWS SQS, MSMQ, MQSeries, …</li></ol></li></ul><ul id="15a4c992-a19a-8067-9743-db7538faa702" class="bulleted-list"><li style="list-style-type:disc"><strong>Practically</strong>: Many times you will use combinations of these, and it can be a matter of taste/experience which to use where.<ol type="1" id="15a4c992-a19a-8047-9a74-d0066eb6eb26" class="numbered-list" start="1"><li>You’ll learn it “on the street…”</li></ol><ol type="1" id="15a4c992-a19a-80eb-8876-c009fd89326d" class="numbered-list" start="2"><li>Or, you’ll subscribe to company “religion” and be part of many debates</li></ol></li></ul><h3 id="15a4c992-a19a-80fb-a5ac-f2690c7ad2f6" class="">Workflow Systems - Airflow</h3><ul id="15a4c992-a19a-8093-be96-ed96546cecb3" class="bulleted-list"><li style="list-style-type:disc">Open-source (under Apache) platform for developing, scheduling, and monitoring batch-oriented workflows.</li></ul><ul id="15a4c992-a19a-80ad-b1a0-c11cb81b7e8d" class="bulleted-list"><li style="list-style-type:disc">Airflow’s extensible Python framework enables you to build workflows connecting with virtually any technology.</li></ul><ul id="15a4c992-a19a-80a5-8fca-f0528be01a0e" class="bulleted-list"><li style="list-style-type:disc">A web interface helps manage the state of your workflows. Airflow is deployable in many ways, varying from a single process on your laptop to a distributed setup to support even the biggest workflows.</li></ul><ul id="15a4c992-a19a-80c0-b8cb-f21dae309fa6" class="bulleted-list"><li style="list-style-type:disc">DAGs<ul id="15a4c992-a19a-8097-a457-edb0d87c6da6" class="bulleted-list"><li style="list-style-type:circle">Directed Acyclic Graph (DAG) is the core concept of Airflow, collecting Tasks together, organized with dependencies and relationships to say how they should run.</li></ul><ul id="15a4c992-a19a-8068-8360-e378af762372" class="bulleted-list"><li style="list-style-type:circle">Below example defines four Tasks - A, B, C, and D - and dictates the order in which they have to run, and which tasks depend on what others.<ol type="1" id="15a4c992-a19a-803f-82ca-d03825baba54" class="numbered-list" start="1"><li>It will also say how often to run the DAG - maybe “every 5 minutes starting tomorrow”, or “every day since January 1st, 2020” and what to do if it fails<figure id="15a4c992-a19a-80fb-b3ad-fb05d6f73673" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25882.09.18.png"><img style="width:363.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258A%25E5%258D%25882.09.18.png"/></a></figure></li></ol></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-800b-a04c-ececf2186a35" class="code"><code class="language-Python"># airflow example
from datetime import datetime
from airflow import DAG
from airflow.decorators import task
from airflow.operators.bash import BashOperator

# A DAG represents a workflow, a collection of tasks
with DAG(dag_id=&quot;demo&quot;, start_date=datetime(2022, 1, 1), schedule=&quot;0 0 * * *&quot;) as dag:

    # Tasks are represented as operators
    hello = BashOperator(task_id=&quot;hello&quot;, bash_command=&quot;echo hello&quot;)
    @task()

    def airflow():
        print(&quot;airflow&quot;)

    # Set dependencies between tasks
    hello &gt;&gt; airflow()</code></pre></li></ul><ul id="15a4c992-a19a-8065-be14-d32d50be5847" class="bulleted-list"><li style="list-style-type:disc">Airflow Limitations<ul id="15a4c992-a19a-801b-b514-f3a1731ed81f" class="bulleted-list"><li style="list-style-type:circle">Airflow was built for <em><strong>finite batch workflows</strong></em>.<ol type="1" id="15a4c992-a19a-8029-86b2-dcdcb295364c" class="numbered-list" start="1"><li>While the CLI and REST API do allow triggering workflows, Airflow was not built for infinitely running event-based workflows. Airflow is not a streaming solution.</li></ol></li></ul><ul id="15a4c992-a19a-80e6-af11-d27dc8d11b8b" class="bulleted-list"><li style="list-style-type:circle">However, a streaming system such as Apache Kafka is often seen working together with Apache Airflow.<ol type="1" id="15a4c992-a19a-80e6-a2bf-e870d94c3a26" class="numbered-list" start="1"><li>Kafka can be used for ingestion and processing in real-time, event data is written to a storage location, and Airflow periodically starts a workflow processing a batch of data.</li></ol></li></ul></li></ul><h3 id="15a4c992-a19a-80f9-a375-fa888fd328d4" class="">Workflow Systems - Kafka</h3><ul id="15a4c992-a19a-8042-809b-c5b35c1edca6" class="bulleted-list"><li style="list-style-type:disc">Kafka is an open-source (under Apache) distributed <em><strong>event streaming platform </strong></em>used by thousands of companies for high-performance data pipelines, streaming analytics, data integration, and mission-critical applications.</li></ul><ul id="15a4c992-a19a-8000-b297-e81e4c663631" class="bulleted-list"><li style="list-style-type:disc">Technically speaking, event streaming is the practice of capturing data in real-time from event sources like databases, sensors, mobile devices, cloud services, and software applications in the form of streams of events;<ol type="1" id="15a4c992-a19a-8050-b13c-d7f2e0bc74f4" class="numbered-list" start="1"><li>storing these event streams durably for later retrieval; manipulating, processing, and reacting to the event streams in real-time as well as retrospectively; and routing the event streams to different destination technologies as needed</li></ol><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-8094-9beb-d610524c0b96" class="code"><code class="language-Python"># Kafka Example
# Get Docker image:
$ docker pull apache/kafka:3.9.0
# Run Docker container:
$ docker run -p 9092:9092 apache/kafka:3.9.0
# Create a kafka “topic”
$ bin/kafka-topics.sh --create --topic quickstart-events --bootstrap-server localhost:9092
# Write “events” to the “topic”
$ bin/kafka-console-producer.sh --topic quickstart-events --bootstrap-server localhost:9092
# Read your data
$ bin/kafka-console-consumer.sh --topic quickstart-events --from-beginning --bootstrap-server localhost:9092</code></pre></li></ul><h3 id="15a4c992-a19a-8084-a8fa-cf56b87cdf31" class="">How to maintain quality and handle exceptions</h3><ul id="15a4c992-a19a-80a4-a2a9-e7179bc97447" class="bulleted-list"><li style="list-style-type:disc">Data Quality and Software Quality share similarities, but also have many differences.<ol type="1" id="15a4c992-a19a-802d-98cc-e61ead52eaf3" class="numbered-list" start="1"><li>The notion of a “test” is now data-centric:<ul id="15a4c992-a19a-80e6-8ae9-e48072805cd0" class="bulleted-list"><li style="list-style-type:disc">logical (schemas, constraints, etc)</li></ul><ul id="15a4c992-a19a-8053-8ebb-f5436301144a" class="bulleted-list"><li style="list-style-type:disc">statistical (outliers, distributional drift)</li></ul></li></ol></li></ul><ul id="15a4c992-a19a-80ba-aee1-e8a64912cbd4" class="bulleted-list"><li style="list-style-type:disc">However, SW Eng DevOps principles are getting more play in DataOps pipelines.<ol type="1" id="15a4c992-a19a-8020-b9a3-e603afb948c0" class="numbered-list" start="1"><li>Test-driven development</li></ol><ol type="1" id="15a4c992-a19a-8083-8334-d50a00a68825" class="numbered-list" start="2"><li>Continuous Integration / Continuous Deployment</li></ol></li></ul><ul id="15a4c992-a19a-80d8-9a6a-d69bf0d9da04" class="bulleted-list"><li style="list-style-type:disc">Let’s dive into dbt as an example tool for data ops</li></ul><h3 id="15a4c992-a19a-80f0-844f-f1c1bce5a202" class="">Workflow Systems - dbt (data build tool)</h3><p id="15a4c992-a19a-809a-b1c5-e4b25c14a002" class="">Emerging as an open source solution for data</p><ul id="15a4c992-a19a-8037-9599-daa2189ef651" class="bulleted-list"><li style="list-style-type:disc"><strong>Centralized: dbt centralizes your business logic, making collaboration and updates easy. It transforms your data inside your cloud data platform — never moving it.</strong></li></ul><ul id="15a4c992-a19a-802b-ae3a-eab07225877a" class="bulleted-list"><li style="list-style-type:disc"><strong>Modular: dbt breaks business logic into modular chunks that are easy to build on. Built-in testing ensures data quality, while documentation provides shared context.</strong></li></ul><ul id="15a4c992-a19a-8040-803a-fe207fad323b" class="bulleted-list"><li style="list-style-type:disc"><strong>Open: </strong>dbt is open-source and compiles directly into transparent SQL. It&#x27;s supported by a thriving and growing community.<figure id="15a4c992-a19a-8068-b28d-d9ab08f9916c" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25881.08.37.png"><img style="width:525.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25881.08.37.png"/></a></figure></li></ul><ul id="15a4c992-a19a-80ce-94d6-c119201857e0" class="bulleted-list"><li style="list-style-type:disc"><strong>dbt is a commercial open-source project.</strong><ol type="1" id="15a4c992-a19a-808e-93a7-dfd0ce5c04cd" class="numbered-list" start="1"><li><strong>free to use the CLI (command-line interface, i.e., terminal) version</strong></li></ol><ol type="1" id="15a4c992-a19a-80a8-9eb8-e6762dcd6bd5" class="numbered-list" start="2"><li><strong>pay dbt labs for cloud-based scheduling, CI-git integration, GUI</strong></li></ol></li></ul><ul id="15a4c992-a19a-8064-aab1-e62265f39372" class="bulleted-list"><li style="list-style-type:disc"><strong>A declarative specification framework for:</strong><ol type="1" id="15a4c992-a19a-80c3-9fb8-df7bdbc156f4" class="numbered-list" start="1"><li><strong>pipelines of ELT-style SQL transformations</strong></li></ol><ol type="1" id="15a4c992-a19a-8041-b8e3-db6e19621e97" class="numbered-list" start="2"><li><strong>data quality tests</strong></li></ol></li></ul><ul id="15a4c992-a19a-8051-85ca-e6d252487fb7" class="bulleted-list"><li style="list-style-type:disc"><strong>This tool is very recent</strong><ol type="1" id="15a4c992-a19a-8018-b9d2-ea467b17ad5d" class="numbered-list" start="1"><li><strong>≤v0.X in 2016, then v1.0 in 2021</strong></li></ol><ol type="1" id="15a4c992-a19a-8091-a8cf-f4c0180ed7fd" class="numbered-list" start="2"><li><strong>various other companies standardize on dbt format (e.g., Trifacta)</strong></li></ol></li></ul><ul id="15a4c992-a19a-8062-8f2a-dfa61ba99f39" class="bulleted-list"><li style="list-style-type:disc"><strong>In dbt, we work with </strong><em><strong>models</strong></em><strong>, which is a sql file with a select statement.</strong><ol type="1" id="15a4c992-a19a-809c-a5ab-c2fe91154d4a" class="numbered-list" start="1"><li><strong>These models can depend on other models,</strong></li></ol><ol type="1" id="15a4c992-a19a-80c0-8942-daf029f90c52" class="numbered-list" start="2"><li><strong>have tests defined on them,</strong></li></ol><ol type="1" id="15a4c992-a19a-80c1-a7fb-d0f2c45e54a1" class="numbered-list" start="3"><li><strong>and can be created as tables or views.</strong></li></ol></li></ul><ul id="15a4c992-a19a-807b-a5f8-e229cefda704" class="bulleted-list"><li style="list-style-type:disc"><strong>The names of models created by dbt are their file names.</strong><ol type="1" id="15a4c992-a19a-800d-ae9a-d4b1bc820eac" class="numbered-list" start="1"><li><strong>dbt uses the file names and its references in other files(aka models) to automatically define the data flow.</strong></li></ol></li></ul><ul id="15a4c992-a19a-80bf-a031-d308425f0f00" class="bulleted-list"><li style="list-style-type:disc"><strong>We can define tests to be run on processed data using dbt. Dbt allows us to create 2 types of tests, they are</strong><ol type="1" id="15a4c992-a19a-8010-a06b-c9bb963d80a1" class="numbered-list" start="1"><li><strong>Generic tests: Unique, not_null, accepted_values, and relationships tests per column defined in YAML files. E.g. see core.yml</strong></li></ol><ol type="1" id="15a4c992-a19a-803d-acf5-dba7914696a6" class="numbered-list" start="2"><li><strong>Bespoke (aka one-off) tests</strong>: Sql scripts created under the tests folder. They can be any query. They are successful if the sql scripts do not return any rows, else unsuccessful.</li></ol></li></ul><ul id="15a4c992-a19a-8045-82a9-e36f1cd7d3c9" class="bulleted-list"><li style="list-style-type:disc">A dbt project has several key components.<ul id="15a4c992-a19a-805c-bfd1-f71e4d3439c0" class="bulleted-list"><li style="list-style-type:circle"><strong>models: SQL transformations</strong><ol type="1" id="15a4c992-a19a-806c-bfc5-f380e7fd1f9e" class="numbered-list" start="1"><li><strong>models/*.sql: 1 query per file</strong></li></ol></li></ul><ul id="15a4c992-a19a-80ff-a1d8-ca28e88b90d8" class="bulleted-list"><li style="list-style-type:circle"><strong>tests</strong><ol type="1" id="15a4c992-a19a-80d2-a13b-dca028f9d7c4" class="numbered-list" start="1"><li><strong>models/*.yml schema integrity tests</strong><ul id="15a4c992-a19a-8047-8095-f5f82243a7d8" class="bulleted-list"><li style="list-style-type:disc"><strong>specified in YAML (JSON analog, but more readable)</strong></li></ul></li></ol><ol type="1" id="15a4c992-a19a-80a3-a3c3-f994f7a5f058" class="numbered-list" start="2"><li><strong>tests/*.sql: 1 query per file</strong><ul id="15a4c992-a19a-8022-9c27-f1b15919393a" class="bulleted-list"><li style="list-style-type:disc"><strong>Passes if it returns 0 rows</strong></li></ul></li></ol></li></ul><ul id="15a4c992-a19a-8022-9996-d049eaeb6663" class="bulleted-list"><li style="list-style-type:circle"><strong>dbt_project.yml</strong><ol type="1" id="15a4c992-a19a-8038-999b-c012ec0187bb" class="numbered-list" start="1"><li><strong>required project configuration file, with lots of boilerplate</strong></li></ol></li></ul><ul id="15a4c992-a19a-801e-a9bc-e973dcbc60fb" class="bulleted-list"><li style="list-style-type:circle"><strong>models/*.yml also contains optional metadata</strong></li></ul></li></ul><ul id="15a4c992-a19a-8006-90b7-c96675ea4d61" class="bulleted-list"><li style="list-style-type:disc">source() / ref()<ul id="15a4c992-a19a-80c6-83e7-ccc44ba70d3a" class="bulleted-list"><li style="list-style-type:circle"><strong>We can use eg. {{ source (‘namespace’, ‘table’) }} to reference other tables</strong><ol type="1" id="15a4c992-a19a-805a-929c-f2362d50d942" class="numbered-list" start="1"><li><strong>models can reference other tables with a layer of indirection.</strong></li></ol></li></ul><ul id="15a4c992-a19a-80a7-851e-c8626a271da4" class="bulleted-list"><li style="list-style-type:circle"><strong>Models can also reference other models</strong><ol type="1" id="15a4c992-a19a-80e6-b9ed-f8cf761c05ea" class="numbered-list" start="1"><li><strong>with ref: {{ ref(&#x27;induced_hof_ca&#x27;) }}</strong></li></ol><ol type="1" id="15a4c992-a19a-805b-b7a2-c94d36473052" class="numbered-list" start="2"><li><strong>Specifying ref dependencies is how dbt models implicitly specify a pipeline of models querying models.</strong></li></ol></li></ul><ul id="15a4c992-a19a-80ea-9be5-f9a2c7cd2872" class="bulleted-list"><li style="list-style-type:circle"><strong>Note: cannot have cycles of ref dependencies, i.e., the graph representing all refs must be a DAG</strong></li></ul></li></ul><ul id="15a4c992-a19a-804c-86b7-fe3328b8917f" class="bulleted-list"><li style="list-style-type:disc">dbt test<ul id="15a4c992-a19a-8057-8804-ee08d99d8970" class="bulleted-list"><li style="list-style-type:circle"><strong>models/*.yml schema integrity tests</strong><ol type="1" id="15a4c992-a19a-80a1-8378-ef07f02e50b7" class="numbered-list" start="1"><li><strong>specified in YAML (JSON analog, but more readable)</strong></li></ol></li></ul><ul id="15a4c992-a19a-80f9-a064-eb480c2de765" class="bulleted-list"><li style="list-style-type:circle"><strong>Like SQL DDL constraints, but mid-pipeline!</strong><ol type="1" id="15a4c992-a19a-80b1-9982-ea5d2d61f147" class="numbered-list" start="1"><li><strong>unique, not_null</strong></li></ol><ol type="1" id="15a4c992-a19a-807f-a074-dd6fc7c26c45" class="numbered-list" start="2"><li><strong>Accepted_values</strong></li></ol><ol type="1" id="15a4c992-a19a-80c2-849d-f8d3a1b1007a" class="numbered-list" start="3"><li><strong>relationships</strong></li></ol></li></ul><ul id="15a4c992-a19a-8007-b5c0-e0954e6f915f" class="bulleted-list"><li style="list-style-type:circle"><strong>Caveats:</strong><ol type="1" id="15a4c992-a19a-803b-a8f6-e99c69431171" class="numbered-list" start="1"><li><strong>Single-column by default!</strong></li></ol><ol type="1" id="15a4c992-a19a-8012-b003-f8dc3f371535" class="numbered-list" start="2"><li>But can be extended for multi-column</li></ol></li></ul></li></ul><ul id="15a4c992-a19a-8023-a90d-db0fb442ef68" class="bulleted-list"><li style="list-style-type:disc">Continuous Integration (CI): the practice of merging all developers&#x27; working copies to a shared mainline several times a day [wikipedia]<ol type="1" id="15a4c992-a19a-80fc-ba34-c79feed83b96" class="numbered-list" start="1"><li>Make sure every code checkin forces dbt test to run! Example workflows:<ul id="15a4c992-a19a-8047-9d79-dfa72cb7f9cf" class="bulleted-list"><li style="list-style-type:disc">Force a test at client prior to github commit with commit hooks</li></ul><ul id="15a4c992-a19a-8094-8e3c-de2a207c5aa4" class="bulleted-list"><li style="list-style-type:disc">Or, pay for dbt labs CI integration of dbt with github</li></ul><ul id="15a4c992-a19a-8081-afb1-f0b261ed04a5" class="bulleted-list"><li style="list-style-type:disc">Or, you can use a github-integrated CI tool like Travis/Jenkins</li></ul></li></ol></li></ul><ul id="15a4c992-a19a-80b5-aa27-d0f68b0d94d5" class="bulleted-list"><li style="list-style-type:disc">In all cases, you need to ensure database connectivity.<ol type="1" id="15a4c992-a19a-80da-ba4f-cf79a397ffe5" class="numbered-list" start="1"><li>Standard CI/CD (continuous development) has code go through 2 or 3 different deployments.</li></ol><ol type="1" id="15a4c992-a19a-8089-a428-e8c939be4ca9" class="numbered-list" start="2"><li>Dev (Development) → Test (or CI) → Prod (Production)</li></ol></li></ul><h3 id="15a4c992-a19a-8097-b07c-cc881959d7db" class="">Containerization: Docker</h3><ul id="15a4c992-a19a-8029-88e3-cf916bae0c4d" class="bulleted-list"><li style="list-style-type:disc">“<em>Docker is a tool that is used to automate the deployment of applications in lightweight containers so that applications can work efficiently in different environments in isolation.</em>”</li></ul><ul id="15a4c992-a19a-800b-93d9-c7c52546d3f7" class="bulleted-list"><li style="list-style-type:disc">You can run Docker on any machine, and you can think of it as running a separate OS (not exactly, but close enough) on the machine.<ol type="1" id="15a4c992-a19a-8070-8f9c-fd3ea6a40753" class="numbered-list" start="1"><li>Docker provides the ability to replicate the OS and its packages exactly (e.g., Python modules) across machines so that you don’t run into “hey, that worked on my computer” type issues</li></ol></li></ul><ul id="15a4c992-a19a-80e6-8ce6-f5636b77e644" class="bulleted-list"><li style="list-style-type:disc">Most data projects use Docker to set up the data infra locally (and often in production)<figure id="15a4c992-a19a-8025-8050-c96ba4e2c0df" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25881.34.35.png"><img style="width:525.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25881.34.35.png"/></a></figure><figure id="15a4c992-a19a-8095-9451-c4bbed89a891" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25881.36.10.png"><img style="width:525.984375px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25881.36.10.png"/></a></figure></li></ul><h2 id="15a4c992-a19a-8023-9def-feeffdd58a01" class="">Data Prep</h2><ul id="15a4c992-a19a-806c-ac0d-d01cd56511fe" class="bulleted-list"><li style="list-style-type:disc">Data preparation is a very broad subject,<ul id="15a4c992-a19a-8049-90a2-db74d2e3ae20" class="bulleted-list"><li style="list-style-type:circle">Covering everything from data models to statistical assessments of data to string algorithms to scalable data processing.</li></ul><ul id="15a4c992-a19a-8033-81e0-e5c5bc9b9d35" class="bulleted-list"><li style="list-style-type:circle">In some sense, most of Data Engineering - perhaps most of data science - boils down to data prep.</li></ul></li></ul><h3 id="15a4c992-a19a-8073-bff1-c7947289d308" class="">Data Unboxing</h3><ul id="15a4c992-a19a-807e-b41a-d432e89032bc" class="bulleted-list"><li style="list-style-type:disc">Check data</li></ul><ul id="15a4c992-a19a-803e-8af7-c9f6628cdba1" class="bulleted-list"><li style="list-style-type:disc">Check data types</li></ul><ul id="15a4c992-a19a-8044-a199-f3d9408b2737" class="bulleted-list"><li style="list-style-type:disc">Do initial transformations as make sense</li></ul><ul id="15a4c992-a19a-8006-910d-d9a4bb8e70c0" class="bulleted-list"><li style="list-style-type:disc">Do initial visualizations as make sense</li></ul><h3 id="15a4c992-a19a-800d-ba44-fbb68aa91384" class="">Structural Transformations</h3><ul id="15a4c992-a19a-807c-9768-d7292c4c8b27" class="bulleted-list"><li style="list-style-type:disc">Within rectangular data, there are several structural transformations we can do. From earlier:<ul id="15a4c992-a19a-8061-b7b9-ffec4a33a066" class="bulleted-list"><li style="list-style-type:circle">Matrix → Relational model works.</li></ul><ul id="15a4c992-a19a-805c-817a-efdc1e430830" class="bulleted-list"><li style="list-style-type:circle">Relation model → Matrix sometimes works.</li></ul></li></ul><ul id="15a4c992-a19a-8089-915c-fe4df4e2b950" class="bulleted-list"><li style="list-style-type:disc">In pandas, use pivot, &quot;unpivot&quot; (melt)</li></ul><h3 id="15a4c992-a19a-80c4-be09-d4c6c0856126" class="">Rectangular Data Models</h3><table id="15a4c992-a19a-8038-b3f9-d36a03d0675a" class="simple-table"><tbody><tr id="15a4c992-a19a-8068-ae98-ce3b006b4df3"><td id="xvDd" class=""><strong>Feature</strong></td><td id="]dzU" class=""><strong>Matrix</strong></td><td id="?TFz" class=""><strong>Relation</strong> (Relational Table)</td><td id="Wmq~" class=""><strong>DataFrame</strong></td></tr><tr id="15a4c992-a19a-8005-9614-da6171cc2156"><td id="xvDd" class=""><strong>Definition</strong></td><td id="]dzU" class="">A two-dimensional array with uniform data type.</td><td id="?TFz" class="">A structured table of rows and columns following relational database principles.</td><td id="Wmq~" class="">A two-dimensional, mutable, and heterogeneous data structure used in programming (e.g., pandas, R).</td></tr><tr id="15a4c992-a19a-80e2-9406-dd120d7bb9e1"><td id="xvDd" class=""><strong>Data Types</strong></td><td id="]dzU" class="">All elements must be of the same data type (e.g., all integers, all floats).</td><td id="?TFz" class="">Columns can have different data types, but all values in a column must share the same type.</td><td id="Wmq~" class="">Supports heterogeneous data types (different types for different columns).</td></tr><tr id="15a4c992-a19a-80a0-bb34-f85ae7b42cb7"><td id="xvDd" class=""><strong>Structure</strong></td><td id="]dzU" class="">Fixed rows and columns; purely numerical or textual.</td><td id="?TFz" class="">Organized as rows and columns, where each row represents a tuple and each column represents an attribute.</td><td id="Wmq~" class="">Rows and columns; similar to a relational table but more flexible.</td></tr><tr id="15a4c992-a19a-806b-be45-d84072f095e8"><td id="xvDd" class=""><strong>Indexing</strong></td><td id="]dzU" class="">Uses numerical indices (e.g., row and column numbers).</td><td id="?TFz" class="">No inherent index, but primary keys or unique identifiers can serve as row indices.</td><td id="Wmq~" class="">Built-in indexing (row labels and column names) for easy data access and manipulation.</td></tr><tr id="15a4c992-a19a-803c-a003-d35b5f604251"><td id="xvDd" class=""><strong>Mutability</strong></td><td id="]dzU" class="">Usually immutable or requires full reallocation for changes.</td><td id="?TFz" class="">Defined by database schema; modifications follow strict rules.</td><td id="Wmq~" class="">Highly mutable—rows, columns, and values can be added, removed, or updated flexibly.</td></tr><tr id="15a4c992-a19a-80ec-8012-dd2d339a3006"><td id="xvDd" class=""><strong>Usage Context</strong></td><td id="]dzU" class="">Used in mathematical computations, linear algebra, or simple numerical datasets.</td><td id="?TFz" class="">Ideal for structured, relational data in databases.</td><td id="Wmq~" class="">Common in data analysis, machine learning, and statistical programming (e.g., Python pandas, R).</td></tr><tr id="15a4c992-a19a-80b6-bdec-e6540bc40041"><td id="xvDd" class=""><strong>Relationships</strong></td><td id="]dzU" class="">No relationships between rows or columns.</td><td id="?TFz" class="">Relationships between tables (via foreign keys) are common.</td><td id="Wmq~" class="">No inherent relationships between columns, but can mimic relational structures (e.g., merging).</td></tr><tr id="15a4c992-a19a-80b6-9b9a-d5c52fcba64a"><td id="xvDd" class=""><strong>Storage</strong></td><td id="]dzU" class="">Memory-efficient, compact representation.</td><td id="?TFz" class="">Typically stored in a relational database (e.g., SQL).</td><td id="Wmq~" class="">Stored in memory or serialized formats like CSV, JSON, or Parquet.</td></tr></tbody></table><p id="15a4c992-a19a-8009-8d2c-f9f81ccccd14" class="">We’ve covered three rectangular data models: matrix, relation, and dataframe.</p><ul id="15a4c992-a19a-809f-b8bd-e53d9d10d1bd" class="bulleted-list"><li style="list-style-type:disc">“Tidy” dataframes give a view of “per record/observation.”</li></ul><ul id="15a4c992-a19a-80e9-b1d5-c3132bb6669c" class="bulleted-list"><li style="list-style-type:disc">“Pivoting” is a summarization step, useful for actual table display.</li></ul><p id="15a4c992-a19a-808b-8bca-d85c509bbcd9" class="">Transposing, pivoting, and unpivoting are very common operations that change the model paradigm and enable:</p><ul id="15a4c992-a19a-801c-9ea3-dd5b8d798812" class="bulleted-list"><li style="list-style-type:disc">Human visualization</li></ul><ul id="15a4c992-a19a-80bb-ba0c-f180cf70b817" class="bulleted-list"><li style="list-style-type:disc">Further data analysis</li></ul><h3 id="15a4c992-a19a-80db-9fbf-da5d1fb09296" class="">Data Type Transformations</h3><ul id="15a4c992-a19a-80d2-8fac-f6aaf6f3f313" class="bulleted-list"><li style="list-style-type:disc">Type induction<ul id="15a4c992-a19a-8086-8ceb-ff48b98667de" class="bulleted-list"><li style="list-style-type:circle">A type induction operator to infer a type from a column of values</li></ul><ul id="15a4c992-a19a-8056-a532-e9a2f35e40d4" class="bulleted-list"><li style="list-style-type:circle">Many of the systems we work with will enforce and coerce types to data.<ul id="15a4c992-a19a-80e9-80db-fcfd8bfeecd9" class="bulleted-list"><li style="list-style-type:square">DataFrame: convert to object if all else fails<ul id="15a4c992-a19a-804c-8276-fc408478fd82" class="bulleted-list"><li style="list-style-type:disc">exports to string, imports to some inferred type</li></ul></li></ul><ul id="15a4c992-a19a-8093-b987-da91fd6c79d2" class="bulleted-list"><li style="list-style-type:square">SQL and other DBMSes: coerce to attribute type in schema, or error<ul id="15a4c992-a19a-8024-ac8f-d1f9a71aaaba" class="bulleted-list"><li style="list-style-type:disc">Exports type-enforced schema with data</li></ul></li></ul></li></ul></li></ul><ul id="15a4c992-a19a-80a2-8817-c14973d20a06" class="bulleted-list"><li style="list-style-type:disc">It is very common to work with data that has little or no metadata<ul id="15a4c992-a19a-80cc-8b8d-e9138d273846" class="bulleted-list"><li style="list-style-type:circle">Rarely specified in advance: feature/statistical type (e.g., categorical)</li></ul><ul id="15a4c992-a19a-8072-824e-c1652be5fb41" class="bulleted-list"><li style="list-style-type:circle">Sometimes no mention of storage data type (e.g., pandas defaults to strings)</li></ul></li></ul><ul id="15a4c992-a19a-808d-b02f-f4ca4ca6e7d3" class="bulleted-list"><li style="list-style-type:disc">Typical transforms include the following (names may vary across systems/DSLs):<ul id="15a4c992-a19a-80f2-ac04-c7a9b7573cf3" class="bulleted-list"><li style="list-style-type:circle">Split a string into separate rows/columns.<ul id="15a4c992-a19a-8012-bd77-ec55a2ea3dfe" class="bulleted-list"><li style="list-style-type:square">Often by position or delimiter</li></ul><ul id="15a4c992-a19a-8089-bc68-ed52892abe8f" class="bulleted-list"><li style="list-style-type:square">Sometimes via parsing: e.g. counting nested parentheses (e.g. JSON/XML row splits)</li></ul></li></ul><ul id="15a4c992-a19a-8027-aa1d-c012a51c05bc" class="bulleted-list"><li style="list-style-type:circle">Count Matches: Create a new column with the count of matches of a pattern in a string column</li></ul><ul id="15a4c992-a19a-800c-98ff-d88c0920eede" class="bulleted-list"><li style="list-style-type:circle">Extract: create a column of substrings derived from another column</li></ul><ul id="15a4c992-a19a-8006-bc09-ecad5a5ba26d" class="bulleted-list"><li style="list-style-type:circle">Replace a (sub)string with a constant, a &quot;captured group&quot;, or any string formula (e.g. lowercase, trim, etc)</li></ul></li></ul><ul id="15a4c992-a19a-803b-9a4d-d62f630c2294" class="bulleted-list"><li style="list-style-type:disc">There are any number of reasons to transform data via numerical calculation.<ul id="15a4c992-a19a-8018-9ef5-de59d780d9a0" class="bulleted-list"><li style="list-style-type:circle">Typical calculations:<ul id="15a4c992-a19a-80e6-9cbf-da4f3257abb9" class="bulleted-list"><li style="list-style-type:square">Scalar functions</li></ul><ul id="15a4c992-a19a-8002-8814-f71230684099" class="bulleted-list"><li style="list-style-type:square">Aggregate functions<ul id="15a4c992-a19a-8031-bc2d-cfbf99cdc1e6" class="bulleted-list"><li style="list-style-type:disc">Univariate functions on sets of numbers: min, max, sum, avg, stddev, variance, etc.</li></ul><ul id="15a4c992-a19a-801c-83f8-d807142e5b54" class="bulleted-list"><li style="list-style-type:disc">Bivariate functions on sets of numbers: various forms of correlation (e.g. corr), covariance (e.g. covar_samp), regression (e.g. regr_sxx), etc,</li></ul><ul id="15a4c992-a19a-80da-978d-e8dd70a812d0" class="bulleted-list"><li style="list-style-type:disc">Univariate functions on ordered lists of numbers: percentile_disc</li></ul><ul id="15a4c992-a19a-8084-b717-e2a8c89e75a0" class="bulleted-list"><li style="list-style-type:disc">Univariate functions on lists of strings:<ul id="15a4c992-a19a-80b7-ad6b-c77f526979b4" class="bulleted-list"><li style="list-style-type:circle">string_agg concatenate all values</li></ul><ul id="15a4c992-a19a-80f8-a07a-c5a2d281fe0a" class="bulleted-list"><li style="list-style-type:circle">array_agg converts the list of values into an array</li></ul><ul id="15a4c992-a19a-8098-8c3c-ca87179afc3f" class="bulleted-list"><li style="list-style-type:circle">json_agg converts the list into a JSON object</li></ul></li></ul></li></ul><ul id="15a4c992-a19a-80d1-a1c5-fdde60d5bd94" class="bulleted-list"><li style="list-style-type:square">Window functions: basic, inverse-distribution, hypothetical-set</li></ul><ul id="15a4c992-a19a-80bc-b628-f5ad6e051fc4" class="bulleted-list"><li style="list-style-type:square">Calculations look fairly similar across languages. Let’s focus on SQL.</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15a4c992-a19a-80b5-bc83-df3557ea97c1" class="code"><code class="language-SQL"># Example
WITH yearnum AS
  (SELECT yearid, (yearid % 100) AS year
     FROM batting
  )
SELECT yearid,
       CONCAT(&#x27;&#x27;&#x27;&#x27;, LPAD(year::text, 2, &#x27;0&#x27;)) AS year
FROM yearnum
LIMIT 5;</code></pre></li></ul></li></ul><h3 id="15a4c992-a19a-8060-8b8c-fce63f7e583a" class="">Hierarchical Granularity</h3><p id="15a4c992-a19a-80d2-a696-f88a9a27c1ad" class="">A hierarchy dictates the transformation into smaller/larger granularities. Roughly 3 categories:</p><div id="15a4c992-a19a-8026-9e8d-c58f3e94eb0c" class="column-list"><div id="15a4c992-a19a-808b-9ae1-db767ef676da" style="width:62.5%" class="column"><ul id="15a4c992-a19a-8019-8ee3-d90b01e9b974" class="bulleted-list"><li style="list-style-type:disc">Explicit hierarchy, e.g., via a hierarchy table<ul id="15a4c992-a19a-80f4-8007-c1ba5d39ffd0" class="bulleted-list"><li style="list-style-type:circle">Domain, Kingdom, Phylum, Class, Order, Family, Genus, Species.</li></ul><ul id="15a4c992-a19a-8029-acad-deb63a4b37cd" class="bulleted-list"><li style="list-style-type:circle">City, County, State, Nation</li></ul><ul id="15a4c992-a19a-80b8-b6c7-e977f8a7735f" class="bulleted-list"><li style="list-style-type:circle">{Cars, Trucks, Planes} → Vehicles</li></ul></li></ul></div><div id="15a4c992-a19a-8016-b1ec-c08d460bed4e" style="width:37.5%" class="column"><figure id="15a4c992-a19a-807c-8432-d11a9f6462f9" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25882.12.58.png"><img style="width:253.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25882.12.58.png"/></a></figure></div></div><ul id="15a4c992-a19a-80e8-9b20-dc2543c2b947" class="bulleted-list"><li style="list-style-type:disc">Time hierarchy, e.g., by second, by minute, hourly, daily, …<ul id="15a4c992-a19a-80e9-8b47-ecd0d5377913" class="bulleted-list"><li style="list-style-type:circle">transaction time: the time a datum is recorded</li></ul><ul id="15a4c992-a19a-8084-b21e-eedec2c79117" class="bulleted-list"><li style="list-style-type:circle">valid time: the time range when the datum is considered to be true</li></ul></li></ul><ul id="15a4c992-a19a-8020-b910-cbbc78f4c097" class="bulleted-list"><li style="list-style-type:disc">Space hierarchy, e.g., geolocation of a physical phenomenon<ul id="15a4c992-a19a-8039-b504-ce61d43e463b" class="bulleted-list"><li style="list-style-type:circle">(latitude, longitude)</li></ul><ul id="15a4c992-a19a-8082-aaa8-cbb0c58cabf7" class="bulleted-list"><li style="list-style-type:circle">place-name</li></ul><ul id="15a4c992-a19a-806e-916b-e01db29eaff0" class="bulleted-list"><li style="list-style-type:circle">postal code</li></ul></li></ul><h3 id="15a4c992-a19a-8067-9585-e35d48de0939" class="">Outliers</h3><p id="15a4c992-a19a-8089-b325-e78f131c2886" class="">An outlier is a value “far enough” from “average.”</p><ul id="15a4c992-a19a-8035-93de-fc8f2a498d53" class="bulleted-list"><li style="list-style-type:disc">Detecting outliers helps us identify deviations with respect to a model.</li></ul><ul id="15a4c992-a19a-80f2-a981-fc495c7e828b" class="bulleted-list"><li style="list-style-type:disc">Handling our outliers helps us model the majority of the data<ul id="15a4c992-a19a-809d-ae37-c3576eb2cfc6" class="bulleted-list"><li style="list-style-type:circle">Note: always acknowledge these outliers in our assumptions as we are assuming a model</li></ul></li></ul><p id="15a4c992-a19a-80da-84c2-c1ad3c5d230d" class="">Every strategy of detecting/handling outliers needs two statistical measures on a set of values:</p><ul id="15a4c992-a19a-80e4-8b97-da6e52aa9de2" class="bulleted-list"><li style="list-style-type:disc"><strong>Center</strong>: what is “average”. e.g., mean, median, etc.</li></ul><ul id="15a4c992-a19a-8091-a793-e7739e3a113c" class="bulleted-list"><li style="list-style-type:disc"><strong>Dispersion</strong>: what is “far” from average. e.g., standard deviation, variance, interquartile range (IQR), etc.</li></ul><p id="15a4c992-a19a-803a-a952-f7e2f0aa5907" class=""><strong>Common Strategies to Handle Outliers</strong></p><ul id="15a4c992-a19a-80ed-b406-ff45c3262536" class="bulleted-list"><li style="list-style-type:disc">Dropping gaussian outliers - define outliers as ±2 std. from mean</li></ul><ul id="15a4c992-a19a-80c3-874f-c9663afa856c" class="bulleted-list"><li style="list-style-type:disc">Trimming outliers based on percentiles - k% trimming <strong>removes</strong> both k% tails of the distribution</li></ul><ul id="15a4c992-a19a-808a-b84f-c0f6775432a6" class="bulleted-list"><li style="list-style-type:disc">Winsorizing, i.e. replacing outliers with percentile statistics  - percentiles eg. k% winsorization <strong>replaces</strong> tails with k-, (100-k)-percentile values</li></ul><h3 id="15a4c992-a19a-80f0-b83c-fe0223a395eb" class="">Data Imputation</h3><p id="15a4c992-a19a-803d-bf9b-db6b784d00ba" class="">When data are missing, we often impute missing data by filling in “likely” values.</p><ul id="15a4c992-a19a-80f1-87c3-e768ef1ab4ba" class="bulleted-list"><li style="list-style-type:disc">Missing data can lead to bias.</li></ul><ul id="15a4c992-a19a-8087-ad2f-f914bb9dac51" class="bulleted-list"><li style="list-style-type:disc">Some downstream operators can’t tolerate missing date<ul id="15a4c992-a19a-8005-b61e-c190e3a0dcf1" class="bulleted-list"><li style="list-style-type:circle">e.g., ML packages</li></ul></li></ul><p id="15a4c992-a19a-8099-8f80-dff076a51004" class=""><strong>Imputation methods:</strong></p><ol type="1" id="15a4c992-a19a-8092-a2bb-ec49d9d45434" class="numbered-list" start="1"><li>Default values for a column<ol type="a" id="15a4c992-a19a-8001-9531-f118c9acb19a" class="numbered-list" start="1"><li>Usually a column aggregate, eg., center/mean/median</li></ol></li></ol><ol type="1" id="15a4c992-a19a-8081-a62f-e5d82b588b30" class="numbered-list" start="2"><li>Correlation across columns<ol type="a" id="15a4c992-a19a-8053-a179-dd8b219906a1" class="numbered-list" start="1"><li>Conditional distributions like P(elevation|latitude)</li></ol><div id="15a4c992-a19a-802c-8e07-ca852587cc86" class="column-list"><div id="0e4b84f2-ae8c-4dee-be0c-89e0b2e50d48" style="width:62.5%" class="column"><figure id="15a4c992-a19a-806e-b279-d38b3f1d3045" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25882.28.53.png"><img style="width:497.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25882.28.53.png"/></a></figure></div><div id="dc9bc70b-4704-4f92-9aef-2a28ac0be494" style="width:37.50000000000001%" class="column"><figure id="15a4c992-a19a-80ef-a25c-f9453a6bffe6" class="image"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25882.29.08.png"><img style="width:253.9921875px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25882.29.08.png"/></a></figure><p id="ed9abbac-df4a-4f35-8600-d97a82dd6325" class="">
</p></div></div></li></ol><ol type="1" id="15a4c992-a19a-80e5-a02b-e45800bc3be5" class="numbered-list" start="3"><li>General model-based interpolation<ol type="a" id="15a4c992-a19a-8016-823a-c9ccbcdaf760" class="numbered-list" start="1"><li>Trained on other data<ol type="i" id="15a4c992-a19a-8043-8c03-c3514c3c5a7e" class="numbered-list" start="1"><li>e.g. elev_in_m ~ f (beta_0, beta_1, …beta_n)</li></ol></li></ol></li></ol><ol type="1" id="15a4c992-a19a-805f-9f07-f20c510b6cdc" class="numbered-list" start="4"><li>Interpolation across ordered rows<ol type="a" id="15a4c992-a19a-80a9-84a3-fe89e436ef32" class="numbered-list" start="1"><li>Order rows in the relation, then use that order to impute values<figure id="15a4c992-a19a-8024-9ab4-f54c58c4255d" class="image" style="text-align:center"><a href="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25882.31.17.png"><img style="width:254px" src="DATA%201050%20Final%201584c992a19a8002b139d3a5f46fdb88/%25E6%2588%25AA%25E5%25B1%258F2024-12-12_%25E4%25B8%258B%25E5%258D%25882.31.17.png"/></a></figure></li></ol></li></ol><p id="15a4c992-a19a-8066-948d-fb13c29c72b8" class=""><strong>Examples - </strong>What method to use for each of the cases below?</p><p id="15a4c992-a19a-80c3-92b6-ce9f2a9482e1" class=""><strong>A)</strong> Stock price missing data</p><ul id="15a4c992-a19a-8055-b61f-c85221be8ecd" class="bulleted-list"><li style="list-style-type:disc"><em>General model-based interpolation</em></li></ul><ul id="15a4c992-a19a-8051-9993-d8d8e1fd5c5b" class="bulleted-list"><li style="list-style-type:disc">Correlation across columns</li></ul><p id="15a4c992-a19a-80ff-86d9-ee04477965cc" class=""><strong>B)</strong> In a sales dataset, no category labeled eg. {date, product, category, amount}</p><ul id="15a4c992-a19a-8078-b4ad-fa4dba0c9678" class="bulleted-list"><li style="list-style-type:disc">Default values for a column</li></ul><p id="15a4c992-a19a-80fc-922b-d927fcf482a1" class=""><strong>C) </strong>No grade entered for the student for a class</p><ul id="15a4c992-a19a-803d-b31b-c967b36c852e" class="bulleted-list"><li style="list-style-type:disc"><em>?</em></li></ul><p id="15a4c992-a19a-80ee-851f-ee788e2581f4" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>